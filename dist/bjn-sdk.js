!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.BJNClient=t():e.BJNClient=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(module,exports,__webpack_require__){window,module.exports=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=70)}([function(e,t,n){(function(){var e,r=this,i=r.Backbone,o=[].slice;(e=t).VERSION="1.1.0";var a=r._;a||(a=n(1)),e.$=r.jQuery||r.Zepto||r.ender||r.$,e.noConflict=function(){return r.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s=e.Events={on:function(e,t,n){return u(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var r=this,i=a.once(function(){r.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,n)},off:function(e,t,n){var r,i,o,s,c,l,f,d;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(c=0,l=(s=e?[e]:a.keys(this._events)).length;c<l;c++)if(e=s[c],o=this._events[e]){if(this._events[e]=r=[],t||n)for(f=0,d=o.length;f<d;f++)i=o[f],(t&&t!==i.callback&&t!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&l(n,t),r&&l(r,arguments),this},stopListening:function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=!t&&!n;for(var o in n||"object"!=typeof t||(n=this),e&&((r={})[e._listenId]=e),r)(e=r[o]).off(t,n,this),(i||a.isEmpty(e._events))&&delete this._listeningTo[o];return this}},c=/\s+/,u=function(e,t,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(r));return!1}return!0},l=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t)}};a.each({listenTo:"on",listenToOnce:"once"},function(e,t){s[t]=function(t,n,r){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=a.uniqueId("l"))]=t,r||"object"!=typeof n||(r=this),t[e](n,r,this),this}}),s.bind=s.on,s.unbind=s.off,a.extend(e,s);var f=e.Model=function(e,t){var n=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=a.defaults({},n,a.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};a.extend(f.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var r,i,o,s,c,u,l,f;if(null==e)return this;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;for(r in o=n.unset,c=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=a.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]),i)t=i[r],a.isEqual(f[r],t)||s.push(r),a.isEqual(l[r],t)?delete this.changed[r]:this.changed[r]=t,o?delete f[r]:f[r]=t;if(!c){s.length&&(this._pending=!0);for(var d=0,p=s.length;d<p;d++)this.trigger("change:"+s[d],this,f[s[d]],n)}if(u)return this;if(!c)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&a.clone(this.changed);var t,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in e)a.isEqual(r[i],t=e[i])||((n||(n={}))[i]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?a.clone(e):{}).parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(r){if(!t.set(t.parse(r,e),e))return!1;n&&n(t,r,e),t.trigger("sync",t,r,e)},N(this,e),this.sync("read",this,e)},save:function(e,t,n){var r,i,o,s=this.attributes;if(null==e||"object"==typeof e?(r=e,n=t):(r={})[e]=t,n=a.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=a.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var c=this,u=n.success;return n.success=function(e){c.attributes=s;var t=c.parse(e,n);if(n.wait&&(t=a.extend(r||{},t)),a.isObject(t)&&!c.set(t,n))return!1;u&&u(c,e,n),c.trigger("sync",c,e,n)},N(this,n),"patch"==(i=this.isNew()?"create":n.patch?"patch":"update")&&(n.attrs=r),o=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),o},destroy:function(e){var t=this,n=(e=e?a.clone(e):{}).success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(i){(e.wait||t.isNew())&&r(),n&&n(t,i,e),t.isNew()||t.trigger("sync",t,i,e)},this.isNew())return e.success(),!1;N(this,e);var i=this.sync("delete",this,e);return e.wait||r(),i},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||M();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,a.extend(t,{validationError:n})),!1)}}),a.each(["keys","values","pairs","invert","pick","omit"],function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var d=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},p={add:!0,remove:!0,merge:!0},h={add:!0,remove:!1};a.extend(d.prototype,s,{model:f,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.extend({merge:!1},t,h))},remove:function(e,t){var n,r,i,o,s=!a.isArray(e);for(e=s?[e]:a.clone(e),t||(t={}),n=0,r=e.length;n<r;n++)(o=e[n]=this.get(e[n]))&&(delete this._byId[o.id],delete this._byId[o.cid],i=this.indexOf(o),this.models.splice(i,1),this.length--,t.silent||(t.index=i,o.trigger("remove",o,this,t)),this._removeReference(o));return s?e[0]:e},set:function(e,t){(t=a.defaults({},t,p)).parse&&(e=this.parse(e,t));var n,r,i,o,s,c,u,l=!a.isArray(e);e=l?e?[e]:[]:a.clone(e);var d=t.at,h=this.model,g=this.comparator&&null==d&&!1!==t.sort,m=a.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=t.add,S=t.merge,C=t.remove,w=!(g||!_||!C)&&[];for(n=0,r=e.length;n<r;n++){if(i=(s=e[n])instanceof f?o=s:s[h.prototype.idAttribute],c=this.get(i))C&&(b[c.cid]=!0),S&&(s=s===o?o.attributes:s,t.parse&&(s=c.parse(s,t)),c.set(s,t),g&&!u&&c.hasChanged(m)&&(u=!0)),e[n]=c;else if(_){if(!(o=e[n]=this._prepareModel(s,t)))continue;v.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)}w&&w.push(c||o)}if(C){for(n=0,r=this.length;n<r;++n)b[(o=this.models[n]).cid]||y.push(o);y.length&&this.remove(y,t)}if(v.length||w&&w.length)if(g&&(u=!0),this.length+=v.length,null!=d)for(n=0,r=v.length;n<r;n++)this.models.splice(d+n,0,v[n]);else{w&&(this.models.length=0);var T=w||v;for(n=0,r=T.length;n<r;n++)this.models.push(T[n])}if(u&&this.sort({silent:!0}),!t.silent){for(n=0,r=v.length;n<r;n++)(o=v[n]).trigger("add",o,this,t);(u||w&&w.length)&&this.trigger("sort",this,t)}return l?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),e=this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,a.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,a.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){void 0===(e=e?a.clone(e):{}).parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(r){var i=e.reset?"reset":"set";n[i](r,e),t&&t(n,r,e),n.trigger("sync",n,r,e)},N(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,r=t.success;return t.success=function(e,t,i){i.wait&&n.add(e,i),r&&r(e,t,i)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof f)return e.collection||(e.collection=this),e;(t=t?a.clone(t):{}).collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}}),a.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"],function(e){d.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}}),a.each(["groupBy","countBy","sortBy"],function(e){d.prototype[e]=function(t,n){var r=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,r,n)}});var g=e.View=function(e){this.cid=a.uniqueId("view"),e||(e={}),a.extend(this,a.pick(e,v)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},m=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];a.extend(g.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==n&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;for(var t in this.undelegateEvents(),e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var r=t.match(m),i=r[1],o=r[2];n=a.bind(n,this),i+=".delegateEvents"+this.cid,""===o?this.$el.on(i,n):this.$el.on(i,o,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t.class=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,r){var i=b[t];a.defaults(r||(r={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:i,dataType:"json"};if(r.url||(o.url=a.result(n,"url")||M()),null!=r.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){o.type="POST",r.emulateJSON&&(o.data._method=i);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",i),s)return s.apply(this,arguments)}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&y&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var c=r.xhr=e.ajax(a.extend(o,r));return n.trigger("request",n,c,r),c};var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),b={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},S=/\((.*?)\)/g,C=/(\(\?)?:\w+/g,w=/\*\w+/g,T=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(_.prototype,s,{initialize:function(){},route:function(t,n,r){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return e.history.route(t,function(o){var a=i._extractParameters(t,o);r&&r.apply(i,a),i.trigger.apply(i,["route:"+n].concat(a)),i.trigger("route",n,a),e.history.trigger("route",i,n,a)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(T,"\\$&").replace(S,"(?:$1)?").replace(C,function(e,t){return t?e:"([^/]+)"}).replace(w,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var E=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,A=/msie [\w.]+/,R=/\/$/,I=/[?#].*$/;E.started=!1,a.extend(E.prototype,s,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(R,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(x,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=a.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=A.exec(navigator.userAgent.toLowerCase())&&(!r||r<=7);this.root=("/"+this.root+"/").replace(k,"/"),i&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location,s=o.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&s&&o.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment+o.search))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),a.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!E.started)return!1;t&&!0!==t||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(I,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),e.history=new E,f.extend=d.extend=_.extend=g.extend=E.extend=function(e,t){var n,r=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},a.extend(n,r,t);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,e&&a.extend(n.prototype,e),n.__super__=r.prototype,n};var M=function(){throw new Error('A "url" property or function must be specified')},N=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}}}).call(this)},function(e,t,n){(function(e,r,i){var o;
/**
 * @license
 * Lo-Dash 1.0.1 (Custom Build) <http://lodash.com/>
 * Build: `lodash modern -o ./dist/lodash.js`
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.4.4 <http://underscorejs.org/>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * Available under MIT license <http://lodash.com/license>
 */!function(a,s){var c="object"==typeof t&&t,u="object"==typeof e&&e&&e.exports==c&&e,l="object"==typeof r&&r;l.global;var f=[],d={},p=0,h=d,g=30,m=a._,v=/&(?:amp|lt|gt|quot|#39);/g,y=/\b__p \+= '';/g,b=/\b(__p \+=) '' \+/g,_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/\w*$/,C=RegExp("^"+(d.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),w=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,T=/<%=([\s\S]+?)%>/g,E=/($^)/,x=/[&<>"']/g,k=/['\n\r\t\u2028\u2029\\]/g,A=0,R=Math.ceil,I=f.concat,M=Math.floor,N=C.test(N=Object.getPrototypeOf)&&N,O=d.hasOwnProperty,j=f.push,P=d.toString,L=C.test(L=Se.bind)&&L,D=C.test(D=Array.isArray)&&D,F=a.isFinite,B=a.isNaN,U=C.test(U=Object.keys)&&U,V=Math.max,q=Math.min,H=Math.random,G="[object Arguments]",W="[object Array]",z="[object Boolean]",$="[object Date]",J="[object Number]",X="[object Object]",K="[object RegExp]",Q="[object String]",Y=!!a.attachEvent,Z=L&&!/\n|true/.test(L+Y),ee=L&&!Z,te=U&&(Y||Z),ne={"[object Function]":!1};ne[G]=ne[W]=ne[z]=ne[$]=ne[J]=ne[X]=ne[K]=ne[Q]=!0;var re={};re[W]=Array,re[z]=Boolean,re[$]=Date,re[X]=Object,re[J]=Number,re[K]=RegExp,re[Q]=String;var ie={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},oe={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};function ae(e){return e&&"object"==typeof e&&e.__wrapped__?e:this instanceof ae?void(this.__wrapped__=e):new ae(e)}ae.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:T,variable:"",imports:{_:ae}};var se=function(e){var t="var index, iterable = "+e.firstArg+", result = iterable;\nif (!iterable) return result;\n"+e.top+";\n";return e.arrays&&(t+="var length = iterable.length; index = -1;\nif ("+e.arrays+") {\n  while (++index < length) {\n    "+e.loop+"\n  }\n}\nelse {  "),e.isKeysFast&&e.useHas?t+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? nativeKeys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    "+e.loop+"\n  }  ":(t+="\n  for (index in iterable) {",e.useHas&&(t+="\n    if (",e.useHas&&(t+="hasOwnProperty.call(iterable, index)"),t+=") {    "),t+=e.loop+";    ",e.useHas&&(t+="\n    }"),t+="\n  }  "),e.arrays&&(t+="\n}"),t+=e.bottom+";\nreturn result"},ce={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},ue={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},le={top:"if (!objectTypes[typeof iterable]) return result;\n"+ue.top,arrays:!1};function fe(e,t,n){t||(t=0);var r=e.length,i=r-t>=(n||g);if(i)for(var o={},a=t-1;++a<r;){var s=e[a]+"";(O.call(o,s)?o[s]:o[s]=[]).push(e[a])}return function(n){if(i){var r=n+"";return O.call(o,r)&&tt(o[r],n)>-1}return tt(e,n,t)>-1}}function de(e){return e.charCodeAt(0)}function pe(e,t){var n=e.index,r=t.index;if((e=e.criteria)!==(t=t.criteria)){if(e>t||void 0===e)return 1;if(e<t||void 0===t)return-1}return n<r?-1:1}function he(e,t,n,r){var i=Le(e),o=!n,a=t;return o&&(n=t),i||(t=e),function s(){var c=arguments,u=o?this:t;if(i||(e=t[a]),n.length&&(c=c.length?(c=Se(c),r?c.concat(n):n.concat(c)):n),this instanceof s){_e.prototype=e.prototype,u=new _e,_e.prototype=null;var l=e.apply(u,c);return De(l)?l:u}return e.apply(u,c)}}function ge(e,t,n){if(null==e)return st;var r=typeof e;if("function"!=r){if("object"!=r)return function(t){return t[e]};var i=ke(e);return function(t){for(var n=i.length,r=!1;n--&&(r=Pe(t[i[n]],e[i[n]],h)););return r}}return void 0!==t?1===n?function(n){return e.call(t,n)}:2===n?function(n,r){return e.call(t,n,r)}:4===n?function(n,r,i,o){return e.call(t,n,r,i,o)}:function(n,r,i){return e.call(t,n,r,i)}:e}function me(){for(var e,t={isKeysFast:te,arrays:"isArray(iterable)",bottom:"",loop:"",top:"",useHas:!0},n=0;e=arguments[n];n++)for(var r in e)t[r]=e[r];var i=t.args;return t.firstArg=/^[^,]+/.exec(i)[0],Function("createCallback, hasOwnProperty, isArguments, isArray, isString, objectTypes, nativeKeys","return function("+i+") {\n"+se(t)+"\n}")(ge,O,we,xe,Ue,ie,U)}var ve=me(ue);function ye(e){return"\\"+oe[e]}function be(e){return Ae[e]}function _e(){}function Se(e,t,n){t||(t=0),void 0===n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(i<0?0:i);++r<i;)o[r]=e[t+r];return o}function Ce(e){return Re[e]}function we(e){return P.call(e)==G}var Te=me(ue,le,{useHas:!1}),Ee=me(ue,le),xe=D||function(e){return e instanceof Array||P.call(e)==W},ke=U?function(e){return De(e)?U(e):[]}:function(e){var t=[];return Ee(e,function(e,n){t.push(n)}),t},Ae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Re=je(Ae),Ie=me(ce,{top:ce.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = createCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"});function Me(e,t,n,r,i,o){var a=e;if("function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n){n=void 0===r?n:ge(n,r,1);var c=void 0!==(a=n(a));c||(a=e)}var u=De(a);if(u){var l=P.call(a);if(!ne[l])return a;var f=xe(a)}if(!u||!t)return u&&!c?f?Se(a):Ie({},a):a;var d=re[l];switch(l){case z:case $:return c?a:new d(+a);case J:case Q:return c?a:new d(a);case K:return c?a:d(a.source,S.exec(a))}i||(i=[]),o||(o=[]);for(var p=i.length;p--;)if(i[p]==e)return o[p];return c||(a=f?d(a.length):{},f&&(O.call(e,"index")&&(a.index=e.index),O.call(e,"input")&&(a.input=e.input))),i.push(e),o.push(a),(f?ze:Ee)(c?a:e,function(e,r){a[r]=Me(e,t,n,s,i,o)}),a}var Ne=me(ce);function Oe(e){var t=[];return Te(e,function(e,n){Le(e)&&t.push(n)}),t.sort()}function je(e){for(var t=-1,n=ke(e),r=n.length,i={};++t<r;){var o=n[t];i[e[o]]=o}return i}function Pe(e,t,n,r,i,o){var a=n===h;if(n&&!a){var s=(n=void 0===r?n:ge(n,r,2))(e,t);if(void 0!==s)return!!s}if(e===t)return 0!==e||1/e==1/t;var c=typeof e,u=typeof t;if(e==e&&(!e||"function"!=c&&"object"!=c)&&(!t||"function"!=u&&"object"!=u))return!1;if(null==e||null==t)return e===t;var l=P.call(e),f=P.call(t);if(l==G&&(l=X),f==G&&(f=X),l!=f)return!1;switch(l){case z:case $:return+e==+t;case J:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case K:case Q:return e==t+""}var d=l==W;if(!d){if(e.__wrapped__||t.__wrapped__)return Pe(e.__wrapped__||e,t.__wrapped__||t,n,r,i,o);if(l!=X)return!1;var p=e.constructor,g=t.constructor;if(p!=g&&!(Le(p)&&p instanceof p&&Le(g)&&g instanceof g))return!1}i||(i=[]),o||(o=[]);for(var m=i.length;m--;)if(i[m]==e)return o[m]==t;var v=0;if(s=!0,i.push(e),o.push(t),d){if(m=e.length,v=t.length,!(s=v==e.length)&&!a)return s;for(;v--;){var y=m,b=t[v];if(a)for(;y--&&!(s=Pe(e[y],b,n,r,i,o)););else if(!(s=Pe(e[v],b,n,r,i,o)))break}return s}return Te(t,function(t,a,c){if(O.call(c,a))return v++,s=O.call(e,a)&&Pe(e[a],t,n,r,i,o)}),s&&!a&&Te(e,function(e,t,n){if(O.call(n,t))return s=--v>-1}),s}function Le(e){return"function"==typeof e||!1}function De(e){return!!e&&ie[typeof e]}function Fe(e){return"number"==typeof e||P.call(e)==J}Le(/x/)&&(Le=function(e){return e instanceof Function||"[object Function]"==P.call(e)});var Be=function(e){if(!e||"object"!=typeof e)return!1;var t=e.valueOf,n="function"==typeof t&&(n=N(t))&&N(n);return n?e==n||N(e)==n&&!we(e):function(e){var t=!1;if(!e||"object"!=typeof e||we(e))return t;var n=e.constructor;return!Le(n)||n instanceof n?(Te(e,function(e,n){t=n}),!1===t||O.call(e,t)):t}(e)};function Ue(e){return"string"==typeof e||P.call(e)==Q}function Ve(e){for(var t=-1,n=ke(e),r=n.length,i=Array(r);++t<r;)i[t]=e[n[t]];return i}function qe(e,t,n){var r=-1,i=e?e.length:0,o=!1;return n=(n<0?V(0,i+n):n)||0,"number"==typeof i?o=(Ue(e)?e.indexOf(t,n):tt(e,t,n))>-1:ve(e,function(e){if(++r>=n)return!(o=e===t)}),o}function He(e,t,n){var r=!0;if(t=ge(t,n),xe(e))for(var i=-1,o=e.length;++i<o&&(r=!!t(e[i],i,e)););else ve(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Ge(e,t,n){var r=[];if(t=ge(t,n),xe(e))for(var i=-1,o=e.length;++i<o;){var a=e[i];t(a,i,e)&&r.push(a)}else ve(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function We(e,t,n){var r;return t=ge(t,n),ze(e,function(e,n,i){if(t(e,n,i))return r=e,!1}),r}function ze(e,t,n){if(t&&void 0===n&&xe(e))for(var r=-1,i=e.length;++r<i&&!1!==t(e[r],r,e););else ve(e,t,n);return e}function $e(e,t,n){var r=-1,i=e?e.length:0,o=Array("number"==typeof i?i:0);if(t=ge(t,n),xe(e))for(;++r<i;)o[r]=t(e[r],r,e);else ve(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function Je(e,t,n){var r=-1/0,i=r;if(!t&&xe(e))for(var o=-1,a=e.length;++o<a;){var s=e[o];s>i&&(i=s)}else t=!t&&Ue(e)?de:ge(t,n),ve(e,function(e,n,o){var a=t(e,n,o);a>r&&(r=a,i=e)});return i}var Xe=$e;function Ke(e,t,n,r){var i=arguments.length<3;if(t=ge(t,r,4),xe(e)){var o=-1,a=e.length;for(i&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e)}else ve(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)});return n}function Qe(e,t,n,r){var i=e,o=e?e.length:0,a=arguments.length<3;if("number"!=typeof o){var s=ke(e);o=s.length}return t=ge(t,r,4),ze(e,function(e,r,c){r=s?s[--o]:--o,n=a?(a=!1,i[r]):t(n,i[r],r,c)}),n}function Ye(e,t,n){var r;if(t=ge(t,n),xe(e))for(var i=-1,o=e.length;++i<o&&!(r=t(e[i],i,e)););else ve(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}var Ze=Ge;function et(e,t,n){if(e){var r=0,i=e.length;if("number"!=typeof t&&null!=t){var o=-1;for(t=ge(t,n);++o<i&&t(e[o],o,e);)r++}else if(null==(r=t)||n)return e[0];return Se(e,0,q(V(0,r),i))}}function tt(e,t,n){var r=-1,i=e?e.length:0;if("number"==typeof n)r=(n<0?V(0,i+n):n||0)-1;else if(n)return e[r=rt(e,t)]===t?r:-1;for(;++r<i;)if(e[r]===t)return r;return-1}function nt(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,o=e?e.length:0;for(t=ge(t,n);++i<o&&t(e[i],i,e);)r++}else r=null==t||n?1:V(0,t);return Se(e,r)}function rt(e,t,n,r){var i=0,o=e?e.length:i;for(t=(n=n?ge(n,r,1):st)(t);i<o;){var a=i+o>>>1;n(e[a])<t?i=a+1:o=a}return i}function it(e,t,n,r){var i=-1,o=e?e.length:0,a=[],s=a;"function"==typeof t&&(r=n,n=t,t=!1);var c=!t&&o>=75;if(c)var u={};for(n&&(s=[],n=ge(n,r));++i<o;){var l=e[i],f=n?n(l,i,e):l;if(c)var d=f+"",p=O.call(u,d)?!(s=u[d]):s=u[d]=[];(t?!i||s[s.length-1]!==f:p||tt(s,f)<0)&&((n||c)&&s.push(f),a.push(l))}return a}function ot(e,t){return ee||L&&arguments.length>2?L.call.apply(L,arguments):he(e,t,Se(arguments,2))}function at(e){var t=Se(arguments,1);return setTimeout(function(){e.apply(s,t)},1)}function st(e){return e}function ct(e){ze(Oe(e),function(t){var n=ae[t]=e[t];ae.prototype[t]=function(){var e=[this.__wrapped__];return j.apply(e,arguments),new ae(n.apply(ae,e))}})}function ut(){return this.__wrapped__}Z&&u&&"function"==typeof i&&(at=ot(i,a)),ae.after=function(e,t){return e<1?t():function(){if(--e<1)return t.apply(this,arguments)}},ae.assign=Ie,ae.at=function(e){for(var t=-1,n=I.apply(f,Se(arguments,1)),r=n.length,i=Array(r);++t<r;)i[t]=e[n[t]];return i},ae.bind=ot,ae.bindAll=function(e){for(var t=I.apply(f,arguments),n=t.length>1?0:(t=Oe(e),-1),r=t.length;++n<r;){var i=t[n];e[i]=ot(e[i],e)}return e},ae.bindKey=function(e,t){return he(e,t,Se(arguments,2))},ae.compact=function(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r},ae.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},ae.countBy=function(e,t,n){var r={};return t=ge(t,n),ze(e,function(e,n,i){n=t(e,n,i)+"",O.call(r,n)?r[n]++:r[n]=1}),r},ae.debounce=function(e,t,n){var r,i,o,a;function s(){a=null,n||(i=e.apply(o,r))}return function(){var c=n&&!a;return r=arguments,o=this,clearTimeout(a),a=setTimeout(s,t),c&&(i=e.apply(o,r)),i}},ae.defaults=Ne,ae.defer=at,ae.delay=function(e,t){var n=Se(arguments,2);return setTimeout(function(){e.apply(s,n)},t)},ae.difference=function(e){for(var t=-1,n=e?e.length:0,r=fe(I.apply(f,arguments),n),i=[];++t<n;){var o=e[t];r(o)||i.push(o)}return i},ae.filter=Ge,ae.flatten=function e(t,n){for(var r=-1,i=t?t.length:0,o=[];++r<i;){var a=t[r];xe(a)?j.apply(o,n?a:e(a)):o.push(a)}return o},ae.forEach=ze,ae.forIn=Te,ae.forOwn=Ee,ae.functions=Oe,ae.groupBy=function(e,t,n){var r={};return t=ge(t,n),ze(e,function(e,n,i){n=t(e,n,i)+"",(O.call(r,n)?r[n]:r[n]=[]).push(e)}),r},ae.initial=function(e,t,n){if(!e)return[];var r=0,i=e.length;if("number"!=typeof t&&null!=t){var o=i;for(t=ge(t,n);o--&&t(e[o],o,e);)r++}else r=null==t||n?1:t||r;return Se(e,0,q(V(0,i-r),i))},ae.intersection=function(e){var t=arguments,n=t.length,r={0:{}},i=-1,o=e?e.length:0,a=o>=100,s=[],c=s;e:for(;++i<o;){var u=e[i];if(a)var l=u+"",f=O.call(r[0],l)?!(c=r[0][l]):c=r[0][l]=[];if(f||tt(c,u)<0){a&&c.push(u);for(var d=n;--d;)if(!(r[d]||(r[d]=fe(t[d],0,100)))(u))continue e;s.push(u)}}return s},ae.invert=je,ae.invoke=function(e,t){var n=Se(arguments,2),r=-1,i="function"==typeof t,o=e?e.length:0,a=Array("number"==typeof o?o:0);return ze(e,function(e){a[++r]=(i?t:e[t]).apply(e,n)}),a},ae.keys=ke,ae.map=$e,ae.max=Je,ae.memoize=function(e,t){var n={};return function(){var r=(t?t.apply(this,arguments):arguments[0])+"";return O.call(n,r)?n[r]:n[r]=e.apply(this,arguments)}},ae.merge=function e(t,n,r){var i=arguments,o=0,a=2;if(!De(t))return t;if(r===h)var s=i[3],c=i[4],u=i[5];else c=[],u=[],"number"!=typeof r&&(a=i.length),a>3&&"function"==typeof i[a-2]?s=ge(i[--a-1],i[a--],2):a>2&&"function"==typeof i[a-1]&&(s=i[--a]);for(;++o<a;)(xe(i[o])?ze:Ee)(i[o],function(n,r){var i,o,a=n,l=t[r];if(n&&((o=xe(n))||Be(n))){for(var f=c.length;f--;)if(i=c[f]==n){l=u[f];break}i||(l=o?xe(l)?l:[]:Be(l)?l:{},s&&void 0!==(a=s(l,n))&&(l=a),c.push(n),u.push(l),s||(l=e(l,n,h,s,c,u)))}else s&&void 0===(a=s(l,n))&&(a=n),void 0!==a&&(l=a);t[r]=l});return t},ae.min=function(e,t,n){var r=1/0,i=r;if(!t&&xe(e))for(var o=-1,a=e.length;++o<a;){var s=e[o];s<i&&(i=s)}else t=!t&&Ue(e)?de:ge(t,n),ve(e,function(e,n,o){var a=t(e,n,o);a<r&&(r=a,i=e)});return i},ae.object=function(e,t){for(var n=-1,r=e?e.length:0,i={};++n<r;){var o=e[n];t?i[o]=t[n]:i[o[0]]=o[1]}return i},ae.omit=function(e,t,n){var r="function"==typeof t,i={};if(r)t=ge(t,n);else var o=I.apply(f,arguments);return Te(e,function(e,n,a){(r?!t(e,n,a):tt(o,n,1)<0)&&(i[n]=e)}),i},ae.once=function(e){var t,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},ae.pairs=function(e){for(var t=-1,n=ke(e),r=n.length,i=Array(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i},ae.partial=function(e){return he(e,Se(arguments,1))},ae.partialRight=function(e){return he(e,Se(arguments,1),null,h)},ae.pick=function(e,t,n){var r={};if("function"!=typeof t)for(var i=0,o=I.apply(f,arguments),a=De(e)?o.length:0;++i<a;){var s=o[i];s in e&&(r[s]=e[s])}else t=ge(t,n),Te(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r},ae.pluck=Xe,ae.range=function(e,t,n){e=+e||0,n=+n||1,null==t&&(t=e,e=0);for(var r=-1,i=V(0,R((t-e)/n)),o=Array(i);++r<i;)o[r]=e,e+=n;return o},ae.reject=function(e,t,n){return t=ge(t,n),Ge(e,function(e,n,r){return!t(e,n,r)})},ae.rest=nt,ae.shuffle=function(e){var t=-1,n=e?e.length:0,r=Array("number"==typeof n?n:0);return ze(e,function(e){var n=M(H()*(++t+1));r[t]=r[n],r[n]=e}),r},ae.sortBy=function(e,t,n){var r=-1,i=e?e.length:0,o=Array("number"==typeof i?i:0);for(t=ge(t,n),ze(e,function(e,n,i){o[++r]={criteria:t(e,n,i),index:r,value:e}}),i=o.length,o.sort(pe);i--;)o[i]=o[i].value;return o},ae.tap=function(e,t){return t(e),e},ae.throttle=function(e,t){var n,r,i,o,a=0;function s(){a=new Date,o=null,r=e.apply(i,n)}return function(){var c=new Date,u=t-(c-a);return n=arguments,i=this,u<=0?(clearTimeout(o),o=null,a=c,r=e.apply(i,n)):o||(o=setTimeout(s,u)),r}},ae.times=function(e,t,n){e=+e||0;for(var r=-1,i=Array(e);++r<e;)i[r]=t.call(n,r);return i},ae.toArray=function(e){return e&&"number"==typeof e.length?Se(e):Ve(e)},ae.union=function(){return it(I.apply(f,arguments))},ae.uniq=it,ae.values=Ve,ae.where=Ze,ae.without=function(e){for(var t=-1,n=e?e.length:0,r=fe(arguments,1),i=[];++t<n;){var o=e[t];r(o)||i.push(o)}return i},ae.wrap=function(e,t){return function(){var n=[e];return j.apply(n,arguments),t.apply(this,n)}},ae.zip=function(e){for(var t=-1,n=e?Je(Xe(arguments,"length")):0,r=Array(n);++t<n;)r[t]=Xe(arguments,t);return r},ae.collect=$e,ae.drop=nt,ae.each=ze,ae.extend=Ie,ae.methods=Oe,ae.select=Ge,ae.tail=nt,ae.unique=it,ct(ae),ae.clone=Me,ae.cloneDeep=function(e,t,n){return Me(e,!0,t,n)},ae.contains=qe,ae.escape=function(e){return null==e?"":(e+"").replace(x,be)},ae.every=He,ae.find=We,ae.has=function(e,t){return!!e&&O.call(e,t)},ae.identity=st,ae.indexOf=tt,ae.isArguments=we,ae.isArray=xe,ae.isBoolean=function(e){return!0===e||!1===e||P.call(e)==z},ae.isDate=function(e){return e instanceof Date||P.call(e)==$},ae.isElement=function(e){return!!e&&1===e.nodeType},ae.isEmpty=function(e){var t=!0;if(!e)return t;var n=P.call(e),r=e.length;return n==W||n==Q||n==G||n==X&&"number"==typeof r&&Le(e.splice)?!r:(Ee(e,function(){return t=!1}),t)},ae.isEqual=Pe,ae.isFinite=function(e){return F(e)&&!B(parseFloat(e))},ae.isFunction=Le,ae.isNaN=function(e){return Fe(e)&&e!=+e},ae.isNull=function(e){return null===e},ae.isNumber=Fe,ae.isObject=De,ae.isPlainObject=Be,ae.isRegExp=function(e){return e instanceof RegExp||P.call(e)==K},ae.isString=Ue,ae.isUndefined=function(e){return void 0===e},ae.lastIndexOf=function(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(n<0?V(0,r+n):q(n,r-1))+1);r--;)if(e[r]===t)return r;return-1},ae.mixin=ct,ae.noConflict=function(){return a._=m,this},ae.random=function(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t&&(t=e,e=0),e+M(H()*((+t||0)-e+1))},ae.reduce=Ke,ae.reduceRight=Qe,ae.result=function(e,t){var n=e?e[t]:s;return Le(n)?e[t]():n},ae.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:ke(e).length},ae.some=Ye,ae.sortedIndex=rt,ae.template=function(e,t,n){var r=ae.templateSettings;e||(e=""),n=Ne({},n,r);var i,o=Ne({},n.imports,r.imports),a=ke(o),c=Ve(o),u=0,l=n.interpolate||E,f="__p += '",d=RegExp((n.escape||E).source+"|"+l.source+"|"+(l===T?w:E).source+"|"+(n.evaluate||E).source+"|$","g");e.replace(d,function(t,n,r,o,a,s){return r||(r=o),f+=e.slice(u,s).replace(k,ye),n&&(f+="' +\n__e("+n+") +\n'"),a&&(i=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t}),f+="';\n";var p=n.variable,h=p;h||(f="with ("+(p="obj")+") {\n"+f+"\n}\n"),f=(i?f.replace(y,""):f).replace(b,"$1").replace(_,"$1;"),f="function("+p+") {\n"+(h?"":p+" || ("+p+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g="\n/*\n//@ sourceURL="+(n.sourceURL||"/lodash/template/source["+A+++"]")+"\n*/";try{var m=Function(a,"return "+f+g).apply(s,c)}catch(e){throw e.source=f,e}return t?m(t):(m.source=f,m)},ae.unescape=function(e){return null==e?"":(e+"").replace(v,Ce)},ae.uniqueId=function(e){var t=++p;return(null==e?"":e+"")+t},ae.all=He,ae.any=Ye,ae.detect=We,ae.foldl=Ke,ae.foldr=Qe,ae.include=qe,ae.inject=Ke,Ee(ae,function(e,t){ae.prototype[t]||(ae.prototype[t]=function(){var t=[this.__wrapped__];return j.apply(t,arguments),e.apply(ae,t)})}),ae.first=et,ae.last=function(e,t,n){if(e){var r=0,i=e.length;if("number"!=typeof t&&null!=t){var o=i;for(t=ge(t,n);o--&&t(e[o],o,e);)r++}else if(null==(r=t)||n)return e[i-1];return Se(e,V(0,i-r))}},ae.take=et,ae.head=et,Ee(ae,function(e,t){ae.prototype[t]||(ae.prototype[t]=function(t,n){var r=e(this.__wrapped__,t,n);return null==t||n&&"function"!=typeof t?r:new ae(r)})}),ae.VERSION="1.0.1",ae.prototype.toString=function(){return this.__wrapped__+""},ae.prototype.value=ut,ae.prototype.valueOf=ut,ve(["join","pop","shift"],function(e){var t=f[e];ae.prototype[e]=function(){return t.apply(this.__wrapped__,arguments)}}),ve(["push","reverse","sort","unshift"],function(e){var t=f[e];ae.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),ve(["concat","slice","splice"],function(e){var t=f[e];ae.prototype[e]=function(){return new ae(t.apply(this.__wrapped__,arguments))}}),a._=ae,(o=function(){return ae}.call(t,n,t,e))===s||(e.exports=o)}(this)}).call(this,n(29)(e),n(9),n(17).setImmediate)},function(e,t,n){var r;!function(){var n={};void 0!==(r=function(){return n}.apply(t,[]))&&(e.exports=r),n.Class=function(){var e,t,n=arguments.length,r=arguments[n-1],a=n>1?arguments[0]:null,s=n>2;if(r.constructor===Object?e=function(){}:(e=r.constructor,delete r.constructor),a&&((t=function(){}).prototype=a.prototype,e.prototype=new t,e.prototype.constructor=e,e.Super=a,o(e,a,!1)),s)for(var c=1;c<n-1;c++)o(e.prototype,arguments[c].prototype,!1);return i(e,r),e};var i=n.extendClass=function(e,t,n){t.STATIC&&(o(e,t.STATIC,n),delete t.STATIC),o(e.prototype,t,n)},o=function(e,t,n){var r;if(!1===n)for(r in t)r in e||(e[r]=t[r]);else{for(r in t)e[r]=t[r];t.toString!==Object.prototype.toString&&(e.toString=t.toString)}}}()},function(e,t,n){var r,i;r=[n(1),n(2),n(5)],void 0===(i=function(e,t,n){var r={windows:{chrome:[{screenWidth:1920,columns:267},{screenWidth:1080,columns:147}],firefox:[{screenWidth:1920,columns:271},{screenWidth:1080,columns:151}],opera:[{screenWidth:1920,columns:315},{screenWidth:1080,columns:175}],ie:[{screenWidth:1920,columns:270},{screenWidth:1080,columns:149}]},mac:{chrome:[{screenWidth:1280,columns:176},{screenWidth:1024,columns:139}],firefox:[{screenWidth:1280,columns:190},{screenWidth:1024,columns:151}],safari:[{screenWidth:1280,columns:135},{screenWidth:1024,columns:99}]}},i={chrome:" skinny.js:12345".length,firefox:"skinny.js?7211GG0 (line 12345)".length,opera:"skinny.js:12345".length,safari:"skinny.js:12345".length,ie:"LOG: ".length},o={ALL:{func:null,include:function(e){return/all/i.test(e)},exclude:null},ERROR:{func:"error",include:function(e){return/\+error/i.test(e)},exclude:function(e){return/\-error/i.test(e)}},WARN:{func:"warn",include:function(e){return/\+warn/i.test(e)},exclude:function(e){return/\-warn/i.test(e)}},INFO:{func:"info",include:function(e){return/\+info/i.test(e)},exclude:function(e){return/\-info/i.test(e)}},LOG:{func:"log",include:function(e){return/\+log/i.test(e)},exclude:function(e){return/\-log/i.test(e)}},DEBUG:{func:"debug",include:function(e){return/\+debug/i.test(e)},exclude:function(e){return/\-debug/i.test(e)}}},a=["debug","log","info","warn","error"],s=t.Class({STATIC:{TIME_FORMAT:"hh:mm:ss.SSSS"},constructor:function(){e.bindAll(this)},getCurrentLogLevel:function(){var t=this.controlLevel(),n=e(a).indexOf(t),r=n>=0?e(a).first(n):a;return["all"].concat(r.join("-")).join("-")},log:function(){this._log(arguments,o.LOG)},debug:function(){this._log(arguments,o.DEBUG)},info:function(){this._log(arguments,o.INFO)},warn:function(){this._log(arguments,o.WARN)},error:function(){this._log(arguments,o.ERROR)},isLevel:function(e){return new RegExp("level="+e,"i").test(window.location.search)},controlLevel:function(){var t=this;return e.find(a,function(e){return t.isLevel(e)})},_log:function(t,n){try{var r=new Date,i=("0"+r.getHours()).substr(-2)+":"+("0"+r.getMinutes()).substr(-2)+":"+("0"+r.getSeconds()).substr(-2)+"."+("000"+r.getMilliseconds()).substr(-4);if(t[0]="["+i+"]("+n.func.toUpperCase()+"): "+t[0],window.console&&window.console.log){window.location.search.match(/log=debug/);var a=this.getCurrentLogLevel();(o.ALL.include(a)&&!n.exclude(a)||n.include(a))&&("function"==typeof window.console[n.func]?window.console[n.func].apply(window.console,t):window.console[n.func](e(t).toArray().join(", ")))}}catch(e){console.log(e.stack)}},pluginLog:function(e,t,n,r){},check:function(e){var t=o[e.toUpperCase()],n=this.controlLevel();return!!t&&(o.ALL.include(n)&&!t.exclude(n)||t.include(n))},prepare:function(t,r,o,a){var c=e(a).toArray();t=t.toUpperCase();var u=(new moment).format(s.TIME_FORMAT);c[0]=u+" @ "+(t+"  ").substr(0,5)+" â™¦ "+c[0];var l="("+r+":"+("0000"+o).substr(-Math.max(String(o).length,3))+")";if(c.length>1)c.push(l);else{var f=c[0].length,d=Math.max(1,this.getConsoleColumns()-i[n.browser]-f-l.length-1);d=isNaN(d)?1:d;var p=new Array(d+1).join(" ");c[0]+=p+l}return c},getCurrentTime:function(e){var t=new Date,n="";switch(e){case"hh:mm:ss.SSSS":n=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds();break;default:console.error("Invalid time format passed for log formatting")}return n},getConsoleColumns:function(){var e,t,i=n.browser,o=n.os,a=r[o]&&r[o][i]?r[o][i]:0,s=window.innerWidth;return a?(e=(a[0].columns-a[1].columns)/(a[0].screenWidth-a[1].screenWidth),t=a[0].columns-e*a[0].screenWidth):(e=0,t=0),Math.floor(e*s+t)}});return new s}.apply(t,r))||(e.exports=i)},function(e,t,n){(function(t,n){
/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */
!function(t){"use strict";"function"==typeof bootstrap?bootstrap("promise",t):e.exports=t()}(function(){"use strict";var e=!1;try{throw new Error}catch(t){e=!!t.stack}var r,i=C(),o=function(){},a=function(){var e={task:void 0,next:null},r=e,i=!1,o=void 0,s=!1;function c(){for(;e.next;){var t=(e=e.next).task;e.task=void 0;var n=e.domain;n&&(e.domain=void 0,n.enter());try{t()}catch(e){if(s)throw n&&n.exit(),setTimeout(c,0),n&&n.enter(),e;setTimeout(function(){throw e},0)}n&&n.exit()}i=!1}if(a=function(e){r=r.next={task:e,domain:s&&t.domain,next:null},i||(i=!0,o())},void 0!==t&&t.nextTick)s=!0,o=function(){t.nextTick(c)};else if("function"==typeof n)o="undefined"!=typeof window?n.bind(window,c):function(){n(c)};else if("undefined"!=typeof MessageChannel){var u=new MessageChannel;u.port1.onmessage=function(){o=l,u.port1.onmessage=c,c()};var l=function(){u.port2.postMessage(0)};o=function(){setTimeout(c,0),l()}}else o=function(){setTimeout(c,0)};return a}(),s=Function.call;function c(e){return function(){return s.apply(e,arguments)}}var u,l=c(Array.prototype.slice),f=c(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),d=c(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),p=c(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,o,a){r.push(e.call(t,o,a,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},g=c(Object.prototype.hasOwnProperty),m=Object.keys||function(e){var t=[];for(var n in e)g(e,n)&&t.push(n);return t},v=c(Object.prototype.toString);u="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var y="From previous event:";function b(t,n){if(e&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(y)){for(var r=[],i=n;i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var o=r.join("\n"+y+"\n");t.stack=function(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var i=t[r];!S(i)&&-1===(o=i).indexOf("(module.js:")&&-1===o.indexOf("(node.js:")&&i&&n.push(i)}var o;return n.join("\n")}(o)}}function _(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function S(e){var t=_(e);if(!t)return!1;var n=t[0],o=t[1];return n===r&&o>=i&&o<=z}function C(){if(e)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=_(t[0].indexOf("@")>0?t[1]:t[2]);if(!n)return;return r=n[0],n[1]}}function w(e){return e instanceof k?e:M(e)?(t=e,n=T(),w.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(e){n.reject(e)}}),n.promise):U(e);var t,n}function T(){var t,n=[],r=[],i=h(T.prototype),o=h(k.prototype);if(o.promiseDispatch=function(e,i,o){var a=l(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):w.nextTick(function(){t.promiseDispatch.apply(t,a)})},o.valueOf=function(){if(n)return o;var e=R(t);return I(e)&&(t=e),e},o.inspect=function(){return t?t.inspect():{state:"pending"}},w.longStackSupport&&e)try{throw new Error}catch(e){o.stack=e.stack.substring(e.stack.indexOf("\n")+1)}function a(e){t=e,o.source=e,f(n,function(t,n){w.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}return i.promise=o,i.resolve=function(e){t||a(w(e))},i.fulfill=function(e){t||a(U(e))},i.reject=function(e){t||a(B(e))},i.notify=function(e){t||f(r,function(t,n){w.nextTick(function(){n(e)})},void 0)},i}function E(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=T();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function x(e){return E(function(t,n){for(var r=0,i=e.length;r<i;r++)w(e[r]).then(t,n)})}function k(e,t,n){void 0===t&&(t=function(e){return B(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=h(k.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=e[i]?e[i].apply(r,o):t.call(r,i,o)}catch(e){a=B(e)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function A(e,t,n,r){return w(e).then(t,n,r)}function R(e){if(I(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function I(e){return e instanceof k}function M(e){return(t=e)===Object(t)&&"function"==typeof e.then;var t}w.resolve=w,w.nextTick=a,w.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(w.longStackSupport=!0),w.defer=T,T.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(l(arguments,1)):e.resolve(n)}},w.Promise=E,w.promise=E,E.race=x,E.all=H,E.reject=B,E.resolve=w,w.passByCopy=function(e){return e},k.prototype.passByCopy=function(){return this},w.join=function(e,t){return w(e).join(t)},k.prototype.join=function(e){return w([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},w.race=x,k.prototype.race=function(){return this.then(w.race)},w.makePromise=k,k.prototype.toString=function(){return"[object Promise]"},k.prototype.then=function(e,t,n){var r=this,i=T(),o=!1;return w.nextTick(function(){r.promiseDispatch(function(t){o||(o=!0,i.resolve(function(t){try{return"function"==typeof e?e(t):t}catch(e){return B(e)}}(t)))},"when",[function(e){o||(o=!0,i.resolve(function(e){if("function"==typeof t){b(e,r);try{return t(e)}catch(e){return B(e)}}return B(e)}(e)))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=function(e){return"function"==typeof n?n(e):e}(e)}catch(e){if(r=!0,!w.onerror)throw e;w.onerror(e)}r||i.notify(t)}]),i.promise},w.tap=function(e,t){return w(e).tap(t)},k.prototype.tap=function(e){return e=w(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},w.when=A,k.prototype.thenResolve=function(e){return this.then(function(){return e})},w.thenResolve=function(e,t){return w(e).thenResolve(t)},k.prototype.thenReject=function(e){return this.then(function(){throw e})},w.thenReject=function(e,t){return w(e).thenReject(t)},w.nearer=R,w.isPromise=I,w.isPromiseAlike=M,w.isPending=function(e){return I(e)&&"pending"===e.inspect().state},k.prototype.isPending=function(){return"pending"===this.inspect().state},w.isFulfilled=function(e){return!I(e)||"fulfilled"===e.inspect().state},k.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},w.isRejected=function(e){return I(e)&&"rejected"===e.inspect().state},k.prototype.isRejected=function(){return"rejected"===this.inspect().state};var N,O,j,P=[],L=[],D=!0;function F(){P.length=0,L.length=0,D||(D=!0)}function B(e){var t=k({when:function(t){return t&&function(e){if(D){var t=d(L,e);-1!==t&&(L.splice(t,1),P.splice(t,1))}}(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return function(e,t){D&&(L.push(e),t&&void 0!==t.stack?P.push(t.stack):P.push("(no stack) "+t))}(t,e),t}function U(e){return k({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return m(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function V(e,t,n){return w(e).spread(t,n)}function q(e,t,n){return w(e).dispatch(t,n)}function H(e){return A(e,function(e){var t=0,n=T();return f(e,function(r,i,o){var a;I(i)&&"fulfilled"===(a=i.inspect()).state?e[o]=a.value:(++t,A(i,function(r){e[o]=r,0==--t&&n.resolve(e)},n.reject,function(e){n.notify({index:o,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function G(e){if(0===e.length)return w.resolve();var t=w.defer(),n=0;return f(e,function(r,i,o){var a=e[o];n++,A(a,function(e){t.resolve(e)},function(){0==--n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))},function(e){t.notify({index:o,value:e})})},void 0),t.promise}function W(e){return A(e,function(e){return e=p(e,w),A(H(p(e,function(e){return A(e,o,o)})),function(){return e})})}w.resetUnhandledRejections=F,w.getUnhandledReasons=function(){return P.slice()},w.stopUnhandledRejectionTracking=function(){F(),D=!1},F(),w.reject=B,w.fulfill=U,w.master=function(e){return k({isDef:function(){}},function(t,n){return q(e,t,n)},function(){return w(e).inspect()})},w.spread=V,k.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},w.async=function(e){return function(){function t(e,t){var o;if("undefined"==typeof StopIteration){try{o=n[e](t)}catch(e){return B(e)}return o.done?w(o.value):A(o.value,r,i)}try{o=n[e](t)}catch(e){return function(e){return"[object StopIteration]"===v(e)||e instanceof u}(e)?w(e.value):B(e)}return A(o,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}},w.spawn=function(e){w.done(w.async(e)())},w.return=function(e){throw new u(e)},w.promised=function(e){return function(){return V([this,H(arguments)],function(t,n){return e.apply(t,n)})}},w.dispatch=q,k.prototype.dispatch=function(e,t){var n=this,r=T();return w.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},w.get=function(e,t){return w(e).dispatch("get",[t])},k.prototype.get=function(e){return this.dispatch("get",[e])},w.set=function(e,t,n){return w(e).dispatch("set",[t,n])},k.prototype.set=function(e,t){return this.dispatch("set",[e,t])},w.del=w.delete=function(e,t){return w(e).dispatch("delete",[t])},k.prototype.del=k.prototype.delete=function(e){return this.dispatch("delete",[e])},w.mapply=w.post=function(e,t,n){return w(e).dispatch("post",[t,n])},k.prototype.mapply=k.prototype.post=function(e,t){return this.dispatch("post",[e,t])},w.send=w.mcall=w.invoke=function(e,t){return w(e).dispatch("post",[t,l(arguments,2)])},k.prototype.send=k.prototype.mcall=k.prototype.invoke=function(e){return this.dispatch("post",[e,l(arguments,1)])},w.fapply=function(e,t){return w(e).dispatch("apply",[void 0,t])},k.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},w.try=w.fcall=function(e){return w(e).dispatch("apply",[void 0,l(arguments,1)])},k.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])},w.fbind=function(e){var t=w(e),n=l(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(l(arguments))])}},k.prototype.fbind=function(){var e=this,t=l(arguments);return function(){return e.dispatch("apply",[this,t.concat(l(arguments))])}},w.keys=function(e){return w(e).dispatch("keys",[])},k.prototype.keys=function(){return this.dispatch("keys",[])},w.all=H,k.prototype.all=function(){return H(this)},w.any=G,k.prototype.any=function(){return G(this)},w.allResolved=(N=W,O="allResolved",j="allSettled",function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(O+" is deprecated, use "+j+" instead.",new Error("").stack),N.apply(N,arguments)}),k.prototype.allResolved=function(){return W(this)},w.allSettled=function(e){return w(e).allSettled()},k.prototype.allSettled=function(){return this.then(function(e){return H(p(e,function(e){function t(){return e.inspect()}return(e=w(e)).then(t,t)}))})},w.fail=w.catch=function(e,t){return w(e).then(void 0,t)},k.prototype.fail=k.prototype.catch=function(e){return this.then(void 0,e)},w.progress=function(e,t){return w(e).then(void 0,void 0,t)},k.prototype.progress=function(e){return this.then(void 0,void 0,e)},w.fin=w.finally=function(e,t){return w(e).finally(t)},k.prototype.fin=k.prototype.finally=function(e){return e=w(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},w.done=function(e,t,n,r){return w(e).done(t,n,r)},k.prototype.done=function(e,n,r){var i=function(e){w.nextTick(function(){if(b(e,o),!w.onerror)throw e;w.onerror(e)})},o=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(i=t.domain.bind(i)),o.then(void 0,i)},w.timeout=function(e,t,n){return w(e).timeout(t,n)},k.prototype.timeout=function(e,t){var n=T(),r=setTimeout(function(){t&&"string"!=typeof t||((t=new Error(t||"Timed out after "+e+" ms")).code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},w.delay=function(e,t){return void 0===t&&(t=e,e=void 0),w(e).delay(t)},k.prototype.delay=function(e){return this.then(function(t){var n=T();return setTimeout(function(){n.resolve(t)},e),n.promise})},w.nfapply=function(e,t){return w(e).nfapply(t)},k.prototype.nfapply=function(e){var t=T(),n=l(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},w.nfcall=function(e){var t=l(arguments,1);return w(e).nfapply(t)},k.prototype.nfcall=function(){var e=l(arguments),t=T();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},w.nfbind=w.denodeify=function(e){var t=l(arguments,1);return function(){var n=t.concat(l(arguments)),r=T();return n.push(r.makeNodeResolver()),w(e).fapply(n).fail(r.reject),r.promise}},k.prototype.nfbind=k.prototype.denodeify=function(){var e=l(arguments);return e.unshift(this),w.denodeify.apply(void 0,e)},w.nbind=function(e,t){var n=l(arguments,2);return function(){var r=n.concat(l(arguments)),i=T();return r.push(i.makeNodeResolver()),w(function(){return e.apply(t,arguments)}).fapply(r).fail(i.reject),i.promise}},k.prototype.nbind=function(){var e=l(arguments,0);return e.unshift(this),w.nbind.apply(void 0,e)},w.nmapply=w.npost=function(e,t,n){return w(e).npost(t,n)},k.prototype.nmapply=k.prototype.npost=function(e,t){var n=l(t||[]),r=T();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},w.nsend=w.nmcall=w.ninvoke=function(e,t){var n=l(arguments,2),r=T();return n.push(r.makeNodeResolver()),w(e).dispatch("post",[t,n]).fail(r.reject),r.promise},k.prototype.nsend=k.prototype.nmcall=k.prototype.ninvoke=function(e){var t=l(arguments,1),n=T();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},w.nodeify=function(e,t){return w(e).nodeify(t)},k.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){w.nextTick(function(){e(null,t)})},function(t){w.nextTick(function(){e(t)})})};var z=C();return w})}).call(this,n(16),n(17).setImmediate)},function(e,t,n){var r;void 0===(r=function(e){return new function(e){e=e||window.navigator.userAgent,this.browser=null,this.os=null,this.osVersion=null,this.version=null,this.majorVersion=null,this.instructionSet="x86",this.device="workstation",this.cookies=!1;var t={mac:{is:function(e){return/macintosh/i.test(e)},getVersion:function(e){return/Mac OS X ([\d_\.]+)[;\)]/i.exec(e)[1].replace(/_/g,".")}},windows:{is:function(e){return/windows/i.test(e)},getVersion:function(e){return/windows.*?([\d\.]+?)[;\)]/i.exec(e)[1]}},solaris:{is:function(e){return/sunos/i.test(e)},getVersion:function(e){return"0"}},bsd:{is:function(e){return/bsd/i.test(e)},getVersion:function(e){return 0}},linux:{is:function(e){return/linux/i.test(e)},getVersion:function(e){return"0"}}},n={firefox:{is:function(e){return/firefox/i.test(e)},getVersion:function(e){return/firefox\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},chrome:{is:function(e){return/chrome\//i.test(e)&&!n.edge.is(e)&&!n.opera.is(e)},getVersion:function(e){return/chrome\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},safari:{is:function(e){return/safari/i.test(e)&&!n.chrome.is(e)&&!n.edge.is(e)&&!n.opera.is(e)},getVersion:function(e){return/version\/(.+?)(?:\s|$)/i.exec(e)?/version\/(.+?)(?:\s|$)/i.exec(e)[1]:"6.0"},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},ie:{is:function(e){return/msie|Trident/i.test(e)},getVersion:function(e){return-1!=e.indexOf("Trident")?parseFloat(/Trident\/(.+?)[\);]/i.exec(e)[1])+4+".0":/msie (.+?);/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]},getInstructionSet:function(e){return/x64;/i.test(e)?"x86-64":"x86"}},opera:{is:function(e){return/(Opera|OPR)\/(\d+(\.\d+)?)/i.test(e)},getVersion:function(e){return/OPR\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}},edge:{is:function(e){return/Edge/i.test(e)},getVersion:function(e){return/Edge\/(.+?)(?:\s|$)/i.exec(e)[1]},getMajorVersion:function(e){return/\d+/i.exec(e)[0]}}},r={ipad:{is:function(e){return/ipad/i.test(e)}},ipod:{is:function(e){return/ipod/i.test(e)}},iphone:{is:function(e){return/iphone/i.test(e)}},android:{is:function(e){return/android/i.test(e)}}};for(var i in r)if(r[i].is(e)){this.device=i;break}for(var o in t){var a=t[o];if(a.is(e)){this.os=o,this.osVersion=a.getVersion(e);break}}for(var s in n){var c=n[s];if(c.is(e)){this.browser=s,this.version=c.getVersion(e),this.majorVersion=c.getMajorVersion(this.version),c.getInstructionSet&&(this.instructionSet=c.getInstructionSet(e));break}}this.cookies=window.navigator.cookieEnabled}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){var t=n(2);return n(3),new(t.Class({constructor:function(e){this.BJ_CALLSTATES={IDLE:"idle",INITIALISING:"initialising",CONNECTING:"connecting",STARTING_MEDIA:"starting-media",CONNECTED:"connected",RESTART_MEDIA:"restart-media",REINITIALISING:"re-initialising",RECONNECTING:"reconnecting",DISCONNECTED:"disconnected"},this.WEBRTC_STATES={iceGatheringState:{NEW:"new",GATHERING:"gathering",COMPLETE:"complete"},iceConnectionState:{NEW:"new",CHECKING:"checking",CONNECTED:"connected",COMPLETED:"completed",FAILED:"failed",DISCONNECTED:"disconnected",CLOSED:"closed"},signalingState:{STABLE:"stable",HAVE_LOCAL_OFFER:"have-local-offer",HAVE_REMOTE_OFFER:"have-remote-offer",HAVE_LOCAL_PRANSWER:"have-local-pranswer",HAVE_REMOTE_PRANSWER:"have-remote-pranswer",CLOSED:"closed"}},this.STATE_EVENTS={INITIALISE:"initialise",CONNECT:"connect",START_MEDIA:"startMedia",ESTABLISH_CONNECTION:"establishConnection",MEDIA_DISRUPTION:"mediaDisruption",DISCONNECT:"disconnect",RESET:"reset"},this.TRANSACTION_STATES={INIT:"init",RESEND:"resend",FAILED:"failed",FINISHED:"finished",ERROR:"error"},this.EXTENSION_STATES={NOT_INSTALLED:"not_installed",INSTALLING:"installing",BG_SCRIPTS_INJECTED:"background_scripts_injected",INSTALLED:"installed",IFRAME_INSTALL_FAILED:"iframe_install_failed",INSTALL_FAILED_DOMAIN_UNVERIFIED:"install_failed_domain_not_verified",INSTALL_FAILED:"install_failed",INSTALL_CANCELLED:"install_cancelled",REQUEST_FAILED:"request_failed"},this.WS_STATES={CONNECTED:"connected",RECONNECTED:"reconnected",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"},this.WS_STATES={CONNECTED:"connected",RECONNECTED:"reconnected",DISCONNECTED:"disconnected",FAILED:"failed",CLOSED:"closed"}},addWebrtcStatePrefix:function(e,t){var n={};return _.forEach(t,function(t,r){n[r]=e+t}),n}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){var t=n(2),r=n(1),i=(n(3),t.Class({STATIC:{MESSAGE_BASE:{bluejay:"1.0"}},constructor:function(e){this.messageId=0,this.METHODS={CONNECT:"connect",UPDATE:"update",ANSWER:"answer",DISCONNECT:"disconnect",KEEPALIVE:"keepalive",CANDIDATE:"candidate",MUTE:"mute",TOKEN:"token",INFO:"info",ICE:"ice"},this.TOKEN_TYPES={STATUS:"status",RELEASE:"release",TOKENINDICATION:"tokenindication",CONTENTINDICATION:"contentindication"},this.TOKEN_STATUS={GRANTED:"granted",DENIED:"denied",REVOKED:"revoked",RELEASED:"released",WAITING:"waiting_user_confirmation",CANCELLED:"cancelled"}},generateMsgId:function(){return++this.messageId},setCallid:function(e){this.callId=e},getCallId:function(){return this.callId},getRequestMessage:function(e){return r.extend({},i.MESSAGE_BASE,{call:this.callId,id:this.generateMsgId()},e)},getConnectMessage:function(e){return this.getRequestMessage({method:"connect",params:e})},getUpdateMessage:function(e){return this.getRequestMessage({method:"update",params:e})},getMuteMessage:function(e){return this.getRequestMessage({method:"mute",params:e})},requestTokenMsg:function(){return this.getRequestMessage({method:"token",params:{type:"request"}})},releaseTokenMsg:function(){return this.getRequestMessage({method:"token",params:{type:"release"}})},getIceCandidateMessage:function(e){return this.getRequestMessage({method:"ice",params:{iceCandidate:e}})},getInfoMsg:function(e){return this.getRequestMessage({method:"info",params:e})},getKeepaliveMessage:function(){return this.getRequestMessage({method:"keepalive",params:{}})},getDisconnectMessage:function(e){return this.getRequestMessage({method:"disconnect",params:e})},getSuccessResponse:function(e){return r.extend({},i.MESSAGE_BASE,{id:e,call:this.callId,result:"null"})},getErrorResponse:function(e,t){return r.extend({},i.MESSAGE_BASE,{id:e,call:this.callId,error:t})}}));return new i}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e){var t=n(2),r=n(3);return n(4),new(t.Class({constructor:function(e){this.SIGNALING_ERRORS={BAD_REQUEST:{code:"400",message:"Bad Request"},DOESNOT_EXIST:{code:"481",message:"Call Does Not Exists"},NOT_ALLOWED:{code:"405",message:"Method Not Allowed"},METHOD_NOT_IMPLEMENTED:{code:"501",message:"Method Not Implemented"}},this.DISCONNECT_REASONS={REQ_TIMED_OUT:{code:"408",message:"Request Timeout"},TRANSPORT_FAIL:{code:"500",message:"Server Internal Error"},KEEPALIVE_TIMEOUT:{code:"450",message:"Keep Alive Timeout"},USER_INITIATED:{code:"200",message:"User Action"},NODE_DRAIN:{code:"302",message:"Node Draining"},SERVICE_UNAVAILABLE:{code:"503",message:"Service Unavailable"},ICE_CONNECTION_FAILED:{code:"520",message:"Ice Connection Failed"},ICE_GATHERING_FAILED:{code:"521",message:"Ice Gathering Failed"},SIG_CHANNEL_CLOSED:{code:"522",message:"Signaling Channel Closed"}},this.GET_LOCAL_MEDIA_STATES={AVAILABLE:{code:200,message:"Requested devices are available",details:""},DEVICES_NOT_FOUND:{code:404,message:"Requested devices were not found",details:""},PERMISSION_DENIED:{code:401,message:"User denied access to local device streams",details:""},SOURCE_UNAVAILABLE:{code:423,message:"Device is unavailable, maybe locked by another process",details:""},NOT_READABLE:{code:409,message:"Device source in use",details:""},EXCEPTION:{code:500,message:"Unknown error",details:""}},this.SCREEN_SHARING_STATES={STARTED:{code:200,message:"Screen Sharing has started",details:""},INSTALL_EXTENSION_FAILED:{code:421,message:"Chrome Extension installation failed",details:""},GET_TOKEN_FAILED:{code:408,message:"Token request timed out",details:""},GET_SCREEN_MEDIA_FAILED:{code:400,message:"Failed to get screen media stream",details:""},EXCEPTION:{code:500,message:"Unknown error",details:""},STOPPED:{code:204,message:"Screen Sharing has stopped",details:""}},this.PEER_CONNECTION_ERRORS={PC_CLOSED:{code:410,message:"Peer Connection is closed, request cannot be processed",details:""}}},translateGetUserMediaError:function(e){var t={},n=this.GET_LOCAL_MEDIA_STATES;switch(e.name){case"DevicesNotFoundError":t=n.DEVICES_NOT_FOUND;break;case"PermissionDeniedError":t=n.PERMISSION_DENIED;break;case"SourceUnavailableError":t=n.SOURCE_UNAVAILABLE;break;case"NotReadableError":t=n.NOT_READABLE;break;default:r.warn("Unhandled error in getUserMedia: ",e),t=n.EXCEPTION}return t.details=e,t},detectCameraStatus:function(e){var t;return e&&"function"==typeof e.getVideoTracks?(t=e.getVideoTracks()[0])?"ended"===t.readyState?(r.warn("RTCErrors: Camera feed is unavailable, faulty camera or its in use by another program"),this.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE):this.GET_LOCAL_MEDIA_STATES.AVAILABLE:(r.warn("RTCErrors: No video tracks available in the stream, triggering camera unavailable state"),this.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE):this.GET_LOCAL_MEDIA_STATES.DEVICES_NOT_FOUND}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(0),o=n(3),a=n(63),s=n(6),c=i.Model.extend({defaults:{currentState:"",prevState:[],iceConnectionState:"",iceGatheringState:"",signalingState:"",disconnectCode:"",disconnectReason:""},setCurrentState:function(e){var t=this.get("currentState"),n=this.get("prevState");e!==t&&(n.push(t),this.set("currentState",e)),this.logStateTransition()},logStateTransition:function(){o.debug("RTCStateManager: Call State: "+this.get("currentState")+", Ice-Gathering: "+this.get("iceGatheringState")+", Ice-Connection: "+this.get("iceConnectionState")+", Signaling: "+this.get("signalingState"))},getCurrentState:function(){return this.get("currentState")},getPreviousState:function(){return this.get("prevState")},getDisconnectReason:function(){return this.get("disconnectReason")}}),u=t.Class({STATIC:{BJ_CALLSTATES:s.BJ_CALLSTATES,ICE_G_STATES:s.addWebrtcStatePrefix("iceG_",s.WEBRTC_STATES.iceGatheringState),ICE_C_STATES:s.addWebrtcStatePrefix("ice_",s.WEBRTC_STATES.iceConnectionState),SIG_STATES:s.addWebrtcStatePrefix("sig_",s.WEBRTC_STATES.signalingState),STATE_EVTS:s.STATE_EVENTS},constructor:function(e){r.bindAll(this),r.extend(this,i.Events),this.model=new c,this.stateMachine=this.initStateMachine()},initStateMachine:function(){var e=a.transitions.transition,t=a.triggers.anyOf,n=a.triggers.allOf,i=u.BJ_CALLSTATES,o=u.ICE_C_STATES,s=u.ICE_G_STATES,c=u.SIG_STATES,l=u.STATE_EVTS,f=function(e){this.callStateChange(e)}.bind(this);return a.create({initial:i.IDLE,events:{initialise:e([{from:i.IDLE,to:i.INITIALISING},{from:i.RESTART_MEDIA,to:i.REINITIALISING}]),connect:e([{from:i.INITIALISING,to:i.CONNECTING},{from:i.REINITIALISING,to:i.RECONNECTING}]),startMedia:e([{from:i.CONNECTING,to:i.STARTING_MEDIA},{from:i.RECONNECTING,to:i.STARTING_MEDIA}]),establishConnection:e([{from:i.STARTING_MEDIA,to:i.CONNECTED},{from:i.RESTART_MEDIA,to:i.CONNECTED}]),mediaDisruption:e({from:i.CONNECTED,to:i.RESTART_MEDIA,resetTriggers:!0}),disconnect:e({from:r.without(r.values(i),i.DISCONNECTED),to:i.DISCONNECTED,resetTriggers:!0}),reset:e({from:r.without(r.values(i),i.IDLE),to:i.IDLE,resetTriggers:!0})},triggers:[{event:l.INITIALISE,activatedBy:n([c.HAVE_LOCAL_OFFER])},{event:l.CONNECT,activatedBy:t([s.GATHERING,s.COMPLETE])},{event:l.START_MEDIA,activatedBy:n([c.STABLE])},{event:l.ESTABLISH_CONNECTION,activatedBy:t([o.COMPLETED,o.CONNECTED])},{event:l.MEDIA_DISRUPTION,activatedBy:n([o.DISCONNECTED])},{event:l.DISCONNECT,activatedBy:n([o.FAILED,o.CLOSED])}],callbacks:[a.transitions.afterTransition({},f)]})},iceGatheringStateChange:function(e){this.model.set("iceGatheringState",e),this.stateMachine.trigger("iceG_"+e)},signalingStateChange:function(e){this.model.set("signalingState",e),this.stateMachine.trigger("sig_"+e)},iceConnectionStateChange:function(e){this.model.set("iceConnectionState",e),this.stateMachine.trigger("ice_"+e)},callDisconnected:function(e){this.stateMachine.disconnect(),this._updateDisconnectState(e),this.model.setCurrentState(this.stateMachine.getState())},_updateDisconnectState:function(e){var t=e&&e.code||"",n=e&&e.message||"";t&&(t="string"==typeof t?parseInt(t,10):t,this.model.set({disconnectCode:t,disconnectReason:{code:t,message:n}}))},getCurrentCallState:function(){return this.model.getCurrentState()},getDisconnectReason:function(){return this.model.getDisconnectReason()},callStateChange:function(e){"disconnected"!==e.to&&this.model.setCurrentState(e.to)},reset:function(){this.stateMachine.reset(),this.model.setCurrentState(this.stateMachine.getState())}});return new u}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;void 0===(r=function(e){n(15);var t=n(4),r=n(2),i=n(1),o=n(3);return new(r.Class({constructor:function(){},promiseDecorator:function(e){return function(){var n=t.defer();return e.apply(this,arguments),n.resolve(),n.promise}},deepMergeObjects:function(e,t){var n=i.keys(e),r=i.keys(t),o=i.extend({},e),a=Object.prototype.toString;return i.each(r,function(r,s,c){if(-1===i.indexOf(n,r))o[r]=t[r];else{var u=e[r],l=t[r];a.call(u)!==a.call(l)?o[r]=t[r]:"[object Object]"===a.call(u)?o[r]=this.deepMergeObjects(u,l):"[object Array]"===a.call(u)?o[r]=this.deepMergeArrays(u,l):o[r]=t[r]}},this),o},deepMergeArrays:function(e,t){var n=e,r=Object.prototype.toString;return i.each(t,function(t,o,a){if("[object Object]"!==r.call(t))n.push(t);else{var s,c,u=!1;c=i.keys(t),i.each(e,function(e,o,a){"[object Object]"===r.call(e)&&(s=i.keys(e),i.difference(s,c).length||(n[o]=this.deepMergeObjects(e,t),u=!0))},this),u||n.push(t)}},this),n},getLocalStreamType:function(e){var t;switch(e.bjn_label){case"local_audio_stream":t="localAudioStream";break;case"local_video_stream":t="localVideoStream";break;case"preview_stream":t="previewStream";break;case"content_stream":t="localContentStream";break;case"fake_stream":t="fakeStream";break;default:o.error("RTCUtils: Unknown stream type. Stream label: "+e.bjn_label)}return t},getRemoteStreamType:function(e){return"stream_label"===e.id?"remoteStream":"remoteContentStream"}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=(n(4),n(0)),o=n(64),a=n(7),s=(n(6),n(3));return n(10),new(t.Class({config:{requestTimeout:5e3,keepaliveTimeout:1e4,maxRetransmitAttempts:3},STATIC:{METHODS:a.METHODS},constructor:function(){r.bindAll(this),r.extend(this,i.Events),this.model=new o,this.requestTimers={}},onRequest:function(e){var t=this;this.requestTimers[e]=setInterval(function(){t.onRequestTimeout(e)},this.config.requestTimeout)},onBlueJayRequest:function(e){switch(this.model.addRequest(e.id,{method:e.method,message:e,state:"init",retransmitAttempts:0}),e.method){case a.METHODS.MUTE:var t=this.model.getMuteMessage();r.isUndefined(t)||this.removeRequestTransaction(t),this.model.addMuteMessage(e.id);break;case a.METHODS.TOKEN:var n=this.model.getTokenMessage();r.isUndefined(n)||this.removeRequestTransaction(n),this.model.addTokenMessage(e.id)}this.onRequest(e.id)},removeRequestTransaction:function(e){r.isUndefined(this.requestTimers[e])||(clearInterval(this.requestTimers[e]),delete this.requestTimers[e]),this.model.removeRequest(e)},onOutgoingBlueJayResponse:function(e,t){this.model.addResponse(e,{response:t})},onIncomingBlueJayResponse:function(e){var t=this.model.getRequest(e);if(r.isUndefined(t))this.model.get("bluejayKeepAlive").messageId==e&&this.model.addKeepAlive({messageId:e,state:"finished"});else switch(this.removeRequestTransaction(e),t.method){case a.METHODS.CONNECT:this.model.set("connectResponseReceived",!0),this.trigger("receivedConnectResponse");break;case a.METHODS.DISCONNECT:this.trigger("closeSocketConnection")}},lookupOutgoingResponse:function(e){return this.model.getResponse(e)},onKeepaliveRequest:function(e){this.model.addKeepAlive({messageId:e,state:"init"})},getKeepaliveMessageState:function(){return this.model.get("bluejayKeepAlive").state},onRequestTimeout:function(e){var t=this.model.getRequest(e);if(t.method===a.METHODS.DISCONNECT)return this.removeRequestTransaction(e),void this.trigger("closeSocketConnection");if(!r.isUndefined(t))switch(t.state){case"init":case"resend":this.retransmitRequest(t,e)}},retransmitRequest:function(e,t){e.retransmitAttempts>=this.config.maxRetransmitAttempts?(s.warn("RTCTransactionManager: Request timeout occured for - Method :"+e.method+" :: Id - "+t),this.removeRequestTransaction(t),this.trigger("requestTimeout",{messageId:t,method:e.method})):(e.state="resend",e.retransmitAttempts++,this.trigger("retransmitRequest",e.message),this.model.addRequest(t,e))},getRequestMessage:function(e){return this.model.getRequest(e).message},updateCallState:function(e){this.model.set("callState",e)},reset:function(){r.each(this.requestTimers,function(e){clearInterval(e)}),this.model.resetTransaction(),this.model.set("connectResponseReceived",!1)}}))}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(3),o=n(67),a=(n(7),n(66)),s=n(6),c=n(0);return new(t.Class({STATIC:{MESSAGE_BASE:{bluejay:"1.0"}},config:{callId:null,sockUrl:null,socketId:null,socketioOpts:{reconnectionAttempts:15,reconnectionDelay:2e3,reconnectionDelayMax:2500,timeout:2e3,forceNew:!0}},constructor:function(e){r.bindAll(this),r.extend(this.config,e),r.extend(this,c.Events),this.isConnected=!1,this.WS_STATES=s.WS_STATES},createSocket:function(e){this.socket=o.connect(e.sockUrl,this.config.socketioOpts),this.setupListeners()},setupListeners:function(){this.socket.on("message",this.handleMessage),this.socket.on("connect",this.socketConnected),this.socket.on("error",this.socketError),this.socket.on("disconnect",this.socketDisconnect),this.socket.on("reconnecting",this.socketReconnecting),this.socket.on("reconnect_failed",this.socketReconnectFailed),this.socket.on("reconnect",this.socketReconnect),this.socket.on("connect_error",this.onConnectError)},setupMessageParser:function(e){this.messageParser=new a({callbacks:e})},handleMessage:function(e){i.debug("RTCSignallingManager: Received message on socket: "+e),this.messageParser.parseIncomingMessage(e)},socketConnected:function(){this.isConnected=!0,this.config.socketId=this.socket.id,this.trigger("wsConnectionStateChange",this.WS_STATES.CONNECTED,this.socket.id),i.debug("RTCSignallingManager: Socket connected successfully")},socketError:function(e){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.DISCONNECTED,this.config.socketId),i.error("RTCSignallingManager: Received 'error' message on socket")},socketDisconnect:function(e){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.DISCONNECTED,this.config.socketId),"io client disconnect"===e?i.debug("RTCSignallingManager: Socket disconnected, initiated by client: ",e):i.error("RTCSignallingManager: Socket disconnected, not initiated by client: ",e)},socketReconnecting:function(e){this.isConnected=!1,i.debug("RTCSignallingManager: Reconnecting socket, reconnect attempt ",e)},socketReconnectFailed:function(){this.isConnected=!1,this.trigger("wsConnectionStateChange",this.WS_STATES.FAILED,this.config.socketId),i.debug("RTCSignallingManager: Socket reconnection failed")},socketReconnect:function(){i.debug("RTCSignallingManager: Socket reconnected"),this.isConnected=!0,this.config.socketId=this.socket.id,this.trigger("wsConnectionStateChange",this.WS_STATES.RECONNECTED,this.socket.id)},onConnectError:function(e){i.debug("RTCSignallingManager :: connect error : "+e)},sendMsg:function(e){return r.isNull(e.call)||r.isUndefined(e.call)?(i.warn("RTCSignallingManager: Invalid BlueJay message, 'call' field is missing"),!1):e.id?this.isConnected?(this.socket.emit("message",JSON.stringify(e)),i.debug("RTCSignallingManager: Sending socket message: "+JSON.stringify(e)),!0):(i.warn("RTCSignallingManager: Socket is not connected, Message :: "+JSON.stringify(e)),!1):(i.warn("RTCSignallingManager: Invalid BlueJay message, 'id' field is missing"),!1)},close:function(){this.socket?(this.isConnected=!1,this.socket.disconnect(),this.socket=null):i.warn("RTCSignallingManager: Socket has already been closed.")}}))}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */
/*!
 * jQuery JavaScript Library v1.8.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Sep 20 2012 21:13:05 GMT-0400 (Eastern Daylight Time)
 */!function(i,o){var a,s,c=i.document,u=i.location,l=i.navigator,f=i.jQuery,d=i.$,p=Array.prototype.push,h=Array.prototype.slice,g=Array.prototype.indexOf,m=Object.prototype.toString,v=Object.prototype.hasOwnProperty,y=String.prototype.trim,b=function(e,t){return new b.fn.init(e,t,a)},_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,S=/\S/,C=/\s+/,w=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,x=/^[\],:{}\s]*$/,k=/(?:^|:|,)(?:\s*\[)+/g,A=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,R=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,I=/^-ms-/,M=/-([\da-z])/gi,N=function(e,t){return(t+"").toUpperCase()},O=function(){c.addEventListener?(c.removeEventListener("DOMContentLoaded",O,!1),b.ready()):"complete"===c.readyState&&(c.detachEvent("onreadystatechange",O),b.ready())},j={};b.fn=b.prototype={constructor:b,init:function(e,t,n){var r,i,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1])return a=(t=t instanceof b?t[0]:t)&&t.nodeType?t.ownerDocument||t:c,e=b.parseHTML(r[1],a,!0),E.test(r[1])&&b.isPlainObject(t)&&this.attr.call(e,t,!0),b.merge(this,e);if((i=c.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return n.find(e);this.length=1,this[0]=i}return this.context=c,this.selector=e,this}return b.isFunction(e)?n.ready(e):(e.selector!==o&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=b.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},eq:function(e){return-1==(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(h.apply(this,arguments),"slice",h.call(arguments).join(","))},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,t,n,r,i,a,s=arguments[0]||{},c=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},c=2),"object"==typeof s||b.isFunction(s)||(s={}),u===c&&(s=this,--c);c<u;c++)if(null!=(e=arguments[c]))for(t in e)n=s[t],s!==(r=e[t])&&(l&&r&&(b.isPlainObject(r)||(i=b.isArray(r)))?(i?(i=!1,a=n&&b.isArray(n)?n:[]):a=n&&b.isPlainObject(n)?n:{},s[t]=b.extend(l,a,r)):r!==o&&(s[t]=r));return s},b.extend({noConflict:function(e){return i.$===b&&(i.$=d),e&&i.jQuery===b&&(i.jQuery=f),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(!0===e?!--b.readyWait:!b.isReady){if(!c.body)return setTimeout(b.ready,1);b.isReady=!0,!0!==e&&--b.readyWait>0||(s.resolveWith(c,[b]),b.fn.trigger&&b(c).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):j[m.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return t===o||v.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||c,(r=E.exec(e))?[t.createElement(r[1])]:(r=b.buildFragment([e],t,n?null:[]),b.merge([],(r.cacheable?b.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=b.trim(e),i.JSON&&i.JSON.parse?i.JSON.parse(e):x.test(e.replace(A,"@").replace(R,"]").replace(k,""))?new Function("return "+e)():void b.error("Invalid JSON: "+e)):null},parseXML:function(e){var t;if(!e||"string"!=typeof e)return null;try{i.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=o}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&S.test(e)&&(i.execScript||function(e){i.eval.call(i,e)})(e)},camelCase:function(e){return e.replace(I,"ms-").replace(M,N)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,a=e.length,s=a===o||b.isFunction(e);if(n)if(s){for(r in e)if(!1===t.apply(e[r],n))break}else for(;i<a&&!1!==t.apply(e[i++],n););else if(s){for(r in e)if(!1===t.call(e[r],r,e[r]))break}else for(;i<a&&!1!==t.call(e[i],i,e[i++]););return e},trim:y&&!y.call("\ufeffÂ ")?function(e){return null==e?"":y.call(e)}:function(e){return null==e?"":(e+"").replace(w,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=b.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||b.isWindow(e)?p.call(r,e):b.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;t[i]!==o;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i=0,o=e.length;for(n=!!n;i<o;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=[],s=0,c=e.length;if(e instanceof b||c!==o&&"number"==typeof c&&(c>0&&e[0]&&e[c-1]||0===c||b.isArray(e)))for(;s<c;s++)null!=(r=t(e[s],s,n))&&(a[a.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(a[a.length]=r);return a.concat.apply([],a)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),b.isFunction(e)?(r=h.call(arguments,2),(i=function(){return e.apply(t,r.concat(h.call(arguments)))}).guid=e.guid=e.guid||b.guid++,i):o},access:function(e,t,n,r,i,a,s){var c,u=null==n,l=0,f=e.length;if(n&&"object"==typeof n){for(l in n)b.access(e,t,l,n[l],1,a,r);i=1}else if(r!==o){if(c=s===o&&b.isFunction(r),u&&(c?(c=t,t=function(e,t,n){return c.call(b(e),n)}):(t.call(e,r),t=null)),t)for(;l<f;l++)t(e[l],n,c?r.call(e[l],l,t(e[l],n)):r,s);i=1}return i?e:u?t.call(e):f?t(e[0],n):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(e){if(!s)if(s=b.Deferred(),"complete"===c.readyState)setTimeout(b.ready,1);else if(c.addEventListener)c.addEventListener("DOMContentLoaded",O,!1),i.addEventListener("load",b.ready,!1);else{c.attachEvent("onreadystatechange",O),i.attachEvent("onload",b.ready);var t=!1;try{t=null==i.frameElement&&c.documentElement}catch(e){}t&&t.doScroll&&function e(){if(!b.isReady){try{t.doScroll("left")}catch(t){return setTimeout(e,50)}b.ready()}}()}return s.promise(e)},b.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){j["[object "+t+"]"]=t.toLowerCase()}),a=b(c);var P={};b.Callbacks=function(e){var t,n,r,i,a,s,c=[],u=!(e="string"==typeof e?P[e]||function(e){var t=P[e]={};return b.each(e.split(C),function(e,n){t[n]=!0}),t}(e):b.extend({},e)).once&&[],l=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,a=c.length,r=!0;c&&s<a;s++)if(!1===c[s].apply(o[0],o[1])&&e.stopOnFalse){t=!1;break}r=!1,c&&(u?u.length&&l(u.shift()):t?c=[]:f.disable())},f={add:function(){if(c){var n=c.length;!function t(n){b.each(n,function(n,r){var i=b.type(r);"function"!==i||e.unique&&f.has(r)?r&&r.length&&"string"!==i&&t(r):c.push(r)})}(arguments),r?a=c.length:t&&(i=n,l(t))}return this},remove:function(){return c&&b.each(arguments,function(e,t){for(var n;(n=b.inArray(t,c,n))>-1;)c.splice(n,1),r&&(n<=a&&a--,n<=s&&s--)}),this},has:function(e){return b.inArray(e,c)>-1},empty:function(){return c=[],this},disable:function(){return c=u=t=o,this},disabled:function(){return!c},lock:function(){return u=o,t||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],!c||n&&!u||(r?u.push(t):l(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,r){var o=r[0],a=e[t];i[r[1]](b.isFunction(a)?function(){var e=a.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n:this,[e])}:n[o])}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=a.fire,i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=h.call(arguments),a=o.length,s=1!==a||e&&b.isFunction(e.promise)?a:0,c=1===s?e:b.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?h.call(arguments):i,r===t?c.notifyWith(n,r):--s||c.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);i<a;i++)o[i]&&b.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(c.reject).progress(u(i,n,t)):--s;return s||c.resolveWith(r,o),c.promise()}}),b.support=function(){var e,t,n,r,o,a,s,u,l,f,d,p=c.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=p.getElementsByTagName("*"),(n=p.getElementsByTagName("a")[0]).style.cssText="top:1px;float:left;opacity:.5",!t||!t.length)return{};o=(r=c.createElement("select")).appendChild(c.createElement("option")),a=p.getElementsByTagName("input")[0],e={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:o.selected,getSetAttribute:"t"!==p.className,enctype:!!c.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==c.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===c.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,e.noCloneChecked=a.cloneNode(!0).checked,r.disabled=!0,e.optDisabled=!o.disabled;try{delete p.test}catch(t){e.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",d=function(){e.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",d)),(a=c.createElement("input")).value="t",a.setAttribute("type","radio"),e.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),p.appendChild(a),(s=c.createDocumentFragment()).appendChild(p.lastChild),e.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=a.checked,s.removeChild(a),s.appendChild(p),p.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})(f=(u="on"+l)in p)||(p.setAttribute(u,"return;"),f="function"==typeof p[u]),e[l+"Bubbles"]=f;return b(function(){var t,n,r,o,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=c.getElementsByTagName("body")[0];s&&((t=c.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(t,s.firstChild),n=c.createElement("div"),t.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(r=n.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",f=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=f&&0===r[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===n.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,i.getComputedStyle&&(e.pixelPosition="1%"!==(i.getComputedStyle(n,null)||{}).top,e.boxSizingReliable="4px"===(i.getComputedStyle(n,null)||{width:"4px"}).width,(o=c.createElement("div")).style.cssText=n.style.cssText=a,o.style.marginRight=o.style.width="0",n.style.width="1px",n.appendChild(o),e.reliableMarginRight=!parseFloat((i.getComputedStyle(o,null)||{}).marginRight)),void 0!==n.style.zoom&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==n.offsetWidth,t.style.zoom=1),s.removeChild(t),t=n=r=o=null)}),s.removeChild(p),t=n=r=o=a=s=p=null,e}();var L=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,D=/([A-Z])/g;function F(e,t,n){if(n===o&&1===e.nodeType){var r="data-"+t.replace(D,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:L.test(n)?b.parseJSON(n):n)}catch(e){}b.data(e,t,n)}else n=o}return n}function B(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}b.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?b.cache[e[b.expando]]:e[b.expando])&&!B(e)},data:function(e,t,n,r){if(b.acceptData(e)){var i,a,s=b.expando,c="string"==typeof t,u=e.nodeType,l=u?b.cache:e,f=u?e[s]:e[s]&&s;if(f&&l[f]&&(r||l[f].data)||!c||n!==o)return f||(u?e[s]=f=b.deletedIds.pop()||b.guid++:f=s),l[f]||(l[f]={},u||(l[f].toJSON=b.noop)),"object"!=typeof t&&"function"!=typeof t||(r?l[f]=b.extend(l[f],t):l[f].data=b.extend(l[f].data,t)),i=l[f],r||(i.data||(i.data={}),i=i.data),n!==o&&(i[b.camelCase(t)]=n),c?null==(a=i[t])&&(a=i[b.camelCase(t)]):a=i,a}},removeData:function(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,c=a?e[b.expando]:b.expando;if(s[c]){if(t&&(r=n?s[c]:s[c].data)){b.isArray(t)||(t=t in r?[t]:(t=b.camelCase(t))in r?[t]:t.split(" "));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?B:b.isEmptyObject)(r))return}(n||(delete s[c].data,B(s[c])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[c]:s[c]=null)}}},_data:function(e,t,n){return b.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,t){var n,r,i,a,s,c=this[0],u=0,l=null;if(e===o){if(this.length&&(l=b.data(c),1===c.nodeType&&!b._data(c,"parsedAttrs"))){for(s=(i=c.attributes).length;u<s;u++)(a=i[u].name).indexOf("data-")||(a=b.camelCase(a.substring(5)),F(c,a,l[a]));b._data(c,"parsedAttrs",!0)}return l}return"object"==typeof e?this.each(function(){b.data(this,e)}):((n=e.split(".",2))[1]=n[1]?"."+n[1]:"",r=n[1]+"!",b.access(this,function(t){if(t===o)return(l=this.triggerHandler("getData"+r,[n[0]]))===o&&c&&(l=b.data(c,e),l=F(c,e,l)),l===o&&n[1]?this.data(n[0]):l;n[1]=t,this.each(function(){var i=b(this);i.triggerHandler("setData"+r,n),b.data(this,e,t),i.triggerHandler("changeData"+r,n)})},null,t,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){b.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b.removeData(e,t+"queue",!0),b.removeData(e,n,!0)})})}}),b.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?b.queue(this[0],e):t===o?this:this.each(function(){var n=b.queue(this,e,t);b._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx&&b.fx.speeds[e]||e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=b.Deferred(),a=this,s=this.length,c=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=o),e=e||"fx";s--;)(n=b._data(a[s],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(c));return c(),i.promise(t)}});var U,V,q,H=/[\t\r\n]/g,G=/\r/g,W=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,$=/^a(?:rea|)$/i,J=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,X=b.support.getSetAttribute;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=o,delete this[e]}catch(e){}})},addClass:function(e){var t,n,r,i,o,a,s;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(C),n=0,r=this.length;n<r;n++)if(1===(i=this[n]).nodeType)if(i.className||1!==t.length){for(o=" "+i.className+" ",a=0,s=t.length;a<s;a++)o.indexOf(" "+t[a]+" ")<0&&(o+=t[a]+" ");i.className=b.trim(o)}else i.className=e;return this},removeClass:function(e){var t,n,r,i,a,s,c;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===o)for(t=(e||"").split(C),s=0,c=this.length;s<c;s++)if(1===(r=this[s]).nodeType&&r.className){for(n=(" "+r.className+" ").replace(H," "),i=0,a=t.length;i<a;i++)for(;n.indexOf(" "+t[i]+" ")>=0;)n=n.replace(" "+t[i]+" "," ");r.className=e?b.trim(n):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var i,o=0,a=b(this),s=t,c=e.split(C);i=c[o++];)a[(s=r?s:!a.hasClass(i))?"addClass":"removeClass"](i);else"undefined"!==n&&"boolean"!==n||(this.className&&b._data(this,"__className__",this.className),this.className=this.className||!1===e?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(H," ").indexOf(t)>=0)return!0;return!1},val:function(e){var t,n,r,i=this[0];return arguments.length?(r=b.isFunction(e),this.each(function(n){var i,a=b(this);1===this.nodeType&&(null==(i=r?e.call(this,n,a.val()):e)?i="":"number"==typeof i?i+="":b.isArray(i)&&(i=b.map(i,function(e){return null==e?"":e+""})),(t=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&t.set(this,i,"value")!==o||(this.value=i))})):i?(t=b.valHooks[i.type]||b.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&(n=t.get(i,"value"))!==o?n:"string"==typeof(n=i.value)?n.replace(G,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,o=e.selectedIndex,a=[],s=e.options,c="select-one"===e.type;if(o<0)return null;for(n=c?o:0,r=c?o+1:s.length;n<r;n++)if((i=s[n]).selected&&(b.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!b.nodeName(i.parentNode,"optgroup"))){if(t=b(i).val(),c)return t;a.push(t)}return c&&!a.length&&s.length?b(s[o]).val():a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,t,n,r){var i,a,s,c=e.nodeType;if(e&&3!==c&&8!==c&&2!==c)return r&&b.isFunction(b.fn[t])?b(e)[t](n):void 0===e.getAttribute?b.prop(e,t,n):((s=1!==c||!b.isXMLDoc(e))&&(t=t.toLowerCase(),a=b.attrHooks[t]||(J.test(t)?V:U)),n!==o?null===n?void b.removeAttr(e,t):a&&"set"in a&&s&&(i=a.set(e,n,t))!==o?i:(e.setAttribute(t,n+""),n):a&&"get"in a&&s&&null!==(i=a.get(e,t))?i:null===(i=e.getAttribute(t))?o:i)},removeAttr:function(e,t){var n,r,i,o,a=0;if(t&&1===e.nodeType)for(r=t.split(C);a<r.length;a++)(i=r[a])&&(n=b.propFix[i]||i,(o=J.test(i))||b.attr(e,i,""),e.removeAttribute(X?i:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)b.error("type property can't be changed");else if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return U&&b.nodeName(e,"button")?U.get(e,t):t in e?e.value:null},set:function(e,t,n){if(U&&b.nodeName(e,"button"))return U.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,t,n){var r,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!b.isXMLDoc(e))&&(t=b.propFix[t]||t,i=b.propHooks[t]),n!==o?i&&"set"in i&&(r=i.set(e,n,t))!==o?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):z.test(e.nodeName)||$.test(e.nodeName)&&e.href?0:o}}}}),V={get:function(e,t){var n,r=b.prop(e,t);return!0===r||"boolean"!=typeof r&&(n=e.getAttributeNode(t))&&!1!==n.nodeValue?t.toLowerCase():o},set:function(e,t,n){var r;return!1===t?b.removeAttr(e,n):((r=b.propFix[n]||n)in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},X||(q={name:!0,id:!0,coords:!0},U=b.valHooks.button={get:function(e,t){var n;return(n=e.getAttributeNode(t))&&(q[t]?""!==n.value:n.specified)?n.value:o},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=c.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}})}),b.attrHooks.contenteditable={get:U.get,set:function(e,t,n){""===t&&(t="false"),U.set(e,t,n)}}),b.support.hrefNormalized||b.each(["href","src","width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{get:function(e){var n=e.getAttribute(t,2);return null===n?o:n}})}),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||o},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var K=/^(?:textarea|input|select)$/i,Q=/^([^\.]*|)(?:\.(.+)|)$/,Y=/(?:^|\s)hover(\.\S+|)\b/,Z=/^key/,ee=/^(?:mouse|contextmenu)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ne=function(e){return b.event.special.hover?e:e.replace(Y,"mouseenter$1 mouseleave$1")};function re(){return!1}function ie(){return!0}b.event={add:function(e,t,n,r,i){var a,s,c,u,l,f,d,p,h,g,m;if(3!==e.nodeType&&8!==e.nodeType&&t&&n&&(a=b._data(e))){for(n.handler&&(n=(h=n).handler,i=h.selector),n.guid||(n.guid=b.guid++),(c=a.events)||(a.events=c={}),(s=a.handle)||(a.handle=s=function(e){return void 0===b||e&&b.event.triggered===e.type?o:b.event.dispatch.apply(s.elem,arguments)},s.elem=e),t=b.trim(ne(t)).split(" "),u=0;u<t.length;u++)f=(l=Q.exec(t[u])||[])[1],d=(l[2]||"").split(".").sort(),m=b.event.special[f]||{},f=(i?m.delegateType:m.bindType)||f,m=b.event.special[f]||{},p=b.extend({type:f,origType:l[1],data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&b.expr.match.needsContext.test(i),namespace:d.join(".")},h),(g=c[f])||((g=c[f]=[]).delegateCount=0,m.setup&&!1!==m.setup.call(e,r,d,s)||(e.addEventListener?e.addEventListener(f,s,!1):e.attachEvent&&e.attachEvent("on"+f,s))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),i?g.splice(g.delegateCount++,0,p):g.push(p),b.event.global[f]=!0;e=null}},global:{},remove:function(e,t,n,r,i){var o,a,s,c,u,l,f,d,p,h,g,m=b.hasData(e)&&b._data(e);if(m&&(d=m.events)){for(t=b.trim(ne(t||"")).split(" "),o=0;o<t.length;o++)if(s=c=(a=Q.exec(t[o])||[])[1],u=a[2],s){for(p=b.event.special[s]||{},l=(h=d[s=(r?p.delegateType:p.bindType)||s]||[]).length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f=0;f<h.length;f++)g=h[f],!i&&c!==g.origType||n&&n.guid!==g.guid||u&&!u.test(g.namespace)||r&&r!==g.selector&&("**"!==r||!g.selector)||(h.splice(f--,1),g.selector&&h.delegateCount--,p.remove&&p.remove.call(e,g));0===h.length&&l!==h.length&&(p.teardown&&!1!==p.teardown.call(e,u,m.handle)||b.removeEvent(e,s,m.handle),delete d[s])}else for(s in d)b.event.remove(e,s+t[o],n,r,!0);b.isEmptyObject(d)&&(delete m.handle,b.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,t,n,r){if(!n||3!==n.nodeType&&8!==n.nodeType){var a,s,u,l,f,d,p,h,g,m,v=e.type||e,y=[];if(!te.test(v+b.event.triggered)&&(v.indexOf("!")>=0&&(v=v.slice(0,-1),s=!0),v.indexOf(".")>=0&&(v=(y=v.split(".")).shift(),y.sort()),n&&!b.event.customEvent[v]||b.event.global[v]))if((e="object"==typeof e?e[b.expando]?e:new b.Event(v,e):new b.Event(v)).type=v,e.isTrigger=!0,e.exclusive=s,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d=v.indexOf(":")<0?"on"+v:"",n){if(e.result=o,e.target||(e.target=n),(t=null!=t?b.makeArray(t):[]).unshift(e),!(p=b.event.special[v]||{}).trigger||!1!==p.trigger.apply(n,t)){if(g=[[n,p.bindType||v]],!r&&!p.noBubble&&!b.isWindow(n)){for(m=p.delegateType||v,l=te.test(m+v)?n:n.parentNode,f=n;l;l=l.parentNode)g.push([l,m]),f=l;f===(n.ownerDocument||c)&&g.push([f.defaultView||f.parentWindow||i,m])}for(u=0;u<g.length&&!e.isPropagationStopped();u++)l=g[u][0],e.type=g[u][1],(h=(b._data(l,"events")||{})[e.type]&&b._data(l,"handle"))&&h.apply(l,t),(h=d&&l[d])&&b.acceptData(l)&&h.apply&&!1===h.apply(l,t)&&e.preventDefault();return e.type=v,r||e.isDefaultPrevented()||p._default&&!1!==p._default.apply(n.ownerDocument,t)||"click"===v&&b.nodeName(n,"a")||!b.acceptData(n)||d&&n[v]&&("focus"!==v&&"blur"!==v||0!==e.target.offsetWidth)&&!b.isWindow(n)&&((f=n[d])&&(n[d]=null),b.event.triggered=v,n[v](),b.event.triggered=o,f&&(n[d]=f)),e.result}}else for(u in a=b.cache)a[u].events&&a[u].events[v]&&b.event.trigger(e,t,a[u].handle.elem,!0)}},dispatch:function(e){e=b.event.fix(e||i.event);var t,n,r,a,s,c,u,l,f,d=(b._data(this,"events")||{})[e.type]||[],p=d.delegateCount,g=h.call(arguments),m=!e.exclusive&&!e.namespace,v=b.event.special[e.type]||{},y=[];if(g[0]=e,e.delegateTarget=this,!v.preDispatch||!1!==v.preDispatch.call(this,e)){if(p&&(!e.button||"click"!==e.type))for(r=e.target;r!=this;r=r.parentNode||this)if(!0!==r.disabled||"click"!==e.type){for(s={},u=[],t=0;t<p;t++)s[f=(l=d[t]).selector]===o&&(s[f]=l.needsContext?b(f,this).index(r)>=0:b.find(f,this,null,[r]).length),s[f]&&u.push(l);u.length&&y.push({elem:r,matches:u})}for(d.length>p&&y.push({elem:this,matches:d.slice(p)}),t=0;t<y.length&&!e.isPropagationStopped();t++)for(c=y[t],e.currentTarget=c.elem,n=0;n<c.matches.length&&!e.isImmediatePropagationStopped();n++)l=c.matches[n],(m||!e.namespace&&!l.namespace||e.namespace_re&&e.namespace_re.test(l.namespace))&&(e.data=l.data,e.handleObj=l,(a=((b.event.special[l.origType]||{}).handle||l.handler).apply(c.elem,g))!==o&&(e.result=a,!1===a&&(e.preventDefault(),e.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,e),e.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,a=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||c).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||a===o||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[b.expando])return e;var t,n,r=e,i=b.event.fixHooks[e.type]||{},o=i.props?this.props.concat(i.props):this.props;for(e=b.Event(r),t=o.length;t;)e[n=o[--t]]=r[n];return e.target||(e.target=r.srcElement||c),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){b.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.event.handle=b.event.dispatch,b.removeEvent=c.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?ie:re):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=ie;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=ie;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ie,this.stopPropagation()},isDefaultPrevented:re,isPropagationStopped:re,isImmediatePropagationStopped:re},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return i.selector,r&&(r===this||b.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=b.nodeName(t,"input")||b.nodeName(t,"button")?t.form:o;n&&!b._data(n,"_submit_attached")&&(b.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),b._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(K.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1;b.event.add(this,"beforeactivate._change",function(e){var t=e.target;K.test(t.nodeName)&&!b._data(t,"_change_attached")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!K.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0==n++&&c.addEventListener(e,r,!0)},teardown:function(){0==--n&&c.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,t,n,r,i){var a,s;if("object"==typeof e){for(s in"string"!=typeof t&&(n=n||t,t=o),e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=o):null==r&&("string"==typeof t?(r=n,n=o):(r=n,n=t,t=o)),!1===r)r=re;else if(!r)return this;return 1===i&&(a=r,(r=function(e){return b().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=b.guid++)),this.each(function(){b.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,b(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=o),!1===n&&(n=re),this.each(function(){b.event.remove(this,e,n,t)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return b(this.context).on(e,this.selector,t,n),this},die:function(e,t){return b(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return b.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||b.guid++,r=0,i=function(n){var i=(b._data(this,"lastToggle"+e.guid)||0)%r;return b._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};for(i.guid=n;r<t.length;)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},Z.test(t)&&(b.event.fixHooks[t]=b.event.keyHooks),ee.test(t)&&(b.event.fixHooks[t]=b.event.mouseHooks)}),
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
function(e,t){var n,r,i,o,a,s,c,u,l,f,d,p,h,g,m,v,y,_,S=("sizcache"+Math.random()).replace(".",""),C=String,w=e.document,T=w.documentElement,E=0,x=0,k=[].pop,A=[].push,R=[].slice,I=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},M=function(e,t){return e[S]=null==t||t,e},N=function(){var e={},t=[];return M(function(n,r){return t.push(n)>i.cacheLength&&delete e[t.shift()],e[n]=r},e)},O=N(),j=N(),P=N(),L="[\\x20\\t\\r\\n\\f]",D="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",F=D.replace("w","w#"),B="\\["+L+"*("+D+")"+L+"*(?:([*^$|!~]?=)"+L+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+L+"*\\]",U=":("+D+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+B+")|[^:]|\\\\.)*|.*))\\)|)",V=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)",q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),H=new RegExp("^"+L+"*,"+L+"*"),G=new RegExp("^"+L+"*([\\x20\\t\\r\\n\\f>+~])"+L+"*"),W=new RegExp(U),z=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,$=/[\x20\t\r\n\f]*[+~]/,J=/h\d/i,X=/input|select|textarea|button/i,K=/\\(?!\\)/g,Q={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),NAME:new RegExp("^\\[name=['\"]?("+D+")['\"]?\\]"),TAG:new RegExp("^("+D.replace("w","w*")+")"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+U),POS:new RegExp(V,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),needsContext:new RegExp("^"+L+"*[>+~]|"+V,"i")},Y=function(e){var t=w.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},Z=Y(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),ee=Y(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&void 0!==e.firstChild.getAttribute&&"#"===e.firstChild.getAttribute("href")}),te=Y(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ne=Y(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),re=Y(function(e){e.id=S+0,e.innerHTML="<a name='"+S+"'></a><div name='"+S+"'></div>",T.insertBefore(e,T.firstChild);var t=w.getElementsByName&&w.getElementsByName(S).length===2+w.getElementsByName(S+0).length;return r=!w.getElementById(S),T.removeChild(e),t});try{R.call(T.childNodes,0)[0].nodeType}catch(e){R=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}function ie(e,t,n,r){n=n||[];var i,o,c,u,l=(t=t||w).nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(!(c=a(t))&&!r&&(i=z.exec(e)))if(u=i[1]){if(9===l){if(!(o=t.getElementById(u))||!o.parentNode)return n;if(o.id===u)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&s(t,o)&&o.id===u)return n.push(o),n}else{if(i[2])return A.apply(n,R.call(t.getElementsByTagName(e),0)),n;if((u=i[3])&&ne&&t.getElementsByClassName)return A.apply(n,R.call(t.getElementsByClassName(u),0)),n}return ge(e.replace(q,"$1"),t,n,r,c)}function oe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function ae(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function se(e){return M(function(t){return t=+t,M(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ce(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function ue(e,t){var n,r,o,a,s,c,u,l=j[S][e];if(l)return t?0:l.slice(0);for(s=e,c=[],u=i.preFilter;s;){for(a in n&&!(r=H.exec(s))||(r&&(s=s.slice(r[0].length)),c.push(o=[])),n=!1,(r=G.exec(s))&&(o.push(n=new C(r.shift())),s=s.slice(n.length),n.type=r[0].replace(q," ")),i.filter)!(r=Q[a].exec(s))||u[a]&&!(r=u[a](r,w,!0))||(o.push(n=new C(r.shift())),s=s.slice(n.length),n.type=a,n.matches=r);if(!n)break}return t?s.length:s?ie.error(e):j(e,c).slice(0)}function le(e,t,r){var i=t.dir,o=r&&"parentNode"===t.dir,a=x++;return t.first?function(t,n,r){for(;t=t[i];)if(o||1===t.nodeType)return e(t,n,r)}:function(t,r,s){if(s){for(;t=t[i];)if((o||1===t.nodeType)&&e(t,r,s))return t}else for(var c,u=E+" "+a+" ",l=u+n;t=t[i];)if(o||1===t.nodeType){if((c=t[S])===l)return t.sizset;if("string"==typeof c&&0===c.indexOf(u)){if(t.sizset)return t}else{if(t[S]=l,e(t,r,s))return t.sizset=!0,t;t.sizset=!1}}}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function de(e,t,n,r,i){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function pe(e,t,n,r,i,o){return r&&!r[S]&&(r=pe(r)),i&&!i[S]&&(i=pe(i,o)),M(function(o,a,s,c){if(!o||!i){var u,l,f,d=[],p=[],h=a.length,g=o||function(e,t,n,r){for(var i=0,o=t.length;i<o;i++)ie(e,t[i],n,r);return n}(t||"*",s.nodeType?[s]:s,[],o),m=!e||!o&&t?g:de(g,d,e,s,c),v=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,v,s,c),r)for(f=de(v,p),r(f,[],s,c),u=f.length;u--;)(l=f[u])&&(v[p[u]]=!(m[p[u]]=l));if(o)for(u=e&&v.length;u--;)(l=v[u])&&(o[d[u]]=!(a[d[u]]=l));else v=de(v===a?v.splice(h,v.length):v),i?i(null,a,v,c):A.apply(a,v)}})}function he(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],c=a?1:0,u=le(function(e){return e===t},s,!0),l=le(function(e){return I.call(t,e)>-1},s,!0),d=[function(e,n,r){return!a&&(r||n!==f)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];c<o;c++)if(n=i.relative[e[c].type])d=[le(fe(d),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[S]){for(r=++c;r<o&&!i.relative[e[r].type];r++);return pe(c>1&&fe(d),c>1&&e.slice(0,c-1).join("").replace(q,"$1"),n,c<r&&he(e.slice(c,r)),r<o&&he(e=e.slice(r)),r<o&&e.join(""))}d.push(n)}return fe(d)}function ge(e,t,n,r,o){var a,s,u,l,f,d=ue(e);if(d.length,!r&&1===d.length){if((s=d[0]=d[0].slice(0)).length>2&&"ID"===(u=s[0]).type&&9===t.nodeType&&!o&&i.relative[s[1].type]){if(!(t=i.find.ID(u.matches[0].replace(K,""),t,o)[0]))return n;e=e.slice(s.shift().length)}for(a=Q.POS.test(e)?-1:s.length-1;a>=0&&(u=s[a],!i.relative[l=u.type]);a--)if((f=i.find[l])&&(r=f(u.matches[0].replace(K,""),$.test(s[0].type)&&t.parentNode||t,o))){if(s.splice(a,1),!(e=r.length&&s.join("")))return A.apply(n,R.call(r,0)),n;break}}return c(e,d)(r,t,o,n,$.test(e)),n}function me(){}ie.matches=function(e,t){return ie(e,null,null,t)},ie.matchesSelector=function(e,t){return ie(t,null,null,[e]).length>0},o=ie.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},a=ie.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},s=ie.contains=T.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:T.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},ie.attr=function(e,t){var n,r=a(e);return r||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):r||te?e.getAttribute(t):(n=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null},i=ie.selectors={cacheLength:50,createPseudo:M,match:Q,attrHandle:ee?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:r?function(e,t,n){if(void 0!==t.getElementById&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,t,n){if(void 0!==t.getElementById&&!n){var r=t.getElementById(e);return r?r.id===e||void 0!==r.getAttributeNode&&r.getAttributeNode("id").value===e?[r]:void 0:[]}},TAG:Z?function(e,t){if(void 0!==t.getElementsByTagName)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if("*"===e){for(var r,i=[],o=0;r=n[o];o++)1===r.nodeType&&i.push(r);return i}return n},NAME:re&&function(e,t){if(void 0!==t.getElementsByName)return t.getElementsByName(name)},CLASS:ne&&function(e,t,n){if(void 0!==t.getElementsByClassName&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,""),e[3]=(e[4]||e[5]||"").replace(K,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||ie.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&ie.error(e[0]),e},PSEUDO:function(e){var t,n;return Q.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(W.test(t)&&(n=ue(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:r?function(e){return e=e.replace(K,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(K,""),function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(K,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=O[S][e];return t||(t=O(e,new RegExp("(^|"+L+")"+e+"("+L+"|$)"))),function(e){return t.test(e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}},ATTR:function(e,t,n){return function(r,i){var o=ie.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.substr(o.length-n.length)===n:"~="===t?(" "+o+" ").indexOf(n)>-1:"|="===t&&(o===n||o.substr(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r){return"nth"===e?function(e){var t,i,o=e.parentNode;if(1===n&&0===r)return!0;if(o)for(i=0,t=o.firstChild;t&&(1!==t.nodeType||(i++,e!==t));t=t.nextSibling);return(i-=r)===n||i%n==0&&i/n>=0}:function(t){var n=t;switch(e){case"only":case"first":for(;n=n.previousSibling;)if(1===n.nodeType)return!1;if("first"===e)return!0;n=t;case"last":for(;n=n.nextSibling;)if(1===n.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ie.error("unsupported pseudo: "+e);return r[S]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?M(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=I.call(e,o[a])]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:M(function(e){var t=[],n=[],r=c(e.replace(q,"$1"));return r[S]?M(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:M(function(e){return function(t){return ie(e,t).length>0}}),contains:M(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!i.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return J.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:oe("radio"),checkbox:oe("checkbox"),file:oe("file"),password:oe("password"),image:oe("image"),submit:ae("submit"),reset:ae("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return X.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!(!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement},first:se(function(e,t,n){return[0]}),last:se(function(e,t,n){return[t-1]}),eq:se(function(e,t,n){return[n<0?n+t:n]}),even:se(function(e,t,n){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:se(function(e,t,n){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:se(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:se(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},u=T.compareDocumentPosition?function(e,t){return e===t?(l=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return l=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],a=e.parentNode,s=t.parentNode,c=a;if(a===s)return ce(e,t);if(!a)return-1;if(!s)return 1;for(;c;)i.unshift(c),c=c.parentNode;for(c=s;c;)o.unshift(c),c=c.parentNode;n=i.length,r=o.length;for(var u=0;u<n&&u<r;u++)if(i[u]!==o[u])return ce(i[u],o[u]);return u===n?ce(e,o[u],-1):ce(i[u],t,1)},[0,0].sort(u),d=!l,ie.uniqueSort=function(e){var t,n=1;if(l=d,e.sort(u),l)for(;t=e[n];n++)t===e[n-1]&&e.splice(n--,1);return e},ie.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},c=ie.compile=function(e,t){var r,o=[],a=[],s=P[S][e];if(!s){for(t||(t=ue(e)),r=t.length;r--;)(s=he(t[r]))[S]?o.push(s):a.push(s);s=P(e,function(e,t){var r=t.length>0,o=e.length>0,a=function(s,c,u,l,d){var p,h,g,m=[],v=0,y="0",b=s&&[],_=null!=d,S=f,C=s||o&&i.find.TAG("*",d&&c.parentNode||c),T=E+=null==S?1:Math.E;for(_&&(f=c!==w&&c,n=a.el);null!=(p=C[y]);y++){if(o&&p){for(h=0;g=e[h];h++)if(g(p,c,u)){l.push(p);break}_&&(E=T,n=++a.el)}r&&((p=!g&&p)&&v--,s&&b.push(p))}if(v+=y,r&&y!==v){for(h=0;g=t[h];h++)g(b,m,c,u);if(s){if(v>0)for(;y--;)b[y]||m[y]||(m[y]=k.call(l));m=de(m)}A.apply(l,m),_&&!s&&m.length>0&&v+t.length>1&&ie.uniqueSort(l)}return _&&(E=T,f=S),b};return a.el=0,r?M(a):a}(a,o))}return s},w.querySelectorAll&&(h=ge,g=/'|\\/g,m=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,v=[":focus"],y=[":active",":focus"],_=T.matchesSelector||T.mozMatchesSelector||T.webkitMatchesSelector||T.oMatchesSelector||T.msMatchesSelector,Y(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||v.push("\\["+L+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||v.push(":checked")}),Y(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&v.push("[*^$]="+L+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||v.push(":enabled",":disabled")}),v=new RegExp(v.join("|")),ge=function(e,t,n,r,i){if(!(r||i||v&&v.test(e))){var o,a,s=!0,c=S,u=t,l=9===t.nodeType&&e;if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){for(o=ue(e),(s=t.getAttribute("id"))?c=s.replace(g,"\\$&"):t.setAttribute("id",c),c="[id='"+c+"'] ",a=o.length;a--;)o[a]=c+o[a].join("");u=$.test(e)&&t.parentNode||t,l=o.join(",")}if(l)try{return A.apply(n,R.call(u.querySelectorAll(l),0)),n}catch(e){}finally{s||t.removeAttribute("id")}}return h(e,t,n,r,i)},_&&(Y(function(e){p=_.call(e,"div");try{_.call(e,"[test!='']:sizzle"),y.push("!=",U)}catch(e){}}),y=new RegExp(y.join("|")),ie.matchesSelector=function(e,t){if(t=t.replace(m,"='$1']"),!(a(e)||y.test(t)||v&&v.test(t)))try{var n=_.call(e,t);if(n||p||e.document&&11!==e.document.nodeType)return n}catch(e){}return ie(t,null,null,[e]).length>0})),i.pseudos.nth=i.pseudos.eq,i.filters=me.prototype=i.pseudos,i.setFilters=new me,ie.attr=b.attr,b.find=ie,b.expr=ie.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ie.uniqueSort,b.text=ie.getText,b.isXMLDoc=ie.isXML,b.contains=ie.contains}(i);var oe=/Until$/,ae=/^(?:parents|prev(?:Until|All))/,se=/^.[^:#\[\.,]*$/,ce=b.expr.match.needsContext,ue={children:!0,contents:!0,next:!0,prev:!0};function le(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function fe(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function de(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){return!!t.call(e,r,e)===n});if(t.nodeType)return b.grep(e,function(e,r){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(se.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e,r){return b.inArray(e,t)>=0===n})}function pe(e){var t=me.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}b.fn.extend({find:function(e){var t,n,r,i,o,a,s=this;if("string"!=typeof e)return b(e).filter(function(){for(t=0,n=s.length;t<n;t++)if(b.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,n=this.length;t<n;t++)if(r=a.length,b.find(e,this[t],a),t>0)for(i=r;i<a.length;i++)for(o=0;o<r;o++)if(a[o]===a[i]){a.splice(i--,1);break}return a},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(de(this,e,!1),"not",e)},filter:function(e){return this.pushStack(de(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?ce.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ce.test(e)||"string"!=typeof e?b(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return o=o.length>1?b.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(le(n[0])||le(r[0])?r:b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return fe(e,"nextSibling")},prev:function(e){return fe(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return oe.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ue[e]?b.unique(i):i,this.length>1&&ae.test(e)&&(i=i.reverse()),this.pushStack(i,e,h.call(arguments).join(","))}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(n===o||1!==i.nodeType||!b(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var he,ge,me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ve=/ jQuery\d+="(?:null|\d+)"/g,ye=/^\s+/,be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_e=/<([\w:]+)/,Se=/<tbody/i,Ce=/<|&#?\w+;/,we=/<(?:script|style|link)/i,Te=/<(?:script|object|embed|option|style)/i,Ee=new RegExp("<(?:"+me+")[\\s/>]","i"),xe=/^(?:checkbox|radio)$/,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/\/(java|ecma)script/i,Re=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ie={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Me=pe(c),Ne=Me.appendChild(c.createElement("div"));function Oe(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)b.event.add(t,n,s[n][r]);a.data&&(a.data=b.extend({},a.data))}}function je(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(n=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&xe.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(b.expando))}function Pe(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function Le(e){xe.test(e.type)&&(e.defaultChecked=e.checked)}Ie.optgroup=Ie.option,Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,b.support.htmlSerialize||(Ie._default=[1,"X<div>","</div>"]),b.fn.extend({text:function(e){return b.access(this,function(e){return e===o?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(e,this.firstChild)})},before:function(){if(!le(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=b.clean(arguments);return this.pushStack(b.merge(e,this),"before",this.selector)}},after:function(){if(!le(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=b.clean(arguments);return this.pushStack(b.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)e&&!b.filter(e,[n]).length||(t||1!==n.nodeType||(b.cleanData(n.getElementsByTagName("*")),b.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&b.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===o)return 1===t.nodeType?t.innerHTML.replace(ve,""):o;if("string"==typeof e&&!we.test(e)&&(b.support.htmlSerialize||!Ee.test(e))&&(b.support.leadingWhitespace||!ye.test(e))&&!Ie[(_e.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(be,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(b.cleanData(t.getElementsByTagName("*")),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return le(this[0])?this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this:b.isFunction(e)?this.each(function(t){var n=b(this),r=n.html();n.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=b(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;b(this).remove(),t?b(t).before(e):b(n).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,t,n){var r,i,a,s,c,u,l=0,f=(e=[].concat.apply([],e))[0],d=[],p=this.length;if(!b.support.checkClone&&p>1&&"string"==typeof f&&ke.test(f))return this.each(function(){b(this).domManip(e,t,n)});if(b.isFunction(f))return this.each(function(r){var i=b(this);e[0]=f.call(this,r,t?i.html():o),i.domManip(e,t,n)});if(this[0]){if(i=(a=(r=b.buildFragment(e,this,d)).fragment).firstChild,1===a.childNodes.length&&(a=i),i)for(t=t&&b.nodeName(i,"tr"),s=r.cacheable||p-1;l<p;l++)n.call(t&&b.nodeName(this[l],"table")?(c=this[l],u="tbody",c.getElementsByTagName(u)[0]||c.appendChild(c.ownerDocument.createElement(u))):this[l],l===s?a:b.clone(a,!0,!0));a=i=null,d.length&&b.each(d,function(e,t){t.src?b.ajax?b.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):b.error("no ajax"):b.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Re,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),b.buildFragment=function(e,t,n){var r,i,a,s=e[0];return t=(t=!(t=t||c).nodeType&&t[0]||t).ownerDocument||t,!(1===e.length&&"string"==typeof s&&s.length<512&&t===c&&"<"===s.charAt(0))||Te.test(s)||!b.support.checkClone&&ke.test(s)||!b.support.html5Clone&&Ee.test(s)||(i=!0,a=(r=b.fragments[s])!==o),r||(r=t.createDocumentFragment(),b.clean(e,t,r,n),i&&(b.fragments[s]=a&&r)),{fragment:r,cacheable:i}},b.fragments={},b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(n){var r,i=0,o=[],a=b(n),s=a.length,c=1===this.length&&this[0].parentNode;if((null==c||c&&11===c.nodeType&&1===c.childNodes.length)&&1===s)return a[t](this[0]),this;for(;i<s;i++)r=(i>0?this.clone(!0):this).get(),b(a[i])[t](r),o=o.concat(r);return this.pushStack(o,e,a.selector)}}),b.extend({clone:function(e,t,n){var r,i,o,a;if(b.support.html5Clone||b.isXMLDoc(e)||!Ee.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Ne.innerHTML=e.outerHTML,Ne.removeChild(a=Ne.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(je(e,a),r=Pe(e),i=Pe(a),o=0;r[o];++o)i[o]&&je(r[o],i[o]);if(t&&(Oe(e,a),n))for(r=Pe(e),i=Pe(a),o=0;r[o];++o)Oe(r[o],i[o]);return r=i=null,a},clean:function(e,t,n,r){var i,o,a,s,u,l,f,d,p,h,g,m=t===c&&Me,v=[];for(t&&void 0!==t.createDocumentFragment||(t=c),i=0;null!=(a=e[i]);i++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(Ce.test(a)){for(m=m||pe(t),f=t.createElement("div"),m.appendChild(f),a=a.replace(be,"<$1></$2>"),s=(_e.exec(a)||["",""])[1].toLowerCase(),l=(u=Ie[s]||Ie._default)[0],f.innerHTML=u[1]+a+u[2];l--;)f=f.lastChild;if(!b.support.tbody)for(d=Se.test(a),o=(p="table"!==s||d?"<table>"!==u[1]||d?[]:f.childNodes:f.firstChild&&f.firstChild.childNodes).length-1;o>=0;--o)b.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o]);!b.support.leadingWhitespace&&ye.test(a)&&f.insertBefore(t.createTextNode(ye.exec(a)[0]),f.firstChild),a=f.childNodes,f.parentNode.removeChild(f)}else a=t.createTextNode(a);a.nodeType?v.push(a):b.merge(v,a)}if(f&&(a=f=m=null),!b.support.appendChecked)for(i=0;null!=(a=v[i]);i++)b.nodeName(a,"input")?Le(a):void 0!==a.getElementsByTagName&&b.grep(a.getElementsByTagName("input"),Le);if(n)for(h=function(e){if(!e.type||Ae.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)},i=0;null!=(a=v[i]);i++)b.nodeName(a,"script")&&h(a)||(n.appendChild(a),void 0!==a.getElementsByTagName&&(g=b.grep(b.merge([],a.getElementsByTagName("script")),h),v.splice.apply(v,[i+1,0].concat(g)),i+=g.length));return v},cleanData:function(e,t){for(var n,r,i,o,a=0,s=b.expando,c=b.cache,u=b.support.deleteExpando,l=b.event.special;null!=(i=e[a]);a++)if((t||b.acceptData(i))&&(n=(r=i[s])&&c[r])){if(n.events)for(o in n.events)l[o]?b.event.remove(i,o):b.removeEvent(i,o,n.handle);c[r]&&(delete c[r],u?delete i[s]:i.removeAttribute?i.removeAttribute(s):i[s]=null,b.deletedIds.push(r))}}}),b.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},ge={},(he=b.uaMatch(l.userAgent)).browser&&(ge[he.browser]=!0,ge.version=he.version),ge.chrome?ge.webkit=!0:ge.webkit&&(ge.safari=!0),b.browser=ge,b.sub=function(){function e(t,n){return new e.fn.init(t,n)}b.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,r){return r&&r instanceof b&&!(r instanceof e)&&(r=e(r)),b.fn.init.call(this,n,r,t)},e.fn.init.prototype=e.fn;var t=e(c);return e};var De,Fe,Be,Ue=/alpha\([^)]*\)/i,Ve=/opacity=([^)]*)/,qe=/^(top|right|bottom|left)$/,He=/^(none|table(?!-c[ea]).+)/,Ge=/^margin/,We=new RegExp("^("+_+")(.*)$","i"),ze=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),$e=new RegExp("^([-+])=("+_+")","i"),Je={},Xe={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:0,fontWeight:400},Qe=["Top","Right","Bottom","Left"],Ye=["Webkit","O","Moz","ms"],Ze=b.fn.toggle;function et(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Ye.length;i--;)if((t=Ye[i]+n)in e)return t;return r}function tt(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function nt(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i[o]=b._data(n,"olddisplay"),t?(i[o]||"none"!==n.style.display||(n.style.display=""),""===n.style.display&&tt(n)&&(i[o]=b._data(n,"olddisplay",at(n.nodeName)))):(r=De(n,"display"),i[o]||"none"===r||b._data(n,"olddisplay",r)));for(o=0;o<a;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?i[o]||"":"none"));return e}function rt(e,t,n){var r=We.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function it(e,t,n,r){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,o=0;i<4;i+=2)"margin"===n&&(o+=b.css(e,n+Qe[i],!0)),r?("content"===n&&(o-=parseFloat(De(e,"padding"+Qe[i]))||0),"margin"!==n&&(o-=parseFloat(De(e,"border"+Qe[i]+"Width"))||0)):(o+=parseFloat(De(e,"padding"+Qe[i]))||0,"padding"!==n&&(o+=parseFloat(De(e,"border"+Qe[i]+"Width"))||0));return o}function ot(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i=!0,o=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing");if(r<=0||null==r){if(((r=De(e,t))<0||null==r)&&(r=e.style[t]),ze.test(r))return r;i=o&&(b.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+it(e,t,n||(o?"border":"content"),i)+"px"}function at(e){if(Je[e])return Je[e];var t=b("<"+e+">").appendTo(c.body),n=t.css("display");return t.remove(),"none"!==n&&""!==n||(Fe=c.body.appendChild(Fe||b.extend(c.createElement("iframe"),{frameBorder:0,width:0,height:0})),Be&&Fe.createElement||((Be=(Fe.contentWindow||Fe.contentDocument).document).write("<!doctype html><html><body>"),Be.close()),t=Be.body.appendChild(Be.createElement(e)),n=De(t,"display"),c.body.removeChild(Fe)),Je[e]=n,n}b.fn.extend({css:function(e,t){return b.access(this,function(e,t,n){return n!==o?b.style(e,t,n):b.css(e,t)},e,t,arguments.length>1)},show:function(){return nt(this,!0)},hide:function(){return nt(this)},toggle:function(e,t){var n="boolean"==typeof e;return b.isFunction(e)&&b.isFunction(t)?Ze.apply(this,arguments):this.each(function(){(n?e:tt(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=De(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,s,c=b.camelCase(t),u=e.style;if(t=b.cssProps[c]||(b.cssProps[c]=et(u,c)),s=b.cssHooks[t]||b.cssHooks[c],n===o)return s&&"get"in s&&(i=s.get(e,!1,r))!==o?i:u[t];if("string"==(a=typeof n)&&(i=$e.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(b.css(e,t)),a="number"),!(null==n||"number"===a&&isNaN(n)||("number"!==a||b.cssNumber[c]||(n+="px"),s&&"set"in s&&(n=s.set(e,n,r))===o)))try{u[t]=n}catch(e){}}},css:function(e,t,n,r){var i,a,s,c=b.camelCase(t);return t=b.cssProps[c]||(b.cssProps[c]=et(e.style,c)),(s=b.cssHooks[t]||b.cssHooks[c])&&"get"in s&&(i=s.get(e,!0,r)),i===o&&(i=De(e,t)),"normal"===i&&t in Ke&&(i=Ke[t]),n||r!==o?(a=parseFloat(i),n||b.isNumeric(a)?a||0:i):i},swap:function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r}}),i.getComputedStyle?De=function(e,t){var n,r,o,a,s=i.getComputedStyle(e,null),c=e.style;return s&&(""!==(n=s[t])||b.contains(e.ownerDocument,e)||(n=b.style(e,t)),ze.test(n)&&Ge.test(t)&&(r=c.width,o=c.minWidth,a=c.maxWidth,c.minWidth=c.maxWidth=c.width=n,n=s.width,c.width=r,c.minWidth=o,c.maxWidth=a)),n}:c.documentElement.currentStyle&&(De=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],o=e.style;return null==i&&o&&o[t]&&(i=o[t]),ze.test(i)&&!qe.test(t)&&(n=o.left,(r=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i,i=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),""===i?"auto":i}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return 0===e.offsetWidth&&He.test(De(e,"display"))?b.swap(e,Xe,function(){return ot(e,t,r)}):ot(e,t,r)},set:function(e,n,r){return rt(0,n,r?it(e,t,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing")):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return Ve.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,t>=1&&""===b.trim(o.replace(Ue,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=Ue.test(o)?o.replace(Ue,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){return b.swap(e,{display:"inline-block"},function(){if(t)return De(e,"marginRight")})}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n){var r=De(e,t);return ze.test(r)?b(e).position()[t]+"px":r}}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||De(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r,i="string"==typeof n?n.split(" "):[n],o={};for(r=0;r<4;r++)o[e+Qe[r]+t]=i[r]||i[r-2]||i[0];return o}},Ge.test(e)||(b.cssHooks[e+t].set=rt)});var st=/%20/g,ct=/\[\]$/,ut=/\r?\n/g,lt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ft=/^(?:select|textarea)/i;function dt(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||ct.test(e)?r(e,i):dt(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)dt(e+"["+i+"]",t[i],n,r)}b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ft.test(this.nodeName)||lt.test(this.type))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e,n){return{name:t.name,value:e.replace(ut,"\r\n")}}):{name:t.name,value:n.replace(ut,"\r\n")}}).get()}}),b.param=function(e,t){var n,r=[],i=function(e,t){t=b.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===o&&(t=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){i(this.name,this.value)});else for(n in e)dt(n,e[n],t,i);return r.join("&").replace(st,"+")};var pt,ht,gt=/#.*$/,mt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,vt=/^(?:GET|HEAD)$/,yt=/^\/\//,bt=/\?/,_t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,St=/([?&])_=[^&]*/,Ct=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,wt=b.fn.load,Tt={},Et={},xt=["*/"]+["*"];try{ht=u.href}catch(e){(ht=c.createElement("a")).href="",ht=ht.href}function kt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i,o=t.toLowerCase().split(C),a=0,s=o.length;if(b.isFunction(n))for(;a<s;a++)r=o[a],(i=/^\+/.test(r))&&(r=r.substr(1)||"*"),(e[r]=e[r]||[])[i?"unshift":"push"](n)}}function At(e,t,n,r,i,a){i=i||t.dataTypes[0],(a=a||{})[i]=!0;for(var s,c=e[i],u=0,l=c?c.length:0,f=e===Tt;u<l&&(f||!s);u++)"string"==typeof(s=c[u](t,n,r))&&(!f||a[s]?s=o:(t.dataTypes.unshift(s),s=At(e,t,n,r,s,a)));return!f&&s||a["*"]||(s=At(e,t,n,r,"*",a)),s}function Rt(e,t){var n,r,i=b.ajaxSettings.flatOptions||{};for(n in t)t[n]!==o&&((i[n]?e:r||(r={}))[n]=t[n]);r&&b.extend(!0,e,r)}pt=Ct.exec(ht.toLowerCase())||[],b.fn.load=function(e,t,n){if("string"!=typeof e&&wt)return wt.apply(this,arguments);if(!this.length)return this;var r,i,a,s=this,c=e.indexOf(" ");return c>=0&&(r=e.slice(c,e.length),e=e.slice(0,c)),b.isFunction(t)?(n=t,t=o):t&&"object"==typeof t&&(i="POST"),b.ajax({url:e,type:i,dataType:"html",data:t,complete:function(e,t){n&&s.each(n,a||[e.responseText,t,e])}}).done(function(e){a=arguments,s.html(r?b("<div>").append(e.replace(_t,"")).find(r):e)}),this},b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,t){b[t]=function(e,n,r,i){return b.isFunction(n)&&(i=i||r,r=n,n=o),b.ajax({type:t,url:e,data:n,success:r,dataType:i})}}),b.extend({getScript:function(e,t){return b.get(e,o,t,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?Rt(e,b.ajaxSettings):(t=e,e=b.ajaxSettings),Rt(e,t),e},ajaxSettings:{url:ht,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(pt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":xt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":i.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:kt(Tt),ajaxTransport:kt(Et),ajax:function(e,t){"object"==typeof e&&(t=e,e=o),t=t||{};var n,r,i,a,s,c,u,l,f=b.ajaxSetup({},t),d=f.context||f,p=d!==f&&(d.nodeType||d instanceof b)?b(d):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=f.statusCode||{},v={},y={},_=0,S="canceled",w={readyState:0,setRequestHeader:function(e,t){if(!_){var n=e.toLowerCase();e=y[n]=y[n]||e,v[e]=t}return this},getAllResponseHeaders:function(){return 2===_?r:null},getResponseHeader:function(e){var t;if(2===_){if(!i)for(i={};t=mt.exec(r);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return t===o?null:t},overrideMimeType:function(e){return _||(f.mimeType=e),this},abort:function(e){return e=e||S,a&&a.abort(e),T(0,e),this}};function T(e,t,i,c){var l,v,y,S,C,T=t;2!==_&&(_=2,s&&clearTimeout(s),a=o,r=c||"",w.readyState=e>0?4:0,i&&(S=function(e,t,n){var r,i,a,s,c=e.contents,u=e.dataTypes,l=e.responseFields;for(i in l)i in n&&(t[l[i]]=n[i]);for(;"*"===u[0];)u.shift(),r===o&&(r=e.mimeType||t.getResponseHeader("content-type"));if(r)for(i in c)if(c[i]&&c[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}s||(s=i)}a=a||s}if(a)return a!==u[0]&&u.unshift(a),n[a]}(f,w,i)),e>=200&&e<300||304===e?(f.ifModified&&((C=w.getResponseHeader("Last-Modified"))&&(b.lastModified[n]=C),(C=w.getResponseHeader("Etag"))&&(b.etag[n]=C)),304===e?(T="notmodified",l=!0):(T=(l=function(e,t){var n,r,i,o,a=e.dataTypes.slice(),s=a[0],c={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(n in e.converters)c[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if("*"!==i){if("*"!==s&&s!==i){if(!(n=c[s+" "+i]||c["* "+i]))for(r in c)if((o=r.split(" "))[1]===i&&(n=c[s+" "+o[0]]||c["* "+o[0]])){!0===n?n=c[r]:!0!==c[r]&&(i=o[0],a.splice(u--,0,i));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+s+" to "+i}}}s=i}return{state:"success",data:t}}(f,S)).state,v=l.data,l=!(y=l.error))):(y=T,T&&!e||(T="error",e<0&&(e=0))),w.status=e,w.statusText=(t||T)+"",l?h.resolveWith(d,[v,T,w]):h.rejectWith(d,[w,T,y]),w.statusCode(m),m=o,u&&p.trigger("ajax"+(l?"Success":"Error"),[w,f,l?v:y]),g.fireWith(d,[w,T]),u&&(p.trigger("ajaxComplete",[w,f]),--b.active||b.event.trigger("ajaxStop")))}if(h.promise(w),w.success=w.done,w.error=w.fail,w.complete=g.add,w.statusCode=function(e){var t;if(e)if(_<2)for(t in e)m[t]=[m[t],e[t]];else t=e[w.status],w.always(t);return this},f.url=((e||f.url)+"").replace(gt,"").replace(yt,pt[1]+"//"),f.dataTypes=b.trim(f.dataType||"*").toLowerCase().split(C),null==f.crossDomain&&(c=Ct.exec(f.url.toLowerCase())||!1,f.crossDomain=c&&c.join(":")+(c[3]?"":"http:"===c[1]?80:443)!==pt.join(":")+(pt[3]?"":"http:"===pt[1]?80:443)),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=b.param(f.data,f.traditional)),At(Tt,f,t,w),2===_)return w;if(u=f.global,f.type=f.type.toUpperCase(),f.hasContent=!vt.test(f.type),u&&0==b.active++&&b.event.trigger("ajaxStart"),!f.hasContent&&(f.data&&(f.url+=(bt.test(f.url)?"&":"?")+f.data,delete f.data),n=f.url,!1===f.cache)){var E=b.now(),x=f.url.replace(St,"$1_="+E);f.url=x+(x===f.url?(bt.test(f.url)?"&":"?")+"_="+E:"")}for(l in(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),f.ifModified&&(n=n||f.url,b.lastModified[n]&&w.setRequestHeader("If-Modified-Since",b.lastModified[n]),b.etag[n]&&w.setRequestHeader("If-None-Match",b.etag[n])),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+xt+"; q=0.01":""):f.accepts["*"]),f.headers)w.setRequestHeader(l,f.headers[l]);if(f.beforeSend&&(!1===f.beforeSend.call(d,w,f)||2===_))return w.abort();for(l in S="abort",{success:1,error:1,complete:1})w[l](f[l]);if(a=At(Et,f,t,w)){w.readyState=1,u&&p.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{_=1,a.send(v,T)}catch(e){if(!(_<2))throw e;T(-1,e)}}else T(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var It=[],Mt=/\?/,Nt=/(=)\?(?=&|$)|\?\?/,Ot=b.now();b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=It.pop()||b.expando+"_"+Ot++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(e,t,n){var r,a,s,c=e.data,u=e.url,l=!1!==e.jsonp,f=l&&Nt.test(u),d=l&&!f&&"string"==typeof c&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Nt.test(c);if("jsonp"===e.dataTypes[0]||f||d)return r=e.jsonpCallback=b.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a=i[r],f?e.url=u.replace(Nt,"$1"+r):d?e.data=c.replace(Nt,"$1"+r):l&&(e.url+=(Mt.test(u)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||b.error(r+" was not called"),s[0]},e.dataTypes[0]="json",i[r]=function(){s=arguments},n.always(function(){i[r]=a,e[r]&&(e.jsonpCallback=t.jsonpCallback,It.push(r)),s&&b.isFunction(a)&&a(s[0]),s=a=o}),"script"}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===o&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(r,i){(t=c.createElement("script")).async="async",e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,r){(r||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,n&&t.parentNode&&n.removeChild(t),t=o,r||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(0,1)}}}});var jt,Pt,Lt=!!i.ActiveXObject&&function(){for(var e in jt)jt[e](0,1)},Dt=0;function Ft(){try{return new i.XMLHttpRequest}catch(e){}}b.ajaxSettings.xhr=i.ActiveXObject?function(){return!this.isLocal&&Ft()||function(){try{return new i.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:Ft,Pt=b.ajaxSettings.xhr(),b.extend(b.support,{ajax:!!Pt,cors:!!Pt&&"withCredentials"in Pt}),b.support.ajax&&b.ajaxTransport(function(e){var t;if(!e.crossDomain||b.support.cors)return{send:function(n,r){var a,s,c=e.xhr();if(e.username?c.open(e.type,e.url,e.async,e.username,e.password):c.open(e.type,e.url,e.async),e.xhrFields)for(s in e.xhrFields)c[s]=e.xhrFields[s];e.mimeType&&c.overrideMimeType&&c.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");try{for(s in n)c.setRequestHeader(s,n[s])}catch(e){}c.send(e.hasContent&&e.data||null),t=function(n,i){var s,u,l,f,d;try{if(t&&(i||4===c.readyState))if(t=o,a&&(c.onreadystatechange=b.noop,Lt&&delete jt[a]),i)4!==c.readyState&&c.abort();else{s=c.status,l=c.getAllResponseHeaders(),f={},(d=c.responseXML)&&d.documentElement&&(f.xml=d);try{f.text=c.responseText}catch(n){}try{u=c.statusText}catch(e){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=f.text?200:404}}catch(e){i||r(-1,e)}f&&r(s,u,f,l)},e.async?4===c.readyState?setTimeout(t,0):(a=++Dt,Lt&&(jt||(jt={},b(i).unload(Lt)),jt[a]=t),c.onreadystatechange=t):t()},abort:function(){t&&t(0,1)}}});var Bt,Ut,Vt=/^(?:toggle|show|hide)$/,qt=new RegExp("^(?:([-+])=|)("+_+")([a-z%]*)$","i"),Ht=/queueHooks$/,Gt=[function(e,t,n){var r,i,o,a,s,c,u,l,f=this,d=e.style,p={},h=[],g=e.nodeType&&tt(e);for(r in n.queue||(null==(u=b._queueHooks(e,"fx")).unqueued&&(u.unqueued=0,l=u.empty.fire,u.empty.fire=function(){u.unqueued||l()}),u.unqueued++,f.always(function(){f.always(function(){u.unqueued--,b.queue(e,"fx").length||u.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==at(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.done(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),t)if(o=t[r],Vt.exec(o)){if(delete t[r],o===(g?"hide":"show"))continue;h.push(r)}if(a=h.length)for(s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),g?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;for(t in b.removeData(e,"fxshow",!0),p)b.style(e,t,p[t])}),r=0;r<a;r++)i=h[r],c=f.createTween(i,g?s[i]:0),p[i]=s[i]||b.style(e,i),i in s||(s[i]=c.start,g&&(c.end=c.start,c.start="width"===i||"height"===i?1:0))}],Wt={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=qt.exec(t),a=i.cur(),s=+a||0,c=1,u=20;if(o){if(n=+o[2],"px"!==(r=o[3]||(b.cssNumber[e]?"":"px"))&&s){s=b.css(i.elem,e,!0)||n||1;do{s/=c=c||".5",b.style(i.elem,e,s+r)}while(c!==(c=i.cur()/a)&&1!==c&&--u)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function zt(){return setTimeout(function(){Bt=o},0),Bt=b.now()}function $t(e,t,n){var r,i=0,o=Gt.length,a=b.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Bt||zt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),i=0,o=c.tweens.length;i<o;i++)c.tweens[i].run(r);return a.notifyWith(e,[c,r,n]),r<1&&o?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Bt||zt(),duration:n.duration,tweens:[],createTween:function(t,n,r){var i=b.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){for(var n=0,r=t?c.tweens.length:0;n<r;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(r=b.camelCase(n),i=t[r],o=e[n],b.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=b.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);i<o;i++)if(r=Gt[i].call(c,e,u,c.opts))return r;return function(e,t){b.each(t,function(t,n){for(var r=(Wt[t]||[]).concat(Wt["*"]),i=0,o=r.length;i<o;i++)if(r[i].call(e,t,n))return})}(c,u),b.isFunction(c.opts.start)&&c.opts.start.call(e,c),b.fx.timer(b.extend(s,{anim:c,queue:c.opts.queue,elem:e})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function Jt(e,t,n,r,i){return new Jt.prototype.init(e,t,n,r,i)}function Xt(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=Qe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}b.Animation=b.extend($t,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],Wt[n]=Wt[n]||[],Wt[n].unshift(t)},prefilter:function(e,t){t?Gt.unshift(e):Gt.push(e)}}),b.Tween=Jt,Jt.prototype={constructor:Jt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=Jt.propHooks[this.prop];return e&&e.get?e.get(this):Jt.propHooks._default.get(this)},run:function(e){var t,n=Jt.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Jt.propHooks._default.set(this),this}},Jt.prototype.init.prototype=Jt.prototype,Jt.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Jt.propHooks.scrollTop=Jt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(r,i,o){return null==r||"boolean"==typeof r||!e&&b.isFunction(r)&&b.isFunction(i)?n.apply(this,arguments):this.animate(Xt(t,!0),r,i,o)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(tt).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=$t(this,b.extend({},e),o);i&&t.stop(!0)};return i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=o),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Ht.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||b.dequeue(this,e)})}}),b.each({slideDown:Xt("show"),slideUp:Xt("hide"),slideToggle:Xt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=Jt.prototype.init,b.fx.tick=function(){for(var e,t=b.timers,n=0;n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||b.fx.stop()},b.fx.timer=function(e){e()&&b.timers.push(e)&&!Ut&&(Ut=setInterval(b.fx.tick,b.fx.interval))},b.fx.interval=13,b.fx.stop=function(){clearInterval(Ut),Ut=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length});var Kt=/^(?:body|html)$/i;function Qt(e){return b.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}b.fn.offset=function(e){if(arguments.length)return e===o?this:this.each(function(t){b.offset.setOffset(this,e,t)});var t,n,r,i,a,s,c,u={top:0,left:0},l=this[0],f=l&&l.ownerDocument;return f?(n=f.body)===l?b.offset.bodyOffset(l):(t=f.documentElement,b.contains(t,l)?(void 0!==l.getBoundingClientRect&&(u=l.getBoundingClientRect()),r=Qt(f),i=t.clientTop||n.clientTop||0,a=t.clientLeft||n.clientLeft||0,s=r.pageYOffset||t.scrollTop,c=r.pageXOffset||t.scrollLeft,{top:u.top+s-i,left:u.left+c-a}):u):void 0},b.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return b.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(b.css(e,"marginTop"))||0,n+=parseFloat(b.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=b(e),s=a.offset(),c=b.css(e,"top"),u=b.css(e,"left"),l={},f={};("absolute"===r||"fixed"===r)&&b.inArray("auto",[c,u])>-1?(i=(f=a.position()).top,o=f.left):(i=parseFloat(c)||0,o=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(l.top=t.top-s.top+i),null!=t.left&&(l.left=t.left-s.left+o),"using"in t?t.using.call(e,l):a.css(l)}},b.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=Kt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(b.css(e,"marginTop"))||0,n.left-=parseFloat(b.css(e,"marginLeft"))||0,r.top+=parseFloat(b.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(b.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||c.body;e&&!Kt.test(e.nodeName)&&"static"===b.css(e,"position");)e=e.offsetParent;return e||c.body})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);b.fn[e]=function(r){return b.access(this,function(e,r,i){var a=Qt(e);if(i===o)return a?t in a?a[t]:a.document.documentElement[r]:e[r];a?a.scrollTo(n?b(a).scrollLeft():i,n?i:b(a).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,t){b.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){b.fn[r]=function(r,i){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===i?"margin":"border");return b.access(this,function(t,n,r){var i;return b.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===o?b.css(t,n,r,s):b.style(t,n,r,s)},t,a?r:o,a,null)}})}),i.jQuery=i.$=b,n(14)&&n(14).jQuery&&((r=function(){return b}.apply(t,[]))===o||(e.exports=r))}(window)},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(69),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(9))},function(e,t,n){"use strict";(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(1),i=n(36);return t.Model.extend({defaults:{isPinned:!1,unreadMessages:0,isOpenedChat:!1},collectionProps:{connections:i.Collection},sync:function(e,t,n){},destroy:function(e){t.Model.prototype.destroy.call(this,e)},set:function(e,n,i){var o,a=this,s=function(e){return r.object(r.map(e,function(e,n){if(!a.collectionProps[n])return[n,e];if(e instanceof t.Collection)return[n,e];var r=a.get(n);return r.set(e),[n,r]}))};"object"==typeof e?(this._collectionsInitialized||(t.Model.prototype.set.call(a,r.object(r.map(a.collectionProps,function(e,t){return[t,new e]})),i),this._collectionsInitialized=!0),i=n,o=s(e),t.Model.prototype.set.call(a,o,i)):void 0!==(o=s(r.object([e],[n])))[e]&&t.Model.prototype.set.call(a,e,n,i)},isEntered:function(){return!r.any(this.get("connections").toJSON(),function(e){return"Skinny"==e.endpoint})||r.any(this.get("connections").toJSON(),function(e){return e.capabilities.length>0})}},{translationMatrixShort:function(e,t){return{dataObject:e,chatEndpointGuid:e.ch,callguid:e.c,id:e.E1,name:e.n,type:e.t||"endpoint",callQuality:parseInt(e.C1,10),isLeader:1==e.L1,isSelf:t&&e.E1==t.id,endpointType:e.e,isSpeaking:"1"==e.T,isPresenting:"1"==e.C2,isSecure:"Freeswitch"==e.e||"Phone"==e.e||"PartnerParticipant"==e.e||"1"==e.S1,isPhone:"Phone"==e.e||"PartnerParticipant"==e.e,meetingId:e.m,isVisible:!e.v||"1"==e.v,isChatOnly:"SkinnyChat"==e.e,inWaitingRoom:!e.L2||"1"==e.L2,isPresentationLayout:"2"==e.L2,isVideoLayout:"4"==e.L2,currentLayout:e.S2,isCurrentlyShowingVideo:"1"==e.V1,isSendingVideo:"1"!=e.V2,isServerMutingVideo:"1"==e.V3,isVideoSeen:"1"!=e.V2&&"1"!=e.V3,isCurrentlyShowingAudio:"1"==e.A1,isSendingAudio:"1"!=e.A2,isServerMutingAudio:"1"==e.A3,isAudioHeard:"1"!=e.A2&&"1"!=e.A3,alerts:e.a?e.a.split(","):void 0,audioRecvCodec:void 0!==e.A4&&""!==e.A4?e.A4:null,audioSendCodec:void 0!==e.A5&&""!==e.A5?e.A5:null,videoRecvCodec:void 0!==e.V4&&""!==e.V4?e.V4:null,videoRecvHeight:e.V5&&""!==e.V5?parseInt(e.V5,10):null,videoRecvWidth:e.V6&&""!==e.V6?parseInt(e.V6,10):null,videoSendCodec:void 0!==e.V7&&""!==e.V7?e.V7:null,videoSendHeight:e.V8&&""!==e.V8?parseInt(e.V8,10):null,videoSendWidth:e.V9&&""!==e.V9?parseInt(e.V9,10):null,contentRecvHeight:e.C3&&""!==e.C3?parseInt(e.C3,10):null,contentRecvWidth:e.C4&&""!==e.C4?parseInt(e.C4,10):null,videoShareRecvHeight:e.VideoShareRecvHeight&&""!==e.VideoShareRecvHeight?parseInt(e.VideoShareRecvHeight,10):null,videoShareRecvWidth:e.VideoShareRecvWidth&&""!==e.VideoShareRecvWidth?parseInt(e.VideoShareRecvWidth,10):null,pinnedGuid:e.P1,connections:e.C5?r.map(e.C5,function(e){return i.translationMatrix(e)}):null,rdcControllee:void 0!==e.r&&"None"!==e.r?e.r:null,rdcVersion:e.R1,isRdcControllerCapable:"1"==e.R2,isRdcControlleeCapable:"1"==e.R3}},translateAttributes:function(e,t){var n=t&&t.get("dataObject")?t.get("dataObject"):{},i=r.extend(n,e);return t&&t.get("id")&&(i.id=t.get("id")),this.translationMatrixShort(i,t)},getId:function(e){return e.E1}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){"use strict";(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(1),i=n(18);return t.Collection.extend({model:i,initialize:function(){t.Collection.prototype.initialize.apply(this),r.bindAll(this,"getExistingForRaw"),this.callGuidMap={},this.chatGuidMap={}},comparator:function(e){var t=3;return t=e.get("isLeader")?1:t,(t=e.get("isSelf")?0:t)+(e.get("name")?e.get("name").toLowerCase():"aaa")},sync:function(e,t,n){t.trigger("fetch",e,n)},getExistingForRaw:function(e){return this.get(this.model.getId(e))},getEnteredLength:function(){return this.filter(function(e){return e.isEntered()}).length}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){"use strict";var r;void 0===(r=function(){return{environment:{hostname:"https://bluejeans.com",cert:{key:"",certificate:""}},user:{name:"BJNClient"},events:["meeting","endpoint","chat"]}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";var r,i;r=[n(20)],void 0===(i=function(e){var t=e;return{sipDialout:function(e,n){var r=JSON.stringify({uri:e.sipUrl}),i=new XMLHttpRequest;i||(console.log("sipDialout: XMLHttpRequest is not supported"),n("sipDialout: XMLHttpRequest is not supported")),i.timeout=15e3,i.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status)console.log("MeetingApis: sipDialout Response = "+this.responseText),n(null,this.responseText);else{var e=this.status||408;console.error("MeetingApis: sipDialout Response error ",e),n(e)}}),i.addEventListener("error",function(e){console.error("MeetingApis: sipDialout Response error ",this.err),n(this.err)}),i.addEventListener("abort",function(e){console.error("MeetingApis: sipDialout Response aborted ",this.err),n(this.err)}),i.ontimeout=function(e){console.log("MeetingApis: sipDialout XMLHttpRequest timeout"),n("XMLHttpRequest timeout")},console.log("MeetingApis: sipDialout  Request Body = "+r);var o=t.environment.hostname+"/seamapi/v1/user/"+e.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+e.oauthInfo.scope.meeting.meetingNumericId+"/dialout/pstn?access_token="+encodeURIComponent(e.oauthInfo.access_token);console.log("postRequestUrl = ",o),i.open("POST",o,!0),i.setRequestHeader("X-Foo","header to trigger preflight"),i.setRequestHeader("Content-Type","application/json"),i.send(r)},post:function(e,n){var r=t.environment.hostname+e.url,i=JSON.stringify(e.body);console.log("POST: Request Url = "+r),console.log("POST: Request Body = ",i);var o=new XMLHttpRequest;o||(console.log("POST: XMLHttpRequest is not supported"),n("POST: XMLHttpRequest is not supported")),o.timeout=15e3,o.addEventListener("readystatechange",function(){if(4===this.readyState)if(200===this.status||201===this.status)console.log("POST: Response success = "+this.responseText),n(null,this.responseText);else{var e=this.status||408;console.error("POST: Response error = ",e),n({status:e})}}),o.addEventListener("error",function(e){console.log("POST: onError = ",e),n(e)}),o.addEventListener("abort",function(e){console.log("POST: onAbort = ",e),n(e)}),o.ontimeout=function(){console.log("POST: onTimeout"),n({status:408,error:"POST timeout"})},o.open("POST",r,!0),o.setRequestHeader("X-Foo","header to trigger preflight"),o.setRequestHeader("Content-Type","application/json"),o.send(i)}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(e){var t=n(1),r=n(15),i=n(2),o=n(4),a=(n(0),n(3)),s=n(7),c=n(6),u=n(8),l=n(11),f=n(41),d=n(13),p=n(12),h=n(10),g=n(5);return new(i.Class({config:{chromeMediaConstraints:{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:1920,maxHeight:1080},optional:[{maxFrameRate:5},{minFrameRate:5},{googTemporalLayeredScreencast:!0}]}},ffMediaConstraints:{audio:!1,video:{mediaSource:"screen",width:{max:"1920"},height:{max:"1080"},frameRate:{exact:"5"}}}},installationCompletedRetries:0,maxInstallationCompletedRetries:5,constructor:function(e){t.bindAll(this),this.isFirefox="firefox"===g.browser,this.model=new f,this.model.on("change:extensionStatus",this.onExtensionStatusChanged),this.model.on("change:tokenStatus",this.onTokenStatusChange)},setParams:function(e){this.model.set("extensionId",e.extensionId),this.config.features=e.features,this.config.extensionID=e.extensionId,this.screenSharingExtensionUrl="https://chrome.google.com/webstore/detail/"+e.extensionId},onExtensionStatusChanged:function(){var e=this.model.get("extensionStatus"),t=c.EXTENSION_STATES;switch(a.debug("RTCScreenSharingManager: Extension status changed to: ",e),e){case t.NOT_INSTALLED:case t.INSTALLING:break;case t.INSTALLED:this.doScreenSharing&&(a.debug("RTCScreenSharingManager: Screen sharing is on, sending msg to extension to get desktop media source ID"),this.getDesktopMediaSourceId());break;case t.IFRAME_INSTALL_FAILED:case t.INSTALL_FAILED:this.model.set("screenShareState",u.SCREEN_SHARING_STATES.INSTALL_EXTENSION_FAILED);break;case t.INSTALL_CANCELLED:case t.REQUEST_FAILED:}},startScreenSharing:function(e){var t=this.model.isExtensionInstalled(),n=e||{};this.isFirefox?(this.initFFScreenSharing(),this.doScreenSharing=!0):(this.doScreenSharing=!0,this.installationCompletedRetries=0,this.model.set("extensionStatus",c.EXTENSION_STATES.NOT_INSTALLED),t||n.skipInlineInstallation?(a.debug('RTCScreenSharingManager: Content Scripts have been injected, "ping" extension to check if extension is not uninstalled'),this.pingAndStartSharing()):(a.warn("RTCScreenSharingManager: Content Scripts have not been injected, extension has not been installed"),"chrome"===g.browser?this.triggerInlineInstallation():"opera"===g.browser&&this.triggerOperaAddOnInlineInstallation(e)))},stopScreenSharing:function(){this.doScreenSharing=!1;var e=this.model.get("localContentStream");e?(a.debug("RTCScreenSharingManager: Stopping screen sharing now"),e.getTracks().forEach(function(e){e.stop()}),this.isFirefox&&this.reset()):(a.debug("RTCScreenSharingManager: Screen sharing has already been stopped"),this.reset())},triggerInlineInstallation:function(){var e=this;try{r("head").append('<link rel="chrome-webstore-item" href='+this.screenSharingExtensionUrl+">"),window.chrome.webstore.install(this.screenSharingExtensionUrl,function(t){a.debug("RTCScreenSharingManager: Chrome inline installation was successful."),e.model.set("extensionStatus",c.EXTENSION_STATES.INSTALLING),e.pingAndStartSharing()},function(t){e.handleInstallationFailure(t)})}catch(t){e.handleInstallationFailure(t)}},triggerOperaAddOnInlineInstallation:function(e){var t=this;try{opr.addons.installExtension(t.config.extensionID,function(e){a.debug("RTCScreenSharingManager: Opera inline installation was successful."),t.model.set("extensionStatus",c.EXTENSION_STATES.INSTALLING),t.pingAndStartSharing()},function(e){t.handleInstallationFailure(e)})}catch(e){t.handleInstallationFailure(e)}},handleInstallationFailure:function(e){var t,n=c.EXTENSION_STATES;switch(a.error("RTCScreenSharingManager: Inline installation of Chrome extension failed: "+e),e){case"User cancelled install":t=n.INSTALL_CANCELLED;break;case"Chrome Web Store installations can only be started by the top frame.":t=n.IFRAME_INSTALL_FAILED;break;case"Installs can only be initiated by one of the Chrome Web Store item's verified sites.":t=n.INSTALL_FAILED_DOMAIN_UNVERIFIED;break;default:t=n.INSTALL_FAILED}this.model.set("extensionStatus",t)},pingAndStartSharing:function(){var e=this;this.installationCompletedRetries<this.maxInstallationCompletedRetries?window.setTimeout(function(){e.installationCompletedRetries++,a.debug('RTCScreenSharingManager: Sending "ping" to extension. Attempt no. ',e.installationCompletedRetries),e.pingExtension(function(t){e.installationCompletedRetries=0,e.onPingSuccess(t)},function(t){"emptyResponse"===t?e.pingAndStartSharing():e.model.set("extensionStatus",c.EXTENSION_STATES.REQUEST_FAILED)})},500):this.model.set("extensionStatus",c.EXTENSION_STATES.INSTALL_FAILED)},pingExtension:function(e,t){this.sendMessageToExtension({type:"ping"}).then(e,t)},onPingSuccess:function(e){"pong"===e.type&&this.doScreenSharing&&(this.model.set("extensionStatus",c.EXTENSION_STATES.INSTALLED,{silent:!0}),this.model.trigger("change:extensionStatus",this.model))},getDesktopMediaSourceId:function(){var e=o.defer(),t=this;return this.model.set("tokenStatus",s.TOKEN_STATUS.WAITING),this.sendMessageToExtension({type:"getScreen",options:this.config.features.applicationSharing?["screen","window"]:["screen"]}).then(function(e){switch(e.type){case"gotScreenSharing":t.model.set("chromeMediaSourceId",e.sourceId),t.requestToken();break;case"canceledGetScreen":t.model.set("tokenStatus",s.TOKEN_STATUS.CANCELLED);break;default:a.error('RTCScreenSharingManager: Unhandled message type for "getScreen" API'),t.model.set("tokenStatus",s.TOKEN_STATUS.CANCELLED)}},function(e){}),e.promise},sendMessageToExtension:function(e){var n=o.defer(),r=t.extend({targetModule:"RTCDesktopMedia"},e);try{window.chrome.runtime.sendMessage(this.model.get("extensionId"),r,t.bind(function(e){a.debug("RTCScreenSharingManager: Response from extension: "+JSON.stringify(e)),t.isUndefined(e)?n.reject("emptyResponse"):n.resolve(e)},this))}catch(e){a.error("RTCScreenSharingManager: Exception occured while sending message to Extension: ",e),n.reject("error")}return n.promise},initFFScreenSharing:function(){this.model.set("tokenStatus",s.TOKEN_STATUS.WAITING),this.getDesktopMediaStream()},getDesktopMediaStream:function(){var e=this.config.features.applicationSharing?"application":"screen";this.config.ffMediaConstraints.video.mediaSource=e;var t=this.isFirefox?this.config.ffMediaConstraints:l.deepMergeObjects(this.config.chromeMediaConstraints,{video:{mandatory:{chromeMediaSourceId:this.model.get("chromeMediaSourceId")}}});window.navigator.getUserMedia(t,this.getDesktopMediaSuccess,this.getDesktopMediaError)},getDesktopMediaSuccess:function(e){a.debug("RTCScreenSharingManager: Local Content has been acquired"),this.isFirefox&&this.requestToken(),e.bjn_label="content_stream",e.getVideoTracks()[0].onended=t.bind(function(){a.debug("RTCScreenSharingManager: Local Content Stream has ended."),this.reset(),this.isFirefox||this.sendMessageToExtension({type:"focusTab"})},this),this.model.set("localContentStream",e)},getDesktopMediaError:function(e){a.error("Failed to get desktop media stream, error: ",e);var t=!1;this.model.get("tokenStatus")===s.TOKEN_STATUS.CANCELLED&&(t=!0),this.model.set("tokenStatus",s.TOKEN_STATUS.CANCELLED),t&&this.model.trigger("change:firefoxScreenShareCancelled",this.model),this.stopScreenSharing()},requestToken:function(){var e=s.requestTokenMsg();d.sendMsg(e),h.getCurrentCallState()!==c.BJ_CALLSTATES.IDLE&&p.onBlueJayRequest(e)},releaseToken:function(){var e=s.releaseTokenMsg();d.sendMsg(e),p.onBlueJayRequest(e),this.model.set("tokenStatus",s.TOKEN_STATUS.RELEASED)},handleTokenMessage:function(e){var t=e.params.type;switch(t){case s.TOKEN_TYPES.STATUS:this.model.set("tokenStatus",e.params.status);break;case s.TOKEN_TYPES.TOKENINDICATION:case s.TOKEN_TYPES.CONTENTINDICATION:this.model.set("presentationToken",e.params);break;default:a.error("RTCScreenSharingManager: Invalid type passed in token msg: ",t)}},onTokenStatusChange:function(e){switch(e.get("tokenStatus")){case s.TOKEN_STATUS.GRANTED:this.doScreenSharing?this.isFirefox||this.getDesktopMediaStream():(a.info("RTCScreenSharingManager: Screen sharing was cancelled while acquiring token"),this.releaseToken());break;case s.TOKEN_STATUS.REVOKED:a.debug("RTCScreenSharingManager: Token has been 'revoked', must have been hijacked!"),this.stopScreenSharing()}},sendPresentaionRatio:function(e){var t={type:"presentationratio",ratio:{content:e.content,video:e.video}},n=s.getInfoMsg(t);d.sendMsg(n),p.onBlueJayRequest(n)},reset:function(){this.doScreenSharing=!1,this.model.get("tokenStatus"),this.releaseToken(),this.model.set("localContentStream",null),this.model.set("chromeMediaSourceId",null)},close:function(){this.stopScreenSharing()}}))}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,n){var r=n.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(e){return null!=e.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*):(.*)/,names:["id","attribute","value"],format:"ssrc:%d %s:%s"},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{push:"invalid",names:["value"]}]};Object.keys(r).forEach(function(e){r[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(e,t,n){"use strict";function r(e,t,n){var r=e.split("\r\n"),i=d(r,"m=",n);if(null===i)return e;var o=p(r,i+1,-1,"m=");null===o&&(o=r.length);var a=p(r,i+1,o,"c=");if(null===a)return e;var s=p(r,a+1,o,"b=AS");s&&r.splice(s,1);var c="b=AS:"+t;return r.splice(a+1,0,c),e=r.join("\r\n")}function i(e,t){e=e.split(" ");for(var n=0;n<e.length;++n)e[n]===t.toString()&&e.splice(n,1);return e.join(" ")}function o(e,t){var n=d(e,"a=rtpmap",t.toString());if(null===n)return e;e.splice(n,1);var r=d(e,"m=","video");return null===r?e:(e[r]=i(e[r],t),e)}function a(e,t,n,r){if(!r)return e;var i=e.split("\r\n"),o=d(i,"m=",t);if(null===o)return e;var a=h(i,r);return a&&(i[o]=m(i[o],a)),e=i.join("\r\n")}function s(e,t,n,r){var i=e.split("\r\n"),o=f(i,t),a={};if(null===o){var s=d(i,"a=rtpmap",t);if(null===s)return e;var c=g(i[s]);a.pt=c.toString(),a.params={},a.params[n]=r,i.splice(s+1,0,l(a))}else(a=u(i[o])).params[n]=r,i[o]=l(a);return e=i.join("\r\n")}function c(e,t,n){var r=e.split("\r\n"),i=f(r,t);if(null===i)return e;var o=u(r[i]);delete o.params[n];var a=l(o);return null===a?r.splice(i,1):r[i]=a,e=r.join("\r\n")}function u(e){var t={},n=e.indexOf(" "),r=e.substring(n+1).split("; "),i=new RegExp("a=fmtp:(\\d+)"),o=e.match(i);if(!o||2!==o.length)return null;t.pt=o[1];for(var a={},s=0;s<r.length;++s){var c=r[s].split("=");2===c.length&&(a[c[0]]=c[1])}return t.params=a,t}function l(e){if(!e.hasOwnProperty("pt")||!e.hasOwnProperty("params"))return null;var t=e.pt,n=e.params,r=[],i=0;for(var o in n)r[i]=o+"="+n[o],++i;return 0===i?null:"a=fmtp:"+t.toString()+" "+r.join("; ")}function f(e,t){var n=h(e,t);return n?d(e,"a=fmtp:"+n.toString()):null}function d(e,t,n){return p(e,0,-1,t,n)}function p(e,t,n,r,i){for(var o=-1!==n?n:e.length,a=t;a<o;++a)if(0===e[a].indexOf(r)&&(!i||-1!==e[a].toLowerCase().indexOf(i.toLowerCase())))return a;return null}function h(e,t){var n=d(e,"a=rtpmap",t);return n?g(e[n]):null}function g(e){var t=new RegExp("a=rtpmap:(\\d+) [a-zA-Z0-9-]+\\/\\d+"),n=e.match(t);return n&&2===n.length?n[1]:null}function m(e,t){var n=e.split(" "),r=n.slice(0,3);r.push(t);for(var i=3;i<n.length;i++)n[i]!==t&&r.push(n[i]);return r.join(" ")}return{setDefaultCodec:m,setCodecParam:s,maybeSetOpusOptions:function(e,t){return"true"===t.opusStereo?e=s(e,"opus/48000","stereo","1"):"false"===t.opusStereo&&(e=c(e,"opus/48000","stereo")),"true"===t.opusFec?e=s(e,"opus/48000","useinbandfec","1"):"false"===t.opusFec&&(e=c(e,"opus/48000","useinbandfec")),"true"===t.opusDtx?e=s(e,"opus/48000","usedtx","1"):"false"===t.opusDtx&&(e=c(e,"opus/48000","usedtx")),t.opusMaxPbr&&(e=s(e,"opus/48000","maxplaybackrate",t.opusMaxPbr)),e},maybePreferCodec:a,maybePreferVideoReceiveCodec:function(e,t){return a(e,"video",0,t.videoRecvCodec)},maybePreferVideoSendCodec:function(e,t){return a(e,"video",0,t.videoSendCodec)},maybePreferAudioReceiveCodec:function(e,t){return a(e,"audio",0,t.audioRecvCodec)},maybePreferAudioSendCodec:function(e,t){return a(e,"audio",0,t.audioSendCodec)},maybeSetVideoReceiveBitRate:function(e,t){return t.videoRecvBitrate?(t.videoRecvBitrate,r(e,t.videoRecvBitrate,"video")):e},maybeSetVideoSendBitRate:function(e,t){return t.videoSendBitrate?(t.videoSendBitrate,r(e,t.videoSendBitrate,"video")):e},maybeSetAudioReceiveBitRate:function(e,t){return t.audioRecvBitrate?(t.audioRecvBitrate,r(e,t.audioRecvBitrate,"audio")):e},maybeSetAudioSendBitRate:function(e,t){return t.audioSendBitrate?(t.audioSendBitrate,r(e,t.audioSendBitrate,"audio")):e},maybeSetVideoSendInitialBitRate:function(e,t){var n=t.videoSendInitialBitrate;if(!n)return e;var r=n,i=t.videoSendBitrate;if(i&&(n>i&&(n=i,t.videoSendInitialBitrate=n),r=i),null===d(e.split("\r\n"),"m=","video"))return e;var o=t.videoRecvCodec;return e=s(e=s(e,o,"x-google-min-bitrate",t.videoSendInitialBitrate.toString()),o,"x-google-max-bitrate",r.toString())},maybeSetTrickleIceAttr:function(e){var t=e.split("\r\n"),n=d;return null===(n=d(t,"m="))?e:p(t,0,n,"a=ice-options","trickle")?e:(t.splice(n-1,0,"a=ice-options:trickle"),e=t.join("\r\n"))},maybeRemoveVideoFec:function(e,t){if("false"!==t.videoFec)return e;var n=e.split("\r\n"),r=d(n,"a=rtpmap","red");if(null===r)return e;var a=g(n[r]);if(n=function(e,t){var n=d(e,"a=rtpmap","ulpfec");if(null===n)return e;var r=g(e[n]);e.splice(n,1);var o=d(e,"m=","video");return null===o?e:(e[o]=i(e[o],r),e)}(n=o(n,a)),null===(r=d(n,"a=fmtp",a.toString())))return e;var s=u(n[r]).pt;return null===s?e:(n.splice(r,1),(n=o(n,s)).join("\r\n"))},maybeReplaceVideoPortNumber:function(e,t){var n=e.split("\r\n"),r=d(n,"m=","video 0");return null===r?n.join("\r\n"):(n[r]=function(e,t){return(e=e.split(" "))[1]=t,e.join(" ")}(n[r],t),n.join("\r\n"))},maybeRemoveCodecFromSDP:function(e,t){var n=e.split("\r\n"),r=d(n,"m=video");if(null===r)return e;if(-1==n[r].search(t))return e;n[r]=n[r].replace(" "+t,"");var i=d(n,"a=rtpmap:"+t);i&&n.splice(i,1);var o=d(n,"a=fmtp:"+t);return o&&n.splice(o,1),e=n.join("\r\n")}}})?r.call(t,n,t,e):r)||(e.exports=i)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(1),i=(n(3),n(5));return t.Model.extend({STATIC:{LABELS:{VIDEO_TRACK:"video_label",CONTENT_TRACK:"content_label"}},defaults:{audioInputLevel:null,audioPacketsSent:null,audioPacketsRecvd:null,videoRecvHeight:null,videoRecvWidth:null,contentRecvHeight:null,contentRecvWidth:null},updateStats:function(e){var t=[];Object.keys(e).forEach(function(n){var r={},i=e[n];Object.keys(i).forEach(function(e){r[e]=i[e]}),t.push(r)}),this.parseStats(t)},parseStats:function(e){var t={},n=this;r.each(e,function(e,o,a){if("firefox"!==i.browser){if("ssrc"===e.type)if(e.id&&-1!==e.id.indexOf("_send")&&(r.isUndefined(e.audioInputLevel)||(t.audioInputLevel=e.audioInputLevel,t.audioPacketsSent=e.packetsSent)),e.id&&-1!==e.id.indexOf("_recv"))r.isUndefined(e.audioOutputLevel)||(t.audioPacketsRecvd=e.packetsReceived);else switch(e.googTrackId){case n.STATIC.LABELS.VIDEO_TRACK:t.videoRecvHeight=e.googFrameHeightReceived?parseInt(e.googFrameHeightReceived,10):null,t.videoRecvWidth=e.googFrameWidthReceived?parseInt(e.googFrameWidthReceived,10):null;break;case n.STATIC.LABELS.CONTENT_TRACK:t.contentRecvHeight=e.googFrameHeightReceived?parseInt(e.googFrameHeightReceived,10):null,t.contentRecvWidth=e.googFrameWidthReceived?parseInt(e.googFrameWidthReceived,10):null}}else"outboundrtp"===e.type&&"audio"===e.mediaType?t.audioPacketsSent=e.packetsSent:"inboundrtp"===e.type&&"audio"===e.mediaType&&(t.audioPacketsRecvd=e.packetsReceived)}),this.set(t)}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r,i;i=function(){return function(e,t,n){function i(n,a){if(!t[n]){if(!e[n]){if(!a&&"function"==typeof r&&r)return r(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=t[n]={exports:{}};e[n][0].call(s.exports,function(t){var r=e[n][1][t];return i(r||t)},s,s.exports)}return t[n].exports}for(var o="function"==typeof r&&r,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){var r=e("wildemitter"),i=window.AudioContext||window.webkitAudioContext,o=null;t.exports=function(e,t){var n=new r;if(!i)return n;var a,s,c,u=(t=t||{}).smoothing||.1,l=t.interval||50,f=t.threshold,d=t.play,p=t.history||10,h=!0;o||(o=new i),(c=o.createAnalyser()).fftSize=512,c.smoothingTimeConstant=u,s=new Float32Array(c.fftSize),e.jquery&&(e=e[0]),e instanceof HTMLAudioElement||e instanceof HTMLVideoElement?(a=o.createMediaElementSource(e),void 0===d&&(d=!0),f=f||-50):(a=o.createMediaStreamSource(e),f=f||-50),a.connect(c),d&&c.connect(o.destination),n.speaking=!1,n.setThreshold=function(e){f=e},n.setInterval=function(e){l=e},n.stop=function(){h=!1,n.emit("volume_change",-100,f),n.speaking&&(n.speaking=!1,n.emit("stopped_speaking"))},n.speakingHistory=[];for(var g=0;g<p;g++)n.speakingHistory.push(0);var m=function(){setTimeout(function(){if(h){var e=function(e,t){var n=-1/0;e.getFloatFrequencyData(t);for(var r=4,i=t.length;r<i;r++)t[r]>n&&t[r]<0&&(n=t[r]);return n}(c,s);n.emit("volume_change",e,f);var t=0;if(e>f&&!n.speaking){for(var r=n.speakingHistory.length-3;r<n.speakingHistory.length;r++)t+=n.speakingHistory[r];t>=2&&(n.speaking=!0,n.emit("speaking"))}else if(e<f&&n.speaking){for(r=0;r<n.speakingHistory.length;r++)t+=n.speakingHistory[r];0==t&&(n.speaking=!1,n.emit("stopped_speaking"))}n.speakingHistory.shift(),n.speakingHistory.push(0+(e>f)),m()}},l)};return m(),n}},{wildemitter:2}],2:[function(e,t,n){function r(){this.callbacks={}}t.exports=r,r.prototype.on=function(e,t,n){var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},r.prototype.once=function(e,t,n){var r=this,i=3===arguments.length,o=i?arguments[1]:void 0,a=i?arguments[2]:arguments[1];return this.on(e,o,function t(){r.off(e,t),a.apply(this,arguments)}),this},r.prototype.releaseGroup=function(e){var t,n,r,i;for(t in this.callbacks)for(n=0,r=(i=this.callbacks[t]).length;n<r;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},r.prototype.off=function(e,t){var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),this):this},r.prototype.emit=function(e){var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],a=this.getWildcardCallbacks(e);if(o)for(t=0,n=(r=o.slice()).length;t<n&&r[t];++t)r[t].apply(this,i);if(a)for(n=a.length,t=0,n=(r=a.slice()).length;t<n&&r[t];++t)r[t].apply(this,[e].concat(i));return this},r.prototype.getWildcardCallbacks=function(e){var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}},{}]},{},[1])(1)},"function"==typeof bootstrap?bootstrap("hark",i):e.exports=i()},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){(function(e,r){var i;
/**
 * @license
 * lodash 3.0.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
/**
 * @license
 * lodash 3.0.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -d -o ./index.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.7.0 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */
(function(){var o,a,s,c=1,u=2,l=4,f=8,d=16,p=32,h=64,g=128,m=256,v="Expected a function",y="__lodash_placeholder__",b="[object Arguments]",_="[object Array]",S="[object Boolean]",C="[object Date]",w="[object Error]",T="[object Function]",E="[object Number]",x="[object Object]",k="[object RegExp]",A="[object String]",R="[object ArrayBuffer]",I="[object Float32Array]",M="[object Float64Array]",N="[object Int8Array]",O="[object Int16Array]",j="[object Int32Array]",P="[object Uint8Array]",L="[object Uint8ClampedArray]",D="[object Uint16Array]",F="[object Uint32Array]",B=/\b__p \+= '';/g,U=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39|#96);/g,H=/[&<>"'`]/g,G=RegExp(q.source),W=RegExp(H.source),z=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,X=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,K=/\w*$/,Q=/^\s*function[ \n\r\t]+\w/,Y=/^0[xX]/,Z=/^\[object .+?Constructor\]$/,ee=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,te=/($^)/,ne=/[.*+?^${}()|[\]\/\\]/g,re=RegExp(ne.source),ie=/\bthis\b/,oe=/['\n\r\u2028\u2029\\]/g,ae=(a="[A-Z\\xc0-\\xd6\\xd8-\\xde]",s="[a-z\\xdf-\\xf6\\xf8-\\xff]+",RegExp(a+"{2,}(?="+a+s+")|"+a+"?"+s+"|"+a+"+|[0-9]+","g")),se=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],ce=-1,ue={};ue[I]=ue[M]=ue[N]=ue[O]=ue[j]=ue[P]=ue[L]=ue[D]=ue[F]=!0,ue[b]=ue[_]=ue[R]=ue[S]=ue[C]=ue[w]=ue[T]=ue["[object Map]"]=ue[E]=ue[x]=ue[k]=ue["[object Set]"]=ue[A]=ue["[object WeakMap]"]=!1;var le={};le[b]=le[_]=le[R]=le[S]=le[C]=le[I]=le[M]=le[N]=le[O]=le[j]=le[E]=le[x]=le[k]=le[A]=le[P]=le[L]=le[D]=le[F]=!0,le[w]=le[T]=le["[object Map]"]=le["[object Set]"]=le["[object WeakMap]"]=!1;var fe={leading:!1,maxWait:0,trailing:!1},de={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss"},pe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},he={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},ge={function:!0,object:!0},me={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ve=ge[typeof window]&&window!==(this&&this.window)?window:this,ye=ge[typeof t]&&t&&!t.nodeType&&t,be=ge[typeof e]&&e&&!e.nodeType&&e,_e=ye&&be&&"object"==typeof r&&r;function Se(e,t){if(e!==t){var n=e==e,r=t==t;if(e>t||!n||void 0===e&&r)return 1;if(e<t||!r||void 0===t&&n)return-1}return 0}function Ce(e,t,n){if(t!=t)return Oe(e,n);for(var r=(n||0)-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function we(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Te(e){return"string"==typeof e?e:null==e?"":e+""}function Ee(e){return e.charCodeAt(0)}function xe(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function ke(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function Ae(e,t){return Se(e.criteria,t.criteria)||e.index-t.index}function Re(e,t){for(var n=-1,r=e.criteria,i=t.criteria,o=r.length;++n<o;){var a=Se(r[n],i[n]);if(a)return a}return e.index-t.index}function Ie(e){return de[e]}function Me(e){return pe[e]}function Ne(e){return"\\"+me[e]}function Oe(e,t,n){for(var r=e.length,i=n?t||r:(t||0)-1;n?i--:++i<r;){var o=e[i];if(o!=o)return i}return-1}function je(e){return e&&"object"==typeof e||!1}function Pe(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function Le(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=y,o[++i]=n);return o}function De(e){for(var t=-1,n=e.length;++t<n&&Pe(e.charCodeAt(t)););return t}function Fe(e){for(var t=e.length;t--&&Pe(e.charCodeAt(t)););return t}function Be(e){return he[e]}!_e||_e.global!==_e&&_e.window!==_e&&_e.self!==_e||(ve=_e),be&&be.exports;var Ue=function e(t){var n=(t=t?Ue.defaults(ve.Object(),t,Ue.pick(ve,se)):ve).Array,r=t.Date,i=t.Error,a=t.Function,s=t.Math,de=t.Number,pe=t.Object,he=t.RegExp,ge=t.String,me=t.TypeError,ye=n.prototype,be=pe.prototype,_e=(_e=t.window)&&_e.document,Pe=a.prototype.toString,Ve=fn("length"),qe=be.hasOwnProperty,He=0,Ge=be.toString,We=t._,ze=he("^"+Zr(Ge).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=Fr($e=t.ArrayBuffer)&&$e,Je=Fr(Je=$e&&new $e(0).slice)&&Je,Xe=s.ceil,Ke=t.clearTimeout,Qe=s.floor,Ye=Fr(Ye=pe.getPrototypeOf)&&Ye,Ze=ye.push,et=be.propertyIsEnumerable,tt=Fr(tt=t.Set)&&tt,nt=t.setTimeout,rt=ye.splice,it=Fr(it=t.Uint8Array)&&it,ot=(ye.unshift,Fr(ot=t.WeakMap)&&ot),at=function(){try{var e=Fr(e=t.Float64Array)&&e,n=new e(new $e(10),0,1)&&e}catch(e){}return n}(),st=Fr(st=n.isArray)&&st,ct=Fr(ct=pe.create)&&ct,ut=t.isFinite,lt=Fr(lt=pe.keys)&&lt,ft=s.max,dt=s.min,pt=Fr(pt=r.now)&&pt,ht=Fr(ht=de.isFinite)&&ht,gt=t.parseInt,mt=s.random,vt=de.NEGATIVE_INFINITY,yt=de.POSITIVE_INFINITY,bt=s.pow(2,32)-1,_t=bt-1,St=bt>>>1,Ct=at?at.BYTES_PER_ELEMENT:0,wt=s.pow(2,53)-1,Tt=ot&&new ot;function Et(e){if(je(e)&&!Nr(e)){if(e instanceof xt)return e;if(qe.call(e,"__wrapped__"))return new xt(e.__wrapped__,e.__chain__,Nt(e.__actions__))}return new xt(e)}function xt(e,t,n){this.__actions__=n||[],this.__chain__=!!t,this.__wrapped__=e}var kt=Et.support={};function At(e){this.actions=null,this.dir=1,this.dropCount=0,this.filtered=!1,this.iteratees=null,this.takeCount=yt,this.views=null,this.wrapped=e}function Rt(){this.__data__={}}function It(e){var t=e?e.length:0;for(this.data={hash:ct(null),set:new tt};t--;)this.push(e[t])}function Mt(e,t){var n=e.data;return("string"==typeof t||Dr(t)?n.set.has(t):n.hash[t])?0:-1}function Nt(e,t){var r=-1,i=e.length;for(t||(t=n(i));++r<i;)t[r]=e[r];return t}function Ot(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function jt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Pt(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[++i]=a)}return o}function Lt(e,t){for(var r=-1,i=e.length,o=n(i);++r<i;)o[r]=t(e[r],r,e);return o}function Dt(e){for(var t=-1,n=e.length,r=vt;++t<n;){var i=e[t];i>r&&(r=i)}return r}function Ft(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Bt(e,t){return void 0===e?t:e}function Ut(e,t,n,r){return void 0!==e&&qe.call(r,n)?e:t}function Vt(e,t,n){var r=$r(t);if(!n)return Ht(t,e,r);for(var i=-1,o=r.length;++i<o;){var a=r[i],s=e[a],c=n(s,t[a],a,e,t);(c==c?c===s:s!=s)&&(void 0!==s||a in e)||(e[a]=c)}return e}function qt(e,t){for(var r=-1,i=e.length,a=Un(i),s=t.length,c=n(s);++r<s;){var u=t[r];a?(u=parseFloat(u),c[r]=Fn(u,i)?e[u]:o):c[r]=e[u]}return c}function Ht(e,t,n){n||(n=t,t={});for(var r=-1,i=n.length;++r<i;){var o=n[r];t[o]=e[o]}return t}function Gt(e,t,n){var r=typeof e;return"function"==r?void 0!==t&&function(e){var t=Et.support,n=!(t.funcNames?e.name:t.funcDecomp);if(!n){var r=Pe.call(e);t.funcNames||(n=!Q.test(r)),n||(n=ie.test(r)||Fr(e),hn(e,n))}return n}(e)?Cn(e,t,n):e:null==e?li:"object"==r?ln(e,!n):fn(n?Te(e):e)}function Wt(e,t,n,r,i,o,a){var s;if(n&&(s=i?n(e,r,i):n(e)),void 0!==s)return s;if(!Dr(e))return e;var c=Nr(e);if(c){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&qe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return Nt(e,s)}else{var u=Ge.call(e),l=u==T;if(u!=x&&u!=b&&(!l||i))return le[u]?function(e,t,n){var r=e.constructor;switch(t){case R:return wn(e);case S:case C:return new r(+e);case I:case M:case N:case O:case j:case P:case L:case D:case F:var i=e.buffer;return new r(n?wn(i):i,e.byteOffset,e.length);case E:case A:return new r(e);case k:var o=new r(e.source,K.exec(e));o.lastIndex=e.lastIndex}return o}(e,u,t):i?e:{};if(s=function(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=pe),new t}(l?{}:e),!t)return Ht(e,s,$r(e))}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==e)return a[f];return o.push(e),a.push(s),(c?Ot:on)(e,function(r,i){s[i]=Wt(r,t,n,i,e,o,a)}),s}!function(n){kt.funcDecomp=!Fr(t.WinRTError)&&ie.test(e),kt.funcNames="string"==typeof a.name;try{kt.dom=11===_e.createDocumentFragment().nodeType}catch(e){kt.dom=!1}try{kt.nonEnumArgs=!et.call(arguments,1)}catch(e){kt.nonEnumArgs=!0}}(0,0),Et.templateSettings={escape:z,evaluate:$,interpolate:J,variable:"",imports:{_:Et}};var zt=function(){function e(){}return function(n){if(Dr(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}();function $t(e,t,n,r){if(!Lr(e))throw new me(v);return nt(function(){e.apply(o,gn(n,r))},t)}function Jt(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,o=Dn(),a=o==Ce,s=a&&t.length>=200&&An(t),c=t.length;s&&(o=Mt,a=!1,t=s);e:for(;++i<n;){var u=e[i];if(a&&u==u){for(var l=c;l--;)if(t[l]===u)continue e;r.push(u)}else o(t,u)<0&&r.push(u)}return r}function Xt(e,t){var n=e?e.length:0;if(!Un(n))return on(e,t);for(var r=-1,i=Kn(e);++r<n&&!1!==t(i[r],r,i););return e}function Kt(e,t){var n=e?e.length:0;if(!Un(n))return an(e,t);for(var r=Kn(e);n--&&!1!==t(r[n],n,r););return e}function Qt(e,t){var n=!0;return Xt(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Yt(e,t){var n=[];return Xt(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Zt(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}function en(e,t,n,r){for(var i=(r||0)-1,o=e.length,a=-1,s=[];++i<o;){var c=e[i];if(je(c)&&Un(c.length)&&(Nr(c)||Mr(c))){t&&(c=en(c,t,n));var u=-1,l=c.length;for(s.length+=l;++u<l;)s[++a]=c[u]}else n||(s[++a]=c)}return s}function tn(e,t,n){for(var r=-1,i=Kn(e),o=n(e),a=o.length;++r<a;){var s=o[r];if(!1===t(i[s],s,i))break}return e}function nn(e,t,n){for(var r=Kn(e),i=n(e),o=i.length;o--;){var a=i[o];if(!1===t(r[a],a,r))break}return e}function rn(e,t){return tn(e,t,Jr)}function on(e,t){return tn(e,t,$r)}function an(e,t){return nn(e,t,$r)}function sn(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];Lr(e[a])&&(o[++i]=a)}return o}function cn(e,t,n,r,i,a){if(e===t)return 0!==e||1/e==1/t;var s=typeof e,c=typeof t;return"function"!=s&&"object"!=s&&"function"!=c&&"object"!=c||null==e||null==t?e!=e&&t!=t:function(e,t,n,r,i,a,s){var c=Nr(e),u=Nr(t),l=_,f=_;c||((l=Ge.call(e))==b?l=x:l!=x&&(c=Hr(e))),u||((f=Ge.call(t))==b?f=x:f!=x&&(u=Hr(t)));var d=l==x,p=f==x,h=l==f;if(h&&!c&&!d)return function(e,t,n){switch(n){case S:case C:return+e==+t;case w:return e.name==t.name&&e.message==t.message;case E:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case k:case A:return e==Te(t)}return!1}(e,t,l);var g=d&&qe.call(e,"__wrapped__"),m=p&&qe.call(t,"__wrapped__");if(g||m)return n(g?e.value():e,m?t.value():t,r,i,a,s);if(!h)return!1;a||(a=[]),s||(s=[]);for(var v=a.length;v--;)if(a[v]==e)return s[v]==t;a.push(e),s.push(t);var y=(c?function(e,t,n,r,i,a,s){var c=-1,u=e.length,l=t.length,f=!0;if(u!=l&&!(i&&l>u))return!1;for(;f&&++c<u;){var d=e[c],p=t[c];if(f=o,r&&(f=i?r(p,d,c):r(d,p,c)),void 0===f)if(i)for(var h=l;h--&&(p=t[h],!(f=d&&d===p||n(d,p,r,i,a,s))););else f=d&&d===p||n(d,p,r,i,a,s)}return!!f}:function(e,t,n,r,i,a,s){var c=$r(e),u=c.length,l=$r(t).length;if(u!=l&&!i)return!1;for(var f,d=-1;++d<u;){var p=c[d],h=qe.call(t,p);if(h){var g=e[p],m=t[p];h=o,r&&(h=i?r(m,g,p):r(g,m,p)),void 0===h&&(h=g&&g===m||n(g,m,r,i,a,s))}if(!h)return!1;f||(f="constructor"==p)}if(!f){var v=e.constructor,y=t.constructor;if(v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y))return!1}return!0})(e,t,n,r,i,a,s);return a.pop(),s.pop(),y}(e,t,cn,n,r,i,a)}function un(e,t,n,r,i){var a=t.length;if(null==e)return!a;for(var s=-1,c=!i;++s<a;)if(c&&r[s]?n[s]!==e[t[s]]:!qe.call(e,t[s]))return!1;for(s=-1;++s<a;){var u=t[s];if(c&&r[s])var l=qe.call(e,u);else{var f=e[u],d=n[s];void 0===(l=i?i(f,d,u):o)&&(l=cn(d,f,i,!0))}if(!l)return!1}return!0}function ln(e,t){var r=$r(e),i=r.length;if(1==i){var o=r[0],a=e[o];if(Vn(a))return function(e){return null!=e&&a===e[o]&&qe.call(e,o)}}t&&(e=Wt(e,!0));for(var s=n(i),c=n(i);i--;)a=e[r[i]],s[i]=a,c[i]=Vn(a);return function(e){return un(e,r,s,c)}}function fn(e){return function(t){return null==t?o:t[e]}}function dn(e,t){return e+Qe(mt()*(t-e+1))}function pn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}var hn=Tt?function(e,t){return Tt.set(e,t),e}:li;function gn(e,t,r){var i=-1,o=e.length;(t=null==t?0:+t||0)<0&&(t=-t>o?0:o+t),(r=void 0===r||r>o?o:+r||0)<0&&(r+=o);for(var a=n(o=t>r?0:r-t);++i<o;)a[i]=e[i+t];return a}function mn(e,t){var n;return Xt(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function vn(e,t){var n=-1,r=Dn(),i=e.length,o=r==Ce,a=o&&i>=200,s=a&&An(),c=[];s?(r=Mt,o=!1):(a=!1,s=t?[]:c);e:for(;++n<i;){var u=e[n],l=t?t(u,n,e):u;if(o&&u==u){for(var f=s.length;f--;)if(s[f]===l)continue e;t&&s.push(l),c.push(u)}else r(s,l)<0&&((t||a)&&s.push(l),c.push(u))}return c}function yn(e,t){for(var r=-1,i=t.length,o=n(i);++r<i;)o[r]=e[t[r]];return o}function bn(e,t){var n=e;n instanceof At&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=[n],a=t[r];Ze.apply(o,a.args),n=a.func.apply(a.thisArg,o)}return n}function _n(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t==t&&i<=St){for(;r<i;){var o=r+i>>>1,a=e[o];(n?a<=t:a<t)?r=o+1:i=o}return i}return Sn(e,t,li,n)}function Sn(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!=t,s=void 0===t;i<o;){var c=Qe((i+o)/2),u=n(e[c]),l=u==u;if(a)var f=l||r;else f=s?l&&(r||void 0!==u):r?u<=t:u<t;f?i=c+1:o=c}return dt(o,_t)}function Cn(e,t,n){if("function"!=typeof e)return li;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,a){return e.call(t,n,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function wn(e){return Je.call(e,0)}function Tn(e,t,r){for(var i=r.length,o=-1,a=ft(e.length-i,0),s=-1,c=t.length,u=n(a+c);++s<c;)u[s]=t[s];for(;++o<i;)u[r[o]]=e[o];for(;a--;)u[s++]=e[o++];return u}function En(e,t,r){for(var i=-1,o=r.length,a=-1,s=ft(e.length-o,0),c=-1,u=t.length,l=n(s+u);++a<s;)l[a]=e[a];for(var f=a;++c<u;)l[f+c]=t[c];for(;++i<o;)l[f+r[i]]=e[a++];return l}function xn(e,t){return function(n,r,i){var o=t?t():{};if(r=Pn(r,i,3),Nr(n))for(var a=-1,s=n.length;++a<s;){var c=n[a];e(o,c,r(c,a,n),n)}else Xt(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function kn(e){return function(){var t=arguments.length,n=arguments[0];if(t<2||null==n)return n;if(t>3&&Bn(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var r=Cn(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(r=arguments[--t]);for(var i=0;++i<t;){var o=arguments[i];o&&e(n,o,r)}return n}}Je||(wn=$e&&it?function(e){var t=e.byteLength,n=at?Qe(t/Ct):0,r=n*Ct,i=new $e(t);if(n){var o=new at(i,0,n);o.set(new at(e,0,n))}return t!=r&&(o=new it(i,r)).set(new it(e,r)),i}:ui(null));var An=ct&&tt?function(e){return new It(e)}:ui(null);function Rn(e){return function(t){for(var n=-1,r=ai(Yr(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function In(e){return function(){var t=zt(e.prototype),n=e.apply(t,arguments);return Dr(n)?n:t}}function Mn(e,t){return function(n,r,i){i&&Bn(n,r,i)&&(r=null);var o=Pn(),a=null==r;if(o===Gt&&a||(a=!1,r=o(r,i,3)),a){var s=Nr(n);if(s||!qr(n))return e(s?n:Xn(n));r=Ee}return function(e,t,n){var r=n?yt:vt,i=r,o=i;return Xt(e,function(e,a,s){var c=t(e,a,s);((n?c<i:c>i)||c===r&&c===o)&&(i=c,o=e)}),o}(n,r,t)}}function Nn(e,t,r,i,a,s,g,v,y,b){var _=t&m,S=t&c,C=t&u,w=t&f,T=t&l,E=t&d,x=!C&&In(e),k=e;return function l(){for(var f=arguments.length,d=f,m=n(f);d--;)m[d]=arguments[d];if(i&&(m=Tn(m,i,a)),s&&(m=En(m,s,g)),w||E){var A=l.placeholder,R=Le(m,A);if((f-=R.length)<b){var I=v?Nt(v):null,M=ft(b-f,0);t|=w?p:h,t&=~(w?h:p),T||(t&=~(c|u));var N=Nn(e,t,r,w?m:null,w?R:null,w?null:m,w?null:R,I,y,M);return N.placeholder=A,N}}var O=S?r:this;return C&&(e=O[k]),v&&(m=function(e,t){for(var n=e.length,r=dt(t.length,n),i=Nt(e);r--;){var a=t[r];e[r]=Fn(a,n)?i[a]:o}return e}(m,v)),_&&y<m.length&&(m.length=y),(this instanceof l?x||In(e):e).apply(O,m)}}function On(e,t,n){var r=e.length;if(r>=(t=+t)||!ut(t))return"";var i=t-r;return ni(n=null==n?" ":Te(n),Xe(i/n.length)).slice(0,i)}function jn(e,t,r,i,o,a,s,f){var b=t&u;if(!b&&!Lr(e))throw new me(v);var _=i?i.length:0;if(_||(t&=~(p|h),i=o=null),_-=o?o.length:0,t&h){var S=i,C=o;i=o=null}var w=!b&&Ln(e),T=[e,t,r,i,o,S,C,a,s,f];if(w&&!0!==w&&(function(e,t){var n=e[1],r=t[1],i=n|r,o=m|g,a=c|u,s=o|a|l|d,f=n&m&&!(r&m),p=n&g&&!(r&g),h=(p?e:t)[7],v=(f?e:t)[8],b=!(n>=g&&r>a||n>a&&r>=g),_=i>=o&&i<=s&&(n<g||(p||f)&&h.length<=v);if(!b&&!_)return e;r&c&&(e[2]=t[2],i|=n&c?0:l);var S=t[3];if(S){var C=e[3];e[3]=C?Tn(C,S,t[4]):Nt(S),e[4]=C?Le(e[3],y):Nt(t[4])}(S=t[5])&&(C=e[5],e[5]=C?En(C,S,t[6]):Nt(S),e[6]=C?Le(e[5],y):Nt(t[6])),(S=t[7])&&(e[7]=Nt(S)),r&m&&(e[8]=null==e[8]?t[8]:dt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(T,w),t=T[1],f=T[9]),T[9]=null==f?b?0:e.length:ft(f-_,0)||0,t==c)var E=function(e,t){var n=In(e);return function r(){return(this instanceof r?n:e).apply(t,arguments)}}(T[0],T[2]);else E=t!=p&&t!=(c|p)||T[4].length?Nn.apply(null,T):function(e,t,r,i){var o=t&c,a=In(e);return function t(){for(var s=-1,c=arguments.length,u=-1,l=i.length,f=n(c+l);++u<l;)f[u]=i[u];for(;c--;)f[u++]=arguments[++s];return(this instanceof t?a:e).apply(o?r:this,f)}}.apply(null,T);return(w?hn:zn)(E,T)}function Pn(e,t,n){var r=Et.callback||ci;return r=r===ci?Gt:r,n?r(e,t,n):r}var Ln=Tt?function(e){return Tt.get(e)}:pi;function Dn(e,t,n){var r=Et.indexOf||tr;return r=r===tr?Ce:r,e?r(e,t,n):r}function Fn(e,t){return e=+e,t=null==t?wt:t,e>-1&&e%1==0&&e<t}function Bn(e,t,n){if(!Dr(n))return!1;var r=typeof t;if("number"==r)var i=n.length,o=Un(i)&&Fn(t,i);else o="string"==r&&t in e;return o&&n[t]===e}function Un(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=wt}function Vn(e){return e==e&&(0===e?1/e>0:!Dr(e))}function qn(e,t){e=Kn(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function Hn(e,t){var n={};return rn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}var Gn,Wn,zn=(Gn=0,Wn=0,function(e,t){var n=xr(),r=16-(n-Wn);if(Wn=n,r>0){if(++Gn>=150)return e}else Gn=0;return hn(e,t)});function $n(e){var t,n;return Et.support,!(!je(e)||Ge.call(e)!=x||!(qe.call(e,"constructor")||"function"!=typeof(t=e.constructor)||t instanceof t))&&(rn(e,function(e,t){n=t}),void 0===n||qe.call(e,n))}function Jn(e){for(var t=Jr(e),n=t.length,r=n&&e.length,i=Et.support,o=r&&Un(r)&&(Nr(e)||i.nonEnumArgs&&Mr(e)),a=-1,s=[];++a<n;){var c=t[a];(o&&Fn(c,r)||qe.call(e,c))&&s.push(c)}return s}function Xn(e){return null==e?[]:Un(e.length)?Dr(e)?e:pe(e):Kr(e)}function Kn(e){return Dr(e)?e:pe(e)}function Qn(e,t,n){return e&&e.length?((n?Bn(e,t,n):null==t)&&(t=1),gn(e,t<0?0:t)):[]}function Yn(e,t,n){var r=e?e.length:0;return r?((n?Bn(e,t,n):null==t)&&(t=1),gn(e,0,(t=r-(+t||0))<0?0:t)):[]}function Zn(e,t,n){var r=-1,i=e?e.length:0;for(t=Pn(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function er(e){return e?e[0]:o}function tr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?ft(r+n,0):n||0;else if(n){var i=_n(e,t),o=e[i];return(t==t?t===o:o!=o)?i:-1}return Ce(e,t,n)}function nr(e){return Qn(e,1)}function rr(e,t,n,r){if(!e||!e.length)return[];"boolean"!=typeof t&&null!=t&&(n=Bn(e,t,r=n)?null:t,t=!1);var i=Pn();return i===Gt&&null==n||(n=i(n,r,3)),t&&Dn()==Ce?function(e,t){for(var n,r=-1,i=e.length,o=-1,a=[];++r<i;){var s=e[r],c=t?t(s,r,e):s;r&&n===c||(n=c,a[++o]=s)}return a}(e,n):vn(e,n)}function ir(e){for(var t=-1,r=(e&&e.length&&Dt(Lt(e,Ve)))>>>0,i=n(r);++t<r;)i[t]=Lt(e,fn(t));return i}function or(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Nr(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function ar(e){var t=Et(e);return t.__chain__=!0,t}function sr(e,t,n){return t.call(n,e)}function cr(e,t,n){var r=e?e.length:0;return Un(r)||(r=(e=Kr(e)).length),!!r&&(n="number"==typeof n?n<0?ft(r+n,0):n||0:0,"string"==typeof e||!Nr(e)&&qr(e)?n<r&&e.indexOf(t,n)>-1:Dn(e,t,n)>-1)}var ur=xn(function(e,t,n){qe.call(e,n)?++e[n]:e[n]=1});function lr(e,t,n){var r=Nr(e)?jt:Qt;return"function"==typeof t&&void 0===n||(t=Pn(t,n,3)),r(e,t)}function fr(e,t,n){return(Nr(e)?Pt:Yt)(e,t=Pn(t,n,3))}function dr(e,t,n){if(Nr(e)){var r=Zn(e,t,n);return r>-1?e[r]:o}return Zt(e,t=Pn(t,n,3),Xt)}function pr(e,t,n){return"function"==typeof t&&void 0===n&&Nr(e)?Ot(e,t):Xt(e,Cn(t,n,3))}function hr(e,t,n){return"function"==typeof t&&void 0===n&&Nr(e)?function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}(e,t):Kt(e,Cn(t,n,3))}var gr=xn(function(e,t,n){qe.call(e,n)?e[n].push(t):e[n]=[t]}),mr=xn(function(e,t,n){e[n]=t});function vr(e,t,n){return(Nr(e)?Lt:function(e,t){var n=[];return Xt(e,function(e,r,i){n.push(t(e,r,i))}),n})(e,t=Pn(t,n,3))}var yr=Mn(Dt),br=Mn(function(e){for(var t=-1,n=e.length,r=yt;++t<n;){var i=e[t];i<r&&(r=i)}return r},!0),_r=xn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Sr(e,t,n,r){return(Nr(e)?function(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}:pn)(e,Pn(t,r,4),n,arguments.length<3,Xt)}function Cr(e,t,n,r){return(Nr(e)?function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}:pn)(e,Pn(t,r,4),n,arguments.length<3,Kt)}function wr(e,t,n){if(n?Bn(e,t,n):null==t){var r=(e=Xn(e)).length;return r>0?e[dn(0,r-1)]:o}var i=Tr(e);return i.length=dt(t<0?0:+t||0,i.length),i}function Tr(e){for(var t=-1,r=(e=Xn(e)).length,i=n(r);++t<r;){var o=dn(0,t);t!=o&&(i[t]=i[o]),i[o]=e[t]}return i}function Er(e,t,n){var r=Nr(e)?Ft:mn;return"function"==typeof t&&void 0===n||(t=Pn(t,n,3)),r(e,t)}var xr=pt||function(){return(new r).getTime()};function kr(e,t){var n;if(!Lr(t)){if(!Lr(e))throw new me(v);var r=e;e=t,t=r}return function(){return--e>0?n=t.apply(this,arguments):t=null,n}}function Ar(e,t,n){var r,i,a,s,c,u,l,f=0,d=!1,p=!0;if(!Lr(e))throw new me(v);if(t=t<0?0:t,!0===n){var h=!0;p=!1}else Dr(n)&&(h=n.leading,d="maxWait"in n&&ft(+n.maxWait||0,t),p="trailing"in n?n.trailing:p);function g(){var n=t-(xr()-s);if(n<=0||n>t){i&&Ke(i);var d=l;i=u=l=o,d&&(f=xr(),a=e.apply(c,r),u||i||(r=c=null))}else u=nt(g,n)}function m(){u&&Ke(u),i=u=l=o,(p||d!==t)&&(f=xr(),a=e.apply(c,r),u||i||(r=c=null))}function y(){if(r=arguments,s=xr(),c=this,l=p&&(u||!h),!1===d)var n=h&&!u;else{i||h||(f=s);var o=d-(s-f),v=o<=0||o>d;v?(i&&(i=Ke(i)),f=s,a=e.apply(c,r)):i||(i=nt(m,o))}return v&&u?u=Ke(u):u||t===d||(u=nt(g,t)),n&&(v=!0,a=e.apply(c,r)),!v||u||i||(r=c=null),a}return y.cancel=function(){u&&Ke(u),i&&Ke(i),i=u=l=o},y}function Rr(){var e=arguments,t=e.length-1;if(t<0)return function(){};if(!jt(e,Lr))throw new me(v);return function(){for(var n=t,r=e[n].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Ir(e,t){if(!Lr(e)||t&&!Lr(t))throw new me(v);var n=function(){var r=n.cache,i=t?t.apply(this,arguments):arguments[0];if(r.has(i))return r.get(i);var o=e.apply(this,arguments);return r.set(i,o),o};return n.cache=new Ir.Cache,n}function Mr(e){return Un(je(e)?e.length:o)&&Ge.call(e)==b||!1}var Nr=st||function(e){return je(e)&&Un(e.length)&&Ge.call(e)==_||!1};function Or(e){return e&&1===e.nodeType&&je(e)&&Ge.call(e).indexOf("Element")>-1||!1}function jr(e){return je(e)&&"string"==typeof e.message&&Ge.call(e)==w||!1}kt.dom||(Or=function(e){return e&&1===e.nodeType&&je(e)&&!Ur(e)||!1});var Pr=ht||function(e){return"number"==typeof e&&ut(e)};function Lr(e){return"function"==typeof e||!1}function Dr(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function Fr(e){return null!=e&&(Ge.call(e)==T?ze.test(Pe.call(e)):je(e)&&Z.test(e)||!1)}function Br(e){return"number"==typeof e||je(e)&&Ge.call(e)==E||!1}(Lr(/x/)||it&&!Lr(it))&&(Lr=function(e){return Ge.call(e)==T});var Ur=Ye?function(e){if(!e||Ge.call(e)!=x)return!1;var t=e.valueOf,n=Fr(t)&&(n=Ye(t))&&Ye(n);return n?e==n||Ye(e)==n:$n(e)}:$n;function Vr(e){return je(e)&&Ge.call(e)==k||!1}function qr(e){return"string"==typeof e||je(e)&&Ge.call(e)==A||!1}function Hr(e){return je(e)&&Un(e.length)&&ue[Ge.call(e)]||!1}function Gr(e){return Ht(e,Jr(e))}var Wr=kn(Vt);function zr(e){return sn(e,Jr(e))}var $r=lt?function(e){if(e)var t=e.constructor,n=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n&&Un(n)?Jn(e):Dr(e)?lt(e):[]}:Jn;function Jr(e){if(null==e)return[];Dr(e)||(e=pe(e));var t=e.length;t=t&&Un(t)&&(Nr(e)||kt.nonEnumArgs&&Mr(e))&&t||0;for(var r=e.constructor,i=-1,o="function"==typeof r&&r.prototype==e,a=n(t),s=t>0;++i<t;)a[i]=i+"";for(var c in e)s&&Fn(c,t)||"constructor"==c&&(o||!qe.call(e,c))||a.push(c);return a}var Xr=kn(function e(t,n,r,i,a){var s=Un(n.length)&&(Nr(n)||Hr(n));return(s?Ot:on)(n,function(n,c,u){if(je(n))return i||(i=[]),a||(a=[]),function(e,t,n,r,i,a,s){for(var c=a.length,u=t[n];c--;)if(a[c]==u)return void(e[n]=s[c]);var l=e[n],f=i?i(l,u,n,e,t):o,d=void 0===f;d&&(f=u,Un(u.length)&&(Nr(u)||Hr(u))?f=Nr(l)?l:l?Nt(l):[]:(Ur(u)||Mr(u))&&(f=Mr(l)?Gr(l):Ur(l)?l:{})),a.push(u),s.push(f),d?e[n]=r(f,u,i,a,s):(f==f?f!==l:l==l)&&(e[n]=f)}(t,u,c,e,r,i,a);var l=t[c],f=r?r(l,n,c,t,u):o,d=void 0===f;d&&(f=n),!s&&void 0===f||!d&&(f==f?f===l:l!=l)||(t[c]=f)}),t});function Kr(e){return yn(e,$r(e))}var Qr=Rn(function(e,t,n){return t=t.toLowerCase(),n?e+t.charAt(0).toUpperCase()+t.slice(1):t});function Yr(e){return(e=Te(e))&&e.replace(ee,Ie)}function Zr(e){return(e=Te(e))&&re.test(e)?e.replace(ne,"\\$&"):e}var ei=Rn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});function ti(e,t,n){return n&&Bn(e,t,n)&&(t=0),gt(e,t)}function ni(e,t){var n="";if(e=Te(e),(t=+t)<1||!e||!ut(t))return n;do{t%2&&(n+=e),t=Qe(t/2),e+=e}while(t);return n}8!=gt(" \t\v\fÂ \ufeff\n\r\u2028\u2029áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€08")&&(ti=function(e,t,n){return(n?Bn(e,t,n):null==t)?t=0:t&&(t=+t),e=oi(e),gt(e,t||(Y.test(e)?16:10))});var ri,ii=Rn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function oi(e,t,n){var r=e;return(e=Te(e))?(n?Bn(r,t,n):null==t)?e.slice(De(e),Fe(e)+1):(t=Te(t),e.slice(xe(e,t),ke(e,t)+1)):e}function ai(e,t,n){return n&&Bn(e,t,n)&&(t=null),(e=Te(e)).match(t||ae)||[]}function si(e){try{return e()}catch(e){return jr(e)?e:i(e)}}function ci(e,t,n){return n&&Bn(e,t,n)&&(t=null),Gt(e,t)}function ui(e){return function(){return e}}function li(e){return e}function fi(e){return ln(e,!0)}function di(e,t,n){if(null==n){var r=Dr(t),i=r&&$r(t),o=i&&i.length&&sn(t,i);(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=sn(t,$r(t)));var a=!0,s=-1,c=Lr(e),u=o.length;!1===n?a=!1:Dr(n)&&"chain"in n&&(a=n.chain);for(;++s<u;){var l=o[s],f=t[l];e[l]=f,c&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(a||n){var r=e(this.__wrapped__);return(r.__actions__=Nt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}var i=[this.value()];return Ze.apply(i,arguments),t.apply(e,i)}}(f))}return e}function pi(){}function hi(e){return fn(e+"")}return xt.prototype=Et.prototype,Rt.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Rt.prototype.get=function(e){return"__proto__"==e?o:this.__data__[e]},Rt.prototype.has=function(e){return"__proto__"!=e&&qe.call(this.__data__,e)},Rt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},It.prototype.push=function(e){var t=this.data;"string"==typeof e||Dr(e)?t.set.add(e):t.hash[e]=!0},Ir.Cache=Rt,Et.after=function(e,t){if(!Lr(t)){if(!Lr(e))throw new me(v);var n=e;e=t,t=n}return e=ut(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}},Et.ary=function(e,t,n){return n&&Bn(e,t,n)&&(t=null),t=e&&null==t?e.length:ft(+t||0,0),jn(e,m,null,null,null,null,t)},Et.assign=Wr,Et.at=function(e){return Un(e?e.length:0)&&(e=Xn(e)),qt(e,en(arguments,!1,!1,1))},Et.before=kr,Et.bind=function e(t,n){var r=c;if(arguments.length>2){var i=gn(arguments,2),o=Le(i,e.placeholder);r|=p}return jn(t,r,n,i,o)},Et.bindAll=function(e){return function(e,t){for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=jn(e[i],c,e)}return e}(e,arguments.length>1?en(arguments,!1,!1,1):zr(e))},Et.bindKey=function e(t,n){var r=c|u;if(arguments.length>2){var i=gn(arguments,2),o=Le(i,e.placeholder);r|=p}return jn(n,r,t,i,o)},Et.callback=ci,Et.chain=ar,Et.chunk=function(e,t,r){t=(r?Bn(e,t,r):null==t)?1:ft(+t||1,1);for(var i=0,o=e?e.length:0,a=-1,s=n(Xe(o/t));i<o;)s[++a]=gn(e,i,i+=t);return s},Et.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i},Et.constant=ui,Et.countBy=ur,Et.create=function(e,t,n){var r=zt(e);return n&&Bn(e,t,n)&&(t=null),t?Ht(t,r,$r(t)):r},Et.curry=function e(t,n,r){r&&Bn(t,n,r)&&(n=null);var i=jn(t,f,null,null,null,null,null,n);return i.placeholder=e.placeholder,i},Et.curryRight=function e(t,n,r){r&&Bn(t,n,r)&&(n=null);var i=jn(t,d,null,null,null,null,null,n);return i.placeholder=e.placeholder,i},Et.debounce=Ar,Et.defaults=function(e){if(null==e)return e;var t=Nt(arguments);return t.push(Bt),Wr.apply(o,t)},Et.defer=function(e){return $t(e,1,arguments,1)},Et.delay=function(e,t){return $t(e,t,arguments,2)},Et.difference=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Nr(n)||Mr(n))break}return Jt(n,en(arguments,!1,!0,++e))},Et.drop=Qn,Et.dropRight=Yn,Et.dropRightWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=Pn(t,n,3);r--&&t(e[r],r,e););return gn(e,0,r+1)},Et.dropWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];var i=-1;for(t=Pn(t,n,3);++i<r&&t(e[i],i,e););return gn(e,i)},Et.filter=fr,Et.flatten=function(e,t,n){var r=e?e.length:0;return n&&Bn(e,t,n)&&(t=!1),r?en(e,t):[]},Et.flattenDeep=function(e){return e&&e.length?en(e,!0):[]},Et.flow=function(){var e=arguments,t=e.length;if(!t)return function(){};if(!jt(e,Lr))throw new me(v);return function(){for(var n=0,r=e[n].apply(this,arguments);++n<t;)r=e[n].call(this,r);return r}},Et.flowRight=Rr,Et.forEach=pr,Et.forEachRight=hr,Et.forIn=function(e,t,n){return"function"==typeof t&&void 0===n||(t=Cn(t,n,3)),tn(e,t,Jr)},Et.forInRight=function(e,t,n){return nn(e,t=Cn(t,n,3),Jr)},Et.forOwn=function(e,t,n){return"function"==typeof t&&void 0===n||(t=Cn(t,n,3)),on(e,t)},Et.forOwnRight=function(e,t,n){return nn(e,t=Cn(t,n,3),$r)},Et.functions=zr,Et.groupBy=gr,Et.indexBy=mr,Et.initial=function(e){return Yn(e,1)},Et.intersection=function(){for(var e=[],t=-1,n=arguments.length,r=[],i=Dn(),o=i==Ce;++t<n;){var a=arguments[t];(Nr(a)||Mr(a))&&(e.push(a),r.push(o&&a.length>=120&&An(t&&a)))}n=e.length;var s=e[0],c=-1,u=s?s.length:0,l=[],f=r[0];e:for(;++c<u;)if(a=s[c],(f?Mt(f,a):i(l,a))<0){for(t=n;--t;){var d=r[t];if((d?Mt(d,a):i(e[t],a))<0)continue e}f&&f.push(a),l.push(a)}return l},Et.invert=function(e,t,n){n&&Bn(e,t,n)&&(t=null);for(var r=-1,i=$r(e),o=i.length,a={};++r<o;){var s=i[r],c=e[s];t?qe.call(a,c)?a[c].push(s):a[c]=[s]:a[c]=s}return a},Et.invoke=function(e,t){return function(e,t,r){var i=-1,a="function"==typeof t,s=e?e.length:0,c=Un(s)?n(s):[];return Xt(e,function(e){var n=a?t:null!=e&&e[t];c[++i]=n?n.apply(e,r):o}),c}(e,t,gn(arguments,2))},Et.keys=$r,Et.keysIn=Jr,Et.map=vr,Et.mapValues=function(e,t,n){var r={};return t=Pn(t,n,3),on(e,function(e,n,i){r[n]=t(e,n,i)}),r},Et.matches=fi,Et.memoize=Ir,Et.merge=Xr,Et.mixin=di,Et.negate=function(e){if(!Lr(e))throw new me(v);return function(){return!e.apply(this,arguments)}},Et.omit=function(e,t,n){if(null==e)return{};if("function"!=typeof t){var r=Lt(en(arguments,!1,!1,1),ge);return qn(e,Jt(Jr(e),r))}return t=Cn(t,n,3),Hn(e,function(e,n,r){return!t(e,n,r)})},Et.once=function(e){return kr(e,2)},Et.pairs=function(e){for(var t=-1,r=$r(e),i=r.length,o=n(i);++t<i;){var a=r[t];o[t]=[a,e[a]]}return o},Et.partial=function e(t){var n=gn(arguments,1),r=Le(n,e.placeholder);return jn(t,p,null,n,r)},Et.partialRight=function e(t){var n=gn(arguments,1),r=Le(n,e.placeholder);return jn(t,h,null,n,r)},Et.partition=_r,Et.pick=function(e,t,n){return null==e?{}:"function"==typeof t?Hn(e,Cn(t,n,3)):qn(e,en(arguments,!1,!1,1))},Et.pluck=function(e,t){return vr(e,hi(t))},Et.property=hi,Et.propertyOf=function(e){return function(t){return null==e?o:e[t]}},Et.pull=function(){var e=arguments[0];if(!e||!e.length)return e;for(var t=0,n=Dn(),r=arguments.length;++t<r;)for(var i=0,o=arguments[t];(i=n(e,o,i))>-1;)rt.call(e,i,1);return e},Et.pullAt=function(e){return function(e,t){var n=t.length,r=qt(e,t);for(t.sort(Se);n--;){var i=parseFloat(t[n]);if(i!=o&&Fn(i)){var o=i;rt.call(e,i,1)}}return r}(e||[],en(arguments,!1,!1,1))},Et.range=function(e,t,r){r&&Bn(e,t,r)&&(t=r=null),e=+e||0,r=null==r?1:+r||0,null==t?(t=e,e=0):t=+t||0;for(var i=-1,o=ft(Xe((t-e)/(r||1)),0),a=n(o);++i<o;)a[i]=e,e+=r;return a},Et.rearg=function(e){var t=en(arguments,!1,!1,1);return jn(e,g,null,null,null,t)},Et.reject=function(e,t,n){var r=Nr(e)?Pt:Yt;return t=Pn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Et.remove=function(e,t,n){var r=-1,i=e?e.length:0,o=[];for(t=Pn(t,n,3);++r<i;){var a=e[r];t(a,r,e)&&(o.push(a),rt.call(e,r--,1),i--)}return o},Et.rest=nr,Et.shuffle=Tr,Et.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Bn(e,t,n)&&(t=0,n=r),gn(e,t,n)):[]},Et.sortBy=function(e,t,r){var i=-1,o=e?e.length:0,a=Un(o)?n(o):[];return r&&Bn(e,t,r)&&(t=null),t=Pn(t,r,3),Xt(e,function(e,n,r){a[++i]={criteria:t(e,n,r),index:i,value:e}}),we(a,Ae)},Et.sortByAll=function(e){var t=arguments;t.length>3&&Bn(t[1],t[2],t[3])&&(t=[e,t[1]]);var r=-1,i=e?e.length:0,a=en(t,!1,!1,1),s=Un(i)?n(i):[];return Xt(e,function(e,t,i){for(var c=a.length,u=n(c);c--;)u[c]=null==e?o:e[a[c]];s[++r]={criteria:u,index:r,value:e}}),we(s,Re)},Et.take=function(e,t,n){return e&&e.length?((n?Bn(e,t,n):null==t)&&(t=1),gn(e,0,t<0?0:t)):[]},Et.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?Bn(e,t,n):null==t)&&(t=1),gn(e,(t=r-(+t||0))<0?0:t)):[]},Et.takeRightWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=Pn(t,n,3);r--&&t(e[r],r,e););return gn(e,r+1)},Et.takeWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];var i=-1;for(t=Pn(t,n,3);++i<r&&t(e[i],i,e););return gn(e,0,i)},Et.tap=function(e,t,n){return t.call(n,e),e},Et.throttle=function(e,t,n){var r=!0,i=!0;if(!Lr(e))throw new me(v);return!1===n?r=!1:Dr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),fe.leading=r,fe.maxWait=+t,fe.trailing=i,Ar(e,t,fe)},Et.thru=sr,Et.times=function(e,t,r){if((e=+e)<1||!ut(e))return[];var i=-1,o=n(dt(e,bt));for(t=Cn(t,r,1);++i<e;)i<bt?o[i]=t(i):t(i);return o},Et.toArray=function(e){var t=e?e.length:0;return Un(t)?t?Nt(e):[]:Kr(e)},Et.toPlainObject=Gr,Et.transform=function(e,t,n,r){var i=Nr(e)||Hr(e);if(t=Pn(t,r,4),null==n)if(i||Dr(e)){var o=e.constructor;n=i?Nr(e)?new o:[]:zt("function"==typeof o&&o.prototype)}else n={};return(i?Ot:on)(e,function(e,r,i){return t(n,e,r,i)}),n},Et.union=function(){return vn(en(arguments,!1,!0))},Et.uniq=rr,Et.unzip=ir,Et.values=Kr,Et.valuesIn=function(e){return yn(e,Jr(e))},Et.where=function(e,t){return fr(e,fi(t))},Et.without=function(e){return Jt(e,gn(arguments,1))},Et.wrap=function(e,t){return jn(t=null==t?li:t,p,null,[e],[])},Et.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Nr(n)||Mr(n))var r=r?Jt(r,n).concat(Jt(n,r)):n}return r?vn(r):[]},Et.zip=function(){for(var e=arguments.length,t=n(e);e--;)t[e]=arguments[e];return ir(t)},Et.zipObject=or,Et.backflow=Rr,Et.collect=vr,Et.compose=Rr,Et.each=pr,Et.eachRight=hr,Et.extend=Wr,Et.iteratee=ci,Et.methods=zr,Et.object=or,Et.select=fr,Et.tail=nr,Et.unique=rr,di(Et,Et),Et.attempt=si,Et.camelCase=Qr,Et.capitalize=function(e){return(e=Te(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Et.clone=function(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(n=Bn(e,t,r=n)?null:t,t=!1),Wt(e,t,n="function"==typeof n&&Cn(n,r,1))},Et.cloneDeep=function(e,t,n){return Wt(e,!0,t="function"==typeof t&&Cn(t,n,1))},Et.deburr=Yr,Et.endsWith=function(e,t,n){t+="";var r=(e=Te(e)).length;return(n=(void 0===n?r:dt(n<0?0:+n||0,r))-t.length)>=0&&e.indexOf(t,n)==n},Et.escape=function(e){return(e=Te(e))&&W.test(e)?e.replace(H,Me):e},Et.escapeRegExp=Zr,Et.every=lr,Et.find=dr,Et.findIndex=Zn,Et.findKey=function(e,t,n){return Zt(e,t=Pn(t,n,3),on,!0)},Et.findLast=function(e,t,n){return Zt(e,t=Pn(t,n,3),Kt)},Et.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=Pn(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},Et.findLastKey=function(e,t,n){return Zt(e,t=Pn(t,n,3),an,!0)},Et.findWhere=function(e,t){return dr(e,fi(t))},Et.first=er,Et.has=function(e,t){return!!e&&qe.call(e,t)},Et.identity=li,Et.includes=cr,Et.indexOf=tr,Et.isArguments=Mr,Et.isArray=Nr,Et.isBoolean=function(e){return!0===e||!1===e||je(e)&&Ge.call(e)==S||!1},Et.isDate=function(e){return je(e)&&Ge.call(e)==C||!1},Et.isElement=Or,Et.isEmpty=function(e){if(null==e)return!0;var t=e.length;return Un(t)&&(Nr(e)||qr(e)||Mr(e)||je(e)&&Lr(e.splice))?!t:!$r(e).length},Et.isEqual=function(e,t,n,r){if(!(n="function"==typeof n&&Cn(n,r,3))&&Vn(e)&&Vn(t))return e===t;var i=n?n(e,t):o;return void 0===i?cn(e,t,n):!!i},Et.isError=jr,Et.isFinite=Pr,Et.isFunction=Lr,Et.isMatch=function(e,t,r,i){var o=$r(t),a=o.length;if(!(r="function"==typeof r&&Cn(r,i,3))&&1==a){var s=o[0],c=t[s];if(Vn(c))return null!=e&&c===e[s]&&qe.call(e,s)}for(var u=n(a),l=n(a);a--;)c=u[a]=t[o[a]],l[a]=Vn(c);return un(e,o,u,l,r)},Et.isNaN=function(e){return Br(e)&&e!=+e},Et.isNative=Fr,Et.isNull=function(e){return null===e},Et.isNumber=Br,Et.isObject=Dr,Et.isPlainObject=Ur,Et.isRegExp=Vr,Et.isString=qr,Et.isTypedArray=Hr,Et.isUndefined=function(e){return void 0===e},Et.kebabCase=ei,Et.last=function(e){var t=e?e.length:0;return t?e[t-1]:o},Et.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?ft(r+n,0):dt(n||0,r-1))+1;else if(n){var o=e[i=_n(e,t,!0)-1];return(t==t?t===o:o!=o)?i:-1}if(t!=t)return Oe(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Et.max=yr,Et.min=br,Et.noConflict=function(){return t._=We,this},Et.noop=pi,Et.now=xr,Et.pad=function(e,t,n){t=+t;var r=(e=Te(e)).length;if(r>=t||!ut(t))return e;var i=(t-r)/2,o=Qe(i);return(n=On("",Xe(i),n)).slice(0,o)+e+n},Et.padLeft=function(e,t,n){return(e=Te(e))&&On(e,t,n)+e},Et.padRight=function(e,t,n){return(e=Te(e))&&e+On(e,t,n)},Et.parseInt=ti,Et.random=function(e,t,n){n&&Bn(e,t,n)&&(t=n=null);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=mt();return dt(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return dn(e,t)},Et.reduce=Sr,Et.reduceRight=Cr,Et.repeat=ni,Et.result=function(e,t,n){var r=null==e?o:e[t];return void 0===r&&(r=n),Lr(r)?r.call(e):r},Et.runInContext=e,Et.size=function(e){var t=e?e.length:0;return Un(t)?t:$r(e).length},Et.snakeCase=ii,Et.some=Er,Et.sortedIndex=function(e,t,n,r){var i=Pn(n);return i===Gt&&null==n?_n(e,t):Sn(e,t,i(n,r,1))},Et.sortedLastIndex=function(e,t,n,r){var i=Pn(n);return i===Gt&&null==n?_n(e,t,!0):Sn(e,t,i(n,r,1),!0)},Et.startsWith=function(e,t,n){return e=Te(e),n=null==n?0:dt(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Et.template=function(e,t,n){var r=Et.templateSettings;n&&Bn(e,t,n)&&(t=n=null),e=Te(e);var i,s,c=Vt(Vt({},(t=Vt(Vt({},n||t),r,Ut)).imports),r.imports,Ut),u=$r(c),l=yn(c,u),f=0,d=t.interpolate||te,p="__p += '",h=he((t.escape||te).source+"|"+d.source+"|"+(d===J?X:te).source+"|"+(t.evaluate||te).source+"|$","g"),g="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++ce+"]")+"\n";e.replace(h,function(t,n,r,o,a,c){return r||(r=o),p+=e.slice(f,c).replace(oe,Ne),n&&(i=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=c+t.length,t}),p+="';\n";var m=t.variable;m||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(B,""):p).replace(U,"$1").replace(V,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=si(function(){return a(u,g+"return "+p).apply(o,l)});if(v.source=p,jr(v))throw v;return v},Et.trim=oi,Et.trimLeft=function(e,t,n){var r=e;return(e=Te(e))?(n?Bn(r,t,n):null==t)?e.slice(De(e)):e.slice(xe(e,Te(t))):e},Et.trimRight=function(e,t,n){var r=e;return(e=Te(e))?(n?Bn(r,t,n):null==t)?e.slice(0,Fe(e)+1):e.slice(0,ke(e,Te(t))+1):e},Et.trunc=function(e,t,n){n&&Bn(e,t,n)&&(t=null);var r=30,i="...";if(null!=t)if(Dr(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?Te(t.omission):i}else r=+t||0;if(r>=(e=Te(e)).length)return e;var a=r-i.length;if(a<1)return i;var s=e.slice(0,a);if(null==o)return s+i;if(Vr(o)){if(e.slice(a).search(o)){var c,u,l=e.slice(0,a);for(o.global||(o=he(o.source,(K.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(l);)u=c.index;s=s.slice(0,null==u?a:u)}}else if(e.indexOf(o,a)!=a){var f=s.lastIndexOf(o);f>-1&&(s=s.slice(0,f))}return s+i},Et.unescape=function(e){return(e=Te(e))&&G.test(e)?e.replace(q,Be):e},Et.uniqueId=function(e){var t=++He;return Te(e)+t},Et.words=ai,Et.all=lr,Et.any=Er,Et.contains=cr,Et.detect=dr,Et.foldl=Sr,Et.foldr=Cr,Et.head=er,Et.include=cr,Et.inject=Sr,di(Et,(ri={},on(Et,function(e,t){Et.prototype[t]||(ri[t]=e)}),ri),!1),Et.sample=wr,Et.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return wr(t,e)}):wr(this.value())},Et.VERSION="3.0.0",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Et[e].placeholder=Et}),Ot(["filter","map","takeWhile"],function(e,t){var n=0==t;At.prototype[e]=function(e,r){var i=this.clone(),o=i.filtered,a=i.iteratees||(i.iteratees=[]);return i.filtered=o||n||2==t&&i.dir<0,a.push({iteratee:Pn(e,r,3),type:t}),i}}),Ot(["drop","take"],function(e,t){var n=e+"Count",r=e+"While";At.prototype[e]=function(r){r=null==r?1:ft(+r||0,0);var i=this.clone();if(i.filtered){var o=i[n];i[n]=t?dt(o,r):o+r}else(i.views||(i.views=[])).push({size:r,type:e+(i.dir<0?"Right":"")});return i},At.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},At.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[r](e,t).reverse()}}),Ot(["first","last"],function(e,t){var n="take"+(t?"Right":"");At.prototype[e]=function(){return this[n](1).value()[0]}}),Ot(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");At.prototype[e]=function(){return this[n](1)}}),Ot(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?fi:hi;At.prototype[e]=function(e){return this[n](r(e))}}),At.prototype.dropWhile=function(e,t){var n,r,i=this.dir<0;return e=Pn(e,t,3),this.filter(function(t,o,a){return n=n&&(i?o<r:o>r),r=o,n||(n=!e(t,o,a))})},At.prototype.reject=function(e,t){return e=Pn(e,t,3),this.filter(function(t,n,r){return!e(t,n,r)})},At.prototype.slice=function(e,t){var n=(e=null==e?0:+e||0)<0?this.takeRight(-e):this.drop(e);return void 0!==t&&(n=(t=+t||0)<0?n.dropRight(-t):n.take(t-e)),n},on(At.prototype,function(e,t){var n=/^(?:first|last)$/.test(t);Et.prototype[t]=function(){var r=this.__wrapped__,i=arguments,o=this.__chain__,a=!!this.__actions__.length,s=r instanceof At,c=s&&!a;if(n&&!o)return c?e.call(r):Et[t](this.value());var u=function(e){var n=[e];return Ze.apply(n,i),Et[t].apply(Et,n)};if(s||Nr(r)){var l=c?r:new At(this),f=e.apply(l,i);return n||!a&&!f.actions||(f.actions||(f.actions=[])).push({func:sr,args:[u],thisArg:Et}),new xt(f,o)}return this.thru(u)}}),Ot(["concat","join","pop","push","shift","sort","splice","unshift"],function(e){var t=ye[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|shift)$/.test(e);Et.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),At.prototype.clone=function(){var e=this.actions,t=this.iteratees,n=this.views,r=new At(this.wrapped);return r.actions=e?Nt(e):null,r.dir=this.dir,r.dropCount=this.dropCount,r.filtered=this.filtered,r.iteratees=t?Nt(t):null,r.takeCount=this.takeCount,r.views=n?Nt(n):null,r},At.prototype.reverse=function(){var e=this.filtered,t=e?new At(this):this.clone();return t.dir=-1*this.dir,t.filtered=e,t},At.prototype.value=function(){var e=this.wrapped.value();if(!Nr(e))return bn(e,this.actions);var t=this.dir,n=t<0,r=e.length,i=function(e,t,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=dt(t,e+a);break;case"takeRight":e=ft(e,t-a)}}return{start:e,end:t}}(0,r,this.views),o=i.start,a=i.end,s=this.dropCount,c=dt(a-o,this.takeCount-s),u=n?a:o-1,l=this.iteratees,f=l?l.length:0,d=0,p=[];e:for(;r--&&d<c;){for(var h=-1,g=e[u+=t];++h<f;){var m=l[h],v=(0,m.iteratee)(g,u,e),y=m.type;if(1==y)g=v;else if(!v){if(0==y)continue e;break e}}s?s--:p[d++]=g}return n?p.reverse():p},Et.prototype.chain=function(){return ar(this)},Et.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof At?new xt(e.reverse()):this.thru(function(e){return e.reverse()})},Et.prototype.toString=function(){return this.value()+""},Et.prototype.toJSON=Et.prototype.valueOf=Et.prototype.value=function(){return bn(this.__wrapped__,this.__actions__)},Et.prototype.collect=Et.prototype.map,Et.prototype.head=Et.prototype.first,Et.prototype.select=Et.prototype.filter,Et.prototype.tail=Et.prototype.rest,Et}();ve._=Ue,(i=function(){return Ue}.call(t,n,t,e))===o||(e.exports=i)}).call(this)}).call(this,n(29)(e),n(9))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r,i;r=[n(21)],void 0===(i=function(e){return{scheduleMeeting:function(t,n){var r={url:"/seamapi/v1/user/"+t.leaderId+"/scheduled_meeting/?access_token="+encodeURIComponent(t.userToken),body:function(e){var t=new Date,n=t.getTime(),r=t;r.setHours(r.getHours()+1),r=r.getTime();var i={description:"",addAttendeePasscode:!1,endPointVersion:"1.80",timezone:"US/Mountain",end:"",title:"Test Meeting",advancedMeetingOptions:{allowStream:!1,autoRecord:!1,muteParticipantsOnEntry:!1,encryptionType:"ENCRYPTED_ONLY",makeDefault:!1,moderatorLess:!0,videoBestFit:!1,disallowChat:!1,publishMeeting:!1,showAllAttendeesInMeetingInvite:!1},isLargeMeeting:!1,endPointType:"WEB_APP",start:"",recurrencePattern:{recurrenceCount:0,daysOfWeekMask:0,frequency:0,recurrenceType:"NONE",weekOfMonth:"NONE",monthOfYear:"NONE",endDate:null,dayOfMonth:0}};return i.start=n,i.end=r,i}()};e.post(r,n)}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;n(27),void 0===(r=function(e,t,r){var i=n(28);function o(e,t){if(!e)throw t||"Assertion failed"}var a=function(e,t){return{call:function(n,r){void 0!==e.from&&e.from!==n||void 0!==e.to&&e.to!==r||t({from:n,to:r})}}},s=function(e){o(void 0!==e.initial,"initial state is mandatory");var t={};t.events=e.events,t.triggers=e.triggers,t.callbacks=e.callbacks;var n={state:e.initial,activatedTriggers:[]};function r(e,t,n){e&&i.each(e,function(e){e.call(t,n)})}var a=function(e,o,a){var s=i.groupBy(t.callbacks,function(e){return!0===e.beforeTransition}),c=s[!0];c&&r(c,e,o),n.state=o;var u=s[!1];u&&r(u,e,o),!0===a&&(n.activatedTriggers=[])};return t.getState=function(){return n.state},i.each(i.keys(t.events),function(n){var r=e.events[n];o(void 0!==r),t[n]=function(){return r(t,a)}}),t.trigger=function(e){n.activatedTriggers.push(e),i.each(t.triggers,function(e){if(e.activatedBy.isFulfilled(n.activatedTriggers)&&t[e.event]()){var r=e.activatedBy.matchingTriggers(n.activatedTriggers);n.activatedTriggers=i.difference(n.activatedTriggers,r)}})},t};return{create:s,transitions:{transition:function(e){return function(t,n){var r=Array.isArray(e)?i.find(e,function(e){return e.from==t.getState()}):e;if(void 0!==r&&void 0!==r.from){if(t.getState()==r.from||i.include(r.from,t.getState()))return n(t.getState(),r.to,r.resetTriggers),!0}else void 0!==r&&void 0===r.from&&void 0!==r.to&&n(t.getState(),r.to,r.resetTriggers)}},afterTransition:function(e,t){return i.extend(a(e,t),{beforeTransition:!1})},beforeTransition:function(e,t){return i.extend(a(e,t),{beforeTransition:!0})}},triggers:{anyOf:function(e){return{isFulfilled:function(e){return!i.isEmpty(this.matchingTriggers(e))},matchingTriggers:function(t){return i.intersection(e,t)}}},allOf:function(e){return{isFulfilled:function(e){return i.isEmpty(i.difference(this.matchingTriggers(e),e))},matchingTriggers:function(){return e}}}},StateMachine:function(e){var t=s(e);return i.extend(this,t)}}}.call(t,n,t,e))||(e.exports=r)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,JSON;JSON||(JSON={}),function(){function str(e,t){var n,r,i,o,a,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;n<o;n+=1)a[n]=str(n,c)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],c))&&a.push(quote(r)+(gap?": ":":")+i);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i=str(r,c))&&a.push(quote(r)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function f(e){return e<10?"0"+e:e}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,!t||"function"==typeof t||"object"==typeof t&&"number"==typeof t.length)return str("",{"":e});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var e=document,t=window,n={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===n.arrIndexOf(r,t)&&r.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var r=this._listeners[e],i=n.arrIndexOf(r,t);-1===i||(r.length>1?this._listeners[e]=r.slice(0,i).concat(r.slice(i+1)):delete this._listeners[e])}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].apply(this,n)};var i=function(e,t){if(this.type=e,void 0!==t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])};i.prototype.toString=function(){var e=[];for(var t in this)if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var o=function(e){this._events=e||[],this._listeners={}};o.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var r=0;r<t._listeners[e].length;r++)t._listeners[e][r].apply(t,n)}},o.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},o.prototype._verifyType=function(e){var t=this;-1===n.arrIndexOf(t._events,e)&&n.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},o.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(e,t){t=t||a.length;var n,r=[];for(n=0;n<e;n++)r.push(a.substr(Math.floor(Math.random()*t),1));return r.join("")},n.random_number=function(e){return Math.floor(Math.random()*e)},n.random_number_string=function(e){var t=(""+(e-1)).length;return(Array(t+1).join("0")+n.random_number(e)).slice(-t)},n.getOrigin=function(e){return(e+="/").split("/").slice(0,3).join("/")},n.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.getParentDomain=function(e){return/^[0-9.]*$/.test(e)?e:/^\[/.test(e)?e:/[.]/.test(e)?e.split(".").slice(1).join("."):e},n.objectExtend=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var s="_jp";n.polluteGlobalNamespace=function(){s in t||(t[s]={})},n.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},n.userSetCode=function(e){return 1e3===e||e>=3e3&&e<=4999},n.countRTO=function(e){return e>100?3*e:e+200},n.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},n.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},n.amendUrl=function(t){var r=e.location;if(!t)throw new Error("Wrong url for SockJS");if(!n.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");return 0===t.indexOf("//")&&(t=r.protocol+t),0===t.indexOf("/")&&(t=r.protocol+"//"+r.host+t),t=t.replace(/[/]+$/,"")},n.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},n.arrSkip=function(e,t){var r=n.arrIndexOf(e,t);return-1===r?e.slice():e.slice(0,r).concat(e.slice(r+1))},n.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},n.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\v":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","Â€":"\\u0080","Â":"\\u0081","Â‚":"\\u0082","Âƒ":"\\u0083","Â„":"\\u0084","Â…":"\\u0085","Â†":"\\u0086","Â‡":"\\u0087","Âˆ":"\\u0088","Â‰":"\\u0089","ÂŠ":"\\u008a","Â‹":"\\u008b","ÂŒ":"\\u008c","Â":"\\u008d","ÂŽ":"\\u008e","Â":"\\u008f","Â":"\\u0090","Â‘":"\\u0091","Â’":"\\u0092","Â“":"\\u0093","Â”":"\\u0094","Â•":"\\u0095","Â–":"\\u0096","Â—":"\\u0097","Â˜":"\\u0098","Â™":"\\u0099","Âš":"\\u009a","Â›":"\\u009b","Âœ":"\\u009c","Â":"\\u009d","Âž":"\\u009e","ÂŸ":"\\u009f","Â­":"\\u00ad","Ø€":"\\u0600","Ø":"\\u0601","Ø‚":"\\u0602","Øƒ":"\\u0603","Ø„":"\\u0604","Ü":"\\u070f","áž´":"\\u17b4","ážµ":"\\u17b5","â€Œ":"\\u200c","â€":"\\u200d","â€Ž":"\\u200e","â€":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","â€ª":"\\u202a","â€«":"\\u202b","â€¬":"\\u202c","â€­":"\\u202d","â€®":"\\u202e","â€¯":"\\u202f","â ":"\\u2060","â¡":"\\u2061","â¢":"\\u2062","â£":"\\u2063","â¤":"\\u2064","â¥":"\\u2065","â¦":"\\u2066","â§":"\\u2067","â¨":"\\u2068","â©":"\\u2069","âª":"\\u206a","â«":"\\u206b","â¬":"\\u206c","â­":"\\u206d","â®":"\\u206e","â¯":"\\u206f","\ufeff":"\\ufeff","ï¿°":"\\ufff0","ï¿±":"\\ufff1","ï¿²":"\\ufff2","ï¿³":"\\ufff3","ï¿´":"\\ufff4","ï¿µ":"\\ufff5","ï¿¶":"\\ufff6","ï¿·":"\\ufff7","ï¿¸":"\\ufff8","ï¿¹":"\\ufff9","ï¿º":"\\ufffa","ï¿»":"\\ufffb","ï¿¼":"\\ufffc","ï¿½":"\\ufffd","ï¿¾":"\\ufffe","ï¿¿":"\\uffff"},f=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=JSON&&JSON.stringify||function(e){return u.lastIndex=0,u.test(e)&&(e=e.replace(u,function(e){return l[e]})),'"'+e+'"'};n.quote=function(e){var t=d(e);return f.lastIndex=0,f.test(t)?(c||(c=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n}(f)),t.replace(f,function(e){return c[e]})):t};var p=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var e={},t=0;t<p.length;t++){var n=p[t];e[n]=_[n]&&_[n].enabled()}return e},n.detectProtocols=function(e,t,n){var r={},i=[];t||(t=p);for(var o=0;o<t.length;o++){var a=t[o];r[a]=e[a]}var s=function(e){var t=e.shift();r[t]?i.push(t):e.length>0&&s(e)};return!1!==n.websocket&&s(["websocket"]),r["xhr-streaming"]&&!n.null_origin?i.push("xhr-streaming"):!r["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):i.push("xdr-streaming"),r["xhr-polling"]&&!n.null_origin?i.push("xhr-polling"):!r["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):i.push("xdr-polling"),i};var h="_sockjs_global";n.createHook=function(){var e="a"+n.random_string(8);if(!(h in t)){var r={};t[h]=function(e){return e in r||(r[e]={id:e,del:function(){delete r[e]}}),r[e]}}return t[h](e)},n.attachMessage=function(e){n.attachEvent("message",e)},n.attachEvent=function(n,r){void 0!==t.addEventListener?t.addEventListener(n,r,!1):(e.attachEvent("on"+n,r),t.attachEvent("on"+n,r))},n.detachMessage=function(e){n.detachEvent("message",e)},n.detachEvent=function(n,r){void 0!==t.addEventListener?t.removeEventListener(n,r,!1):(e.detachEvent("on"+n,r),t.detachEvent("on"+n,r))};var g={},m=!1,v=function(){for(var e in g)g[e](),delete g[e]};n.attachEvent("unload",function(){m||(m=!0,v())}),n.unload_add=function(e){var t=n.random_string(8);return g[t]=e,m&&n.delay(v),t},n.unload_del=function(e){e in g&&delete g[e]},n.createIframe=function(t,r){var i,o,a=e.createElement("iframe"),s=function(){clearTimeout(i);try{a.onload=null}catch(e){}a.onerror=null},c=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(o))},u=function(e){a&&(c(),r(e))};return a.src=t,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(i),i=setTimeout(function(){u("onload timeout")},2e3)},e.body.appendChild(a),i=setTimeout(function(){u("timeout")},15e3),o=n.unload_add(c),{post:function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(e){}},cleanup:c,loaded:s}},n.createHtmlfile=function(e,r){var i,o,a,c=new ActiveXObject("htmlfile"),u=function(){clearTimeout(i)},l=function(){c&&(u(),n.unload_del(o),a.parentNode.removeChild(a),a=c=null,CollectGarbage())};c.open(),c.write('<html><script>document.domain="'+document.domain+'";<\/script></html>'),c.close(),c.parentWindow[s]=t[s];var f=c.createElement("div");return c.body.appendChild(f),a=c.createElement("iframe"),f.appendChild(a),a.src=e,i=setTimeout(function(){var e;e="timeout",c&&(l(),r(e))},15e3),o=n.unload_add(l),{post:function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(e){}},cleanup:l,loaded:u}};var y=function(){};(y.prototype=new o(["chunk","finish"]))._start=function(e,r,i,o){var a=this;try{a.xhr=new XMLHttpRequest}catch(e){}if(!a.xhr)try{a.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}(t.ActiveXObject||t.XDomainRequest)&&(r+=(-1===r.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(e,r,!0)}catch(e){return a.emit("finish",0,""),void a._cleanup()}if(o&&o.no_credentials||(a.xhr.withCredentials="true"),o&&o.headers)for(var s in o.headers)a.xhr.setRequestHeader(s,o.headers[s]);a.xhr.onreadystatechange=function(){if(a.xhr){var e=a.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&a.emit("chunk",t,n);break;case 4:1223===(t=e.status)&&(t=204),a.emit("finish",t,e.responseText),a._cleanup(!1)}}},a.xhr.send(i)},y.prototype._cleanup=function(e){var t=this;if(t.xhr){if(n.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(e){}t.unload_ref=t.xhr=null}},y.prototype.close=function(){this.nuke(),this._cleanup(!0)},(n.XHRCorsObject=function(){var e=this,t=arguments;n.delay(function(){e._start.apply(e,t)})}).prototype=new y,(n.XHRLocalObject=function(e,t,r){var i=this;n.delay(function(){i._start(e,t,r,{no_credentials:!0})})}).prototype=new y;var b=n.XDRObject=function(e,t,r){var i=this;n.delay(function(){i._start(e,t,r)})};b.prototype=new o(["chunk","finish"]),b.prototype._start=function(e,t,r){var i=this,o=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var a=o.ontimeout=o.onerror=function(){i.emit("finish",0,""),i._cleanup(!1)};o.onprogress=function(){i.emit("chunk",200,o.responseText)},o.onload=function(){i.emit("finish",200,o.responseText),i._cleanup(!1)},i.xdr=o,i.unload_ref=n.unload_add(function(){i._cleanup(!0)});try{i.xdr.open(e,t),i.xdr.send(r)}catch(e){a()}},b.prototype._cleanup=function(e){var t=this;if(t.xdr){if(n.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(e){}t.unload_ref=t.xdr=null}},b.prototype.close=function(){this.nuke(),this._cleanup(!0)},n.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:N.enabled()?3:4};var _=function(e,r,i){if(this===t)return new _(e,r,i);var o,a=this;a._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},i&&n.objectExtend(a._options,i),a._base_url=n.amendUrl(e),a._server=a._options.server||n.random_number_string(1e3),a._options.protocols_whitelist&&a._options.protocols_whitelist.length?o=a._options.protocols_whitelist:(o="string"==typeof r&&r.length>0?[r]:n.isArray(r)?r:null)&&a._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.'),a._protocols=[],a.protocol=null,a.readyState=_.CONNECTING,a._ir=B(a._base_url),a._ir.onfinish=function(e,t){a._ir=null,e?(a._options.info&&(e=n.objectExtend(e,a._options.info)),a._options.rtt&&(t=a._options.rtt),a._applyInfo(e,t,o),a._didClose()):a._didClose(1002,"Can't connect to server",!0)}};_.prototype=new r,_.version="0.3.4",_.CONNECTING=0,_.OPEN=1,_.CLOSING=2,_.CLOSED=3,_.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},_.prototype._dispatchOpen=function(){var e=this;e.readyState===_.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=_.OPEN,e.dispatchEvent(new i("open"))):e._didClose(1006,"Server lost session")},_.prototype._dispatchMessage=function(e){this.readyState===_.OPEN&&this.dispatchEvent(new i("message",{data:e}))},_.prototype._dispatchHeartbeat=function(e){this.readyState===_.OPEN&&this.dispatchEvent(new i("heartbeat",{}))},_.prototype._didClose=function(e,t,r){var o=this;if(o.readyState!==_.CONNECTING&&o.readyState!==_.OPEN&&o.readyState!==_.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var a=new i("close",{code:e,reason:t,wasClean:n.userSetCode(e)});if(!n.userSetCode(e)&&o.readyState===_.CONNECTING&&!r){if(o._try_next_protocol(a))return;a=new i("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}o.readyState=_.CLOSED,n.delay(function(){o.dispatchEvent(a)})},_.prototype._didMessage=function(e){var t=this;switch(e.slice(0,1)){case"o":t._dispatchOpen();break;case"a":for(var n=JSON.parse(e.slice(1)||"[]"),r=0;r<n.length;r++)t._dispatchMessage(n[r]);break;case"m":n=JSON.parse(e.slice(1)||"null"),t._dispatchMessage(n);break;case"c":n=JSON.parse(e.slice(1)||"[]"),t._didClose(n[0],n[1]);break;case"h":t._dispatchHeartbeat()}},_.prototype._try_next_protocol=function(t){var r=this;for(r.protocol&&(r._debug("Closed transport:",r.protocol,""+t),r.protocol=null),r._transport_tref&&(clearTimeout(r._transport_tref),r._transport_tref=null);;){var i=r.protocol=r._protocols.shift();if(!i)return!1;if(_[i]&&!0===_[i].need_body&&(!e.body||void 0!==e.readyState&&"complete"!==e.readyState))return r._protocols.unshift(i),r.protocol="waiting-for-load",n.attachEvent("load",function(){r._try_next_protocol()}),!0;if(_[i]&&_[i].enabled(r._options)){var o=_[i].roundTrips||1,a=(r._options.rto||0)*o||5e3;r._transport_tref=n.delay(a,function(){r.readyState===_.CONNECTING&&r._didClose(2007,"Transport timeouted")});var s=n.random_string(8),c=r._base_url+"/"+r._server+"/"+s;return r._debug("Opening transport:",i," url:"+c," RTO:"+r._options.rto),r._transport=new _[i](r,c,r._base_url),!0}r._debug("Skipping transport:",i)}},_.prototype.close=function(e,t){var r=this;if(e&&!n.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return(r.readyState===_.CONNECTING||r.readyState===_.OPEN)&&(r.readyState=_.CLOSING,r._didClose(e||1e3,t||"Normal closure"),!0)},_.prototype.send=function(e){var t=this;if(t.readyState===_.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===_.OPEN&&t._transport.doSend(n.quote(""+e)),!0},_.prototype._applyInfo=function(t,r,i){var o=this;o._options.info=t,o._options.rtt=r,o._options.rto=n.countRTO(r),o._options.info.null_origin=!e.domain;var a=n.probeProtocols();o._protocols=n.detectProtocols(a,i,t)};var S=_.websocket=function(e,r){var i=this,o=r+"/websocket";o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),i.ri=e,i.url=o;var a=t.WebSocket||t.MozWebSocket;i.ws=new a(i.url),i.ws.onmessage=function(e){i.ri._didMessage(e.data)},i.unload_ref=n.unload_add(function(){i.ws.close()}),i.ws.onclose=function(){i.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};S.prototype.doSend=function(e){this.ws.send("["+e+"]")},S.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),n.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},S.enabled=function(){return!!t.WebSocket||!!t.MozWebSocket},S.roundTrips=2;var C=function(){};C.prototype.send_constructor=function(e){this.send_buffer=[],this.sender=e},C.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},C.prototype.send_schedule_wait=function(){var e,t=this;t.send_stop=function(){t.send_stop=null,clearTimeout(e)},e=n.delay(25,function(){t.send_stop=null,t.send_schedule()})},C.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,!1===t?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},C.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var w=function(t,r,i){var o=this;if(!("_send_form"in o)){var a=o._send_form=e.createElement("form");(c=o._send_area=e.createElement("textarea")).name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(c),e.body.appendChild(a)}a=o._send_form;var s,c=o._send_area,u="a"+n.random_string(8);a.target=u,a.action=t+"/jsonp_send?i="+u;try{s=e.createElement('<iframe name="'+u+'">')}catch(t){(s=e.createElement("iframe")).name=u}s.id=u,a.appendChild(s),s.style.display="none";try{c.value=r}catch(e){n.log("Your browser is seriously broken. Go home! "+e.message)}a.submit();var l=function(e){s.onerror&&(s.onreadystatechange=s.onerror=s.onload=null,n.delay(500,function(){s.parentNode.removeChild(s),s=null}),c.value="",i(!0))};return s.onerror=s.onload=l,s.onreadystatechange=function(e){"complete"==s.readyState&&l()},l},T=function(t,r){var i,o,a=e.createElement("script"),s=function(e){o&&(o.parentNode.removeChild(o),o=null),a&&(clearTimeout(i),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,r(e),r=null)},c=!1,u=null;if(a.id="a"+n.random_string(8),a.src=t,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(e){u||(u=setTimeout(function(){c||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(e){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(e){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){c=!0;try{a.onclick()}catch(e){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},void 0===a.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))(o=e.createElement("script")).text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=o.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(e){}a.async=!0}void 0!==a.async&&(a.async=!0),i=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var l=e.getElementsByTagName("head")[0];return l.insertBefore(a,l.firstChild),o&&l.insertBefore(o,l.firstChild),s},E=_["jsonp-polling"]=function(e,t){n.polluteGlobalNamespace();var r=this;r.ri=e,r.trans_url=t,r.send_constructor(w),r._schedule_recv()};E.prototype=new C,E.prototype._schedule_recv=function(){var e=this;e._recv_stop=x(e.trans_url+"/jsonp",T,function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()})},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var x=function(e,r,i){var o="a"+n.random_string(6),a=0,c=r(e+"?c="+escape(s+"."+o),function(e){switch(a){case 0:delete t[s][o],i(e);break;case 1:i(e),a=2;break;case 2:delete t[s][o]}});return t[s][o]=c,function(){t[s][o]&&(a=1,t[s][o](n.closeFrame(1e3,"JSONP user aborted read")))}},k=function(){};(k.prototype=new C).run=function(e,t,n,r,i){var o=this;o.ri=e,o.trans_url=t,o.send_constructor(function(e){return function(t,n,r){return new e("POST",t+"/xhr_send",n).onfinish=function(e,t){r(200===e||204===e,"http status "+e)},function(e){r(!1,e)}}}(i)),o.poll=new H(e,r,t+n,i)},k.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var A=_["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",$,n.XHRCorsObject)};A.prototype=new k,A.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},A.roundTrips=2,A.need_body=!0;var R=_["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",$,n.XDRObject)};R.prototype=new k,R.enabled=function(){return!!t.XDomainRequest},R.roundTrips=2;var I=_["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",$,n.XHRCorsObject)};I.prototype=new k,I.enabled=A.enabled,I.roundTrips=2;var M=_["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",$,n.XDRObject)};M.prototype=new k,M.enabled=R.enabled,M.roundTrips=2;var N=function(){};N.prototype.i_constructor=function(e,t,r){var i=this;i.ri=e,i.origin=n.getOrigin(r),i.base_url=r,i.trans_url=t;var o=r+"/iframe.html";i.ri._options.devel&&(o+="?t="+ +new Date),i.window_id=n.random_string(8),o+="#"+i.window_id,i.iframeObj=n.createIframe(o,function(e){i.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),i.onmessage_cb=n.bind(i.onmessage,i),n.attachMessage(i.onmessage_cb)},N.prototype.doCleanup=function(){var e=this;if(e.iframeObj){n.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(e){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},N.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),r=e.data.slice(8,9),i=e.data.slice(9);if(n===t.window_id)switch(r){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([_.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(i)}}},N.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},N.prototype.doSend=function(e){this.postMessage("m",e)},N.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"==typeof t.postMessage)&&!e};var O,j=function(e,r){parent!==t?parent.postMessage(O+e+(r||""),"*"):n.log("Can't postMessage, no parent window.",e,r)},P=function(){};P.prototype._didClose=function(e,t){j("t",n.closeFrame(e,t))},P.prototype._didMessage=function(e){j("t",e)},P.prototype._doSend=function(e){this._transport.doSend(e)},P.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,_.bootstrap_iframe=function(){var r;O=e.location.hash.slice(1),n.attachMessage(function(e){if(e.source===parent&&(void 0===n.parent_origin&&(n.parent_origin=e.origin),e.origin===n.parent_origin)){var i=e.data.slice(0,8),o=e.data.slice(8,9),a=e.data.slice(9);if(i===O)switch(o){case"s":var s=JSON.parse(a),c=s[0],u=s[1],l=s[2],f=s[3];if(c!==_.version&&n.log('Incompatibile SockJS! Main site uses: "'+c+'", the iframe: "'+_.version+'".'),!n.flatUrl(l)||!n.flatUrl(f))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(l)||!n.isSameOriginUrl(f))return void n.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,l,f])+")");(r=new P)._transport=new P[u](r,l,f);break;case"m":r._doSend(a);break;case"c":r&&r._doCleanup(),r=null}}}),j("s")};var L=function(e,t){var r=this;n.delay(function(){r.doXhr(e,t)})};(L.prototype=new o(["finish"])).doXhr=function(e,t){var r=this,i=(new Date).getTime(),o=new t("GET",e+"/info"),a=n.delay(8e3,function(){o.ontimeout()});o.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var n=(new Date).getTime()-i,o=JSON.parse(t);"object"!=typeof o&&(o={}),r.emit("finish",o,n)}else r.emit("finish")},o.ontimeout=function(){o.close(),r.emit("finish")}};var D=function(t){var r=this,i=function(){var e=new N;e.protocol="w-iframe-info-receiver";var n=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var n=JSON.parse(t.substr(1)),i=n[0],o=n[1];r.emit("finish",i,o)}else r.emit("finish");e.doCleanup(),e=null},i={_options:{},_didClose:n,_didMessage:n};e.i_constructor(i,t,t)};e.body?i():n.attachEvent("load",i)};D.prototype=new o(["finish"]);var F=function(){var e=this;n.delay(function(){e.emit("finish",{},2e3)})};F.prototype=new o(["finish"]);var B=function(e){if(n.isSameOriginUrl(e))return new L(e,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new L(e,n.XHRLocalObject);case 2:return new L(e,n.XDRObject);case 3:return new D(e);default:return new F}};(P["w-iframe-info-receiver"]=function(e,t,r){new L(r,n.XHRLocalObject).onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}}).prototype.doCleanup=function(){};var U=_["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};U.prototype=new N,U.enabled=function(){return"EventSource"in t&&N.enabled()},U.need_body=!0,U.roundTrips=3,(P["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",G,n.XHRLocalObject)}).prototype=new k;var V=_["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};V.prototype=new N,V.enabled=function(){return t.XMLHttpRequest&&N.enabled()},V.need_body=!0,V.roundTrips=3,(P["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",$,n.XHRLocalObject)}).prototype=new k;var q=_["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};q.prototype=new N,q.enabled=function(){return N.enabled()},q.need_body=!0,q.roundTrips=3,(P["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",z,n.XHRLocalObject)}).prototype=new k;var H=function(e,t,n,r){var i=this;i.ri=e,i.Receiver=t,i.recv_url=n,i.AjaxObject=r,i._scheduleRecv()};H.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject);t.onmessage=function(t){e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},H.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var G=function(e){var t=this,r=new EventSource(e);r.onmessage=function(e){t.dispatchEvent(new i("message",{data:unescape(e.data)}))},t.es_close=r.onerror=function(e,o){var a=o?"user":2!==r.readyState?"network":"permanent";t.es_close=r.onmessage=r.onerror=null,r.close(),r=null,n.delay(200,function(){t.dispatchEvent(new i("close",{reason:a}))})}};G.prototype=new r,G.prototype.abort=function(){this.es_close&&this.es_close({},!0)};var W,z=function(e){var r=this;n.polluteGlobalNamespace(),r.id="a"+n.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape(s+"."+r.id);var o,a=function(){if(void 0===W)if("ActiveXObject"in t)try{W=!!new ActiveXObject("htmlfile")}catch(e){}else W=!1;return W}()?n.createHtmlfile:n.createIframe;t[s][r.id]={start:function(){o.loaded()},message:function(e){r.dispatchEvent(new i("message",{data:e}))},stop:function(){r.iframe_close({},"network")}},r.iframe_close=function(e,n){o.cleanup(),r.iframe_close=o=null,delete t[s][r.id],r.dispatchEvent(new i("close",{reason:n}))},o=a(e,function(e){r.iframe_close({},"permanent")})};z.prototype=new r,z.prototype.abort=function(){this.iframe_close&&this.iframe_close({},"user")};var $=function(e,t){var n=this,r=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var o=t.slice(r),a=o.indexOf("\n");if(-1===a)break;r+=a+1;var s=o.slice(0,a);n.dispatchEvent(new i("message",{data:s}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var r=200===e?"network":"permanent";n.dispatchEvent(new i("close",{reason:r}))}};return $.prototype=new r,$.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new i("close",{reason:"user"})),e.xo=null)},_.getUtils=function(){return n},_.getIframeTransport=function(){return N},_}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),__webpack_require__(14)&&(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return SockJS}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,t,n){(function(t,n,r){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return i(n||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function n(e){var n=new t(e),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}e.any=function(e){return n(e)},e.prototype.any=function(){return n(this)}}},{}],2:[function(e,n,r){"use strict";var i;try{throw new Error}catch(e){i=e}var o=e("./schedule"),a=e("./queue"),s=e("./util");function c(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=o}function u(e,t,n){this._lateQueue.push(e,t,n),this._queueTick()}function l(e,t,n){this._normalQueue.push(e,t,n),this._queueTick()}function f(e){this._normalQueue._pushOne(e),this._queueTick()}c.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},c.prototype.hasCustomScheduler=function(){return this._customScheduler},c.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},c.prototype.disableTrampolineIfNecessary=function(){s.hasDevTools&&(this._trampolineEnabled=!1)},c.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},c.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},c.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout(function(){e(t)},0);else try{this._schedule(function(){e(t)})}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.hasDevTools?(c.prototype.invokeLater=function(e,t,n){this._trampolineEnabled?u.call(this,e,t,n):this._schedule(function(){setTimeout(function(){e.call(t,n)},100)})},c.prototype.invoke=function(e,t,n){this._trampolineEnabled?l.call(this,e,t,n):this._schedule(function(){e.call(t,n)})},c.prototype.settlePromises=function(e){this._trampolineEnabled?f.call(this,e):this._schedule(function(){e._settlePromises()})}):(c.prototype.invokeLater=u,c.prototype.invoke=l,c.prototype.settlePromises=f),c.prototype._drainQueue=function(e){for(;e.length()>0;){var t=e.shift();if("function"==typeof t){var n=e.shift(),r=e.shift();t.call(n,r)}else t._settlePromises()}},c.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},c.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},c.prototype._reset=function(){this._isTickUsed=!1},n.exports=c,n.exports.firstLineError=i},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){var i=!1,o=function(e,t){this._reject(t)},a=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(o,o,null,this,e)},s=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},c=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(o){i||(i=!0,e.prototype._propagateFrom=r.propagateFromFunction(),e.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new e(t);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(u),u instanceof e){var d={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:u};f._then(t,a,void 0,l,d),u._then(s,c,void 0,l,d),l._setOnCancel(u)}else l._resolveCallback(f);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,n){return e.resolve(n).bind(t)}}},{}],4:[function(e,t,n){"use strict";var r;"undefined"!=typeof Promise&&(r=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=r)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){var n=e("./util"),r=n.canEvaluate;function i(e){var r=this.pop(),i=function(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var o="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(o)}return i}(e,r);return i.apply(e,this)}function o(e){return e[this]}function a(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}n.isIdentifier,t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(i,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t,n="number"==typeof e;if(n)t=a;else if(r){var i=(void 0)(e);t=null!==i?i:o}else t=o;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),a=o.tryCatch,s=o.errorObj,c=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var n=e._cancellationParent;if(null==n||!n._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(o.isArray(e))for(var n=0;n<e.length;++n)this._doInvokeOnCancel(e[n],t);else if(void 0!==e)if("function"==typeof e){if(!t){var r=a(e).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=e("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(e,a,s){return function(c){var u=s._boundValue();e:for(var l=0;l<e.length;++l){var f=e[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(c instanceof f)return i(a).call(u,c)}else if("function"==typeof f){var d=i(f).call(u,c);if(d===o)return d;if(d)return i(a).call(u,c)}else if(n.isObject(c)){for(var p=r(f),h=0;h<p.length;++h){var g=p[h];if(f[g]!=c[g])continue e}return i(a).call(u,c)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,n){"use strict";t.exports=function(e){var t=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var e=n.length-1;if(e>=0)return n[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var e=n.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},r.CapturedTrace=null,r.create=function(){if(t)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=e.prototype._pushContext,o=e.prototype._popContext,a=e._peekContext,s=e.prototype._peekContext,c=e.prototype._promiseCreated;r.deactivateLongStackTraces=function(){e.prototype._pushContext=n,e.prototype._popContext=o,e._peekContext=a,e.prototype._peekContext=s,e.prototype._promiseCreated=c,t=!1},t=!0,e.prototype._pushContext=r.prototype._pushContext,e.prototype._popContext=r.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},r}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){var i,o,a,s=n._getDomain,c=n._async,u=e("./errors").Warning,l=e("./util"),f=l.canAttachTrace,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,p=/\((?:timers\.js):\d+:\d+\)/,h=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,g=null,m=null,v=!1,y=!(0==l.env("BLUEBIRD_DEBUG")),b=!(0==l.env("BLUEBIRD_WARNINGS")||!y&&!l.env("BLUEBIRD_WARNINGS")),_=!(0==l.env("BLUEBIRD_LONG_STACK_TRACES")||!y&&!l.env("BLUEBIRD_LONG_STACK_TRACES")),S=0!=l.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(b||!!l.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0==(524288&this._bitField)){this._setRejectionIsUnhandled();var e=this;setTimeout(function(){e._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",i,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,e,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(e,t,n){return B(e,t,n||this)},n.onPossiblyUnhandledRejection=function(e){var t=s();o="function"==typeof e?null===t?e:l.domainBind(t,e):void 0},n.onUnhandledRejectionHandled=function(e){var t=s();i="function"==typeof e?null===t?e:l.domainBind(t,e):void 0};var C=function(){};n.longStackTraces=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!Q.longStackTraces&&W()){var e=n.prototype._captureStackTrace,t=n.prototype._attachExtraTrace;Q.longStackTraces=!0,C=function(){if(c.haveItemsQueued()&&!Q.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=e,n.prototype._attachExtraTrace=t,r.deactivateLongStackTraces(),c.enableTrampoline(),Q.longStackTraces=!1},n.prototype._captureStackTrace=D,n.prototype._attachExtraTrace=F,r.activateLongStackTraces(),c.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return Q.longStackTraces&&W()};var w=function(){try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new CustomEvent(e.toLowerCase(),{detail:t,cancelable:!0});return!l.global.dispatchEvent(n)}}if("function"==typeof Event){var e=new Event("CustomEvent");return l.global.dispatchEvent(e),function(e,t){var n=new Event(e.toLowerCase(),{cancelable:!0});return n.detail=t,!l.global.dispatchEvent(n)}}var e=document.createEvent("CustomEvent");return e.initCustomEvent("testingtheevent",!1,!0,{}),l.global.dispatchEvent(e),function(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e.toLowerCase(),!1,!0,t),!l.global.dispatchEvent(n)}}catch(e){}return function(){return!1}}(),T=l.isNode?function(){return t.emit.apply(t,arguments)}:l.global?function(e){var t="on"+e.toLowerCase(),n=l.global[t];return!!n&&(n.apply(l.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function E(e,t){return{promise:t}}var x={promiseCreated:E,promiseFulfilled:E,promiseRejected:E,promiseResolved:E,promiseCancelled:E,promiseChained:function(e,t,n){return{promise:t,child:n}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,n){return{reason:t,promise:n}},rejectionHandled:E},k=function(e){var t=!1;try{t=T.apply(null,arguments)}catch(e){c.throwLater(e),t=!0}var n=!1;try{n=w(e,x[e].apply(null,arguments))}catch(e){c.throwLater(e),n=!0}return n||t};function A(){return!1}function R(e,t,n){var r=this;try{e(t,n,function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+l.toString(e));r._attachCancellationCallback(e)})}catch(e){return e}}function I(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?l.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function M(){return this._onCancelField}function N(e){this._onCancelField=e}function O(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(e,t){if(0!=(1&t)){this._cancellationParent=e;var n=e._branchesRemainingToCancel;void 0===n&&(n=0),e._branchesRemainingToCancel=n+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}n.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?n.longStackTraces():!e.longStackTraces&&n.hasLongStackTraces()&&C()),"warnings"in e){var t=e.warnings;Q.warnings=!!t,S=Q.warnings,l.isObject(t)&&"wForgottenReturn"in t&&(S=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!Q.cancellation){if(c.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=O,n.prototype._propagateFrom=j,n.prototype._onCancel=M,n.prototype._setOnCancel=N,n.prototype._attachCancellationCallback=I,n.prototype._execute=R,P=j,Q.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!Q.monitoring?(Q.monitoring=!0,n.prototype._fireEvent=k):!e.monitoring&&Q.monitoring&&(Q.monitoring=!1,n.prototype._fireEvent=A)),n},n.prototype._fireEvent=A,n.prototype._execute=function(e,t,n){try{e(t,n)}catch(e){return e}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(e){},n.prototype._attachCancellationCallback=function(e){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(e,t){};var P=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function L(){var e=this._boundTo;return void 0!==e&&e instanceof n?e.isFulfilled()?e.value():void 0:e}function D(){this._trace=new X(this._peekContext())}function F(e,t){if(f(e)){var n=this._trace;if(void 0!==n&&t&&(n=n._parent),void 0!==n)n.attachExtraTrace(e);else if(!e.__stackCleaned__){var r=V(e);l.notEnumerableProp(e,"stack",r.message+"\n"+r.stack.join("\n")),l.notEnumerableProp(e,"__stackCleaned__",!0)}}}function B(e,t,r){if(Q.warnings){var i,o=new u(e);if(t)r._attachExtraTrace(o);else if(Q.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=V(o);o.stack=a.message+"\n"+a.stack.join("\n")}k("warning",o)||q(o,"",!0)}}function U(e){for(var t=[],n=0;n<e.length;++n){var r=e[n],i="    (No stack trace)"===r||g.test(r),o=i&&z(r);i&&!o&&(v&&" "!==r.charAt(0)&&(r="    "+r),t.push(r))}return t}function V(e){var t=e.stack,n=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),n=0;n<t.length;++n){var r=t[n];if("    (No stack trace)"===r||g.test(r))break}return n>0&&"SyntaxError"!=e.name&&(t=t.slice(n)),t}(e):["    (No stack trace)"],{message:n,stack:"SyntaxError"==e.name?t:U(t)}}function q(e,t,n){if("undefined"!=typeof console){var r;if(l.isObject(e)){var i=e.stack;r=t+m(i,e)}else r=t+String(e);"function"==typeof a?a(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function H(e,t,n,r){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(r):t(n,r))}catch(e){c.throwLater(e)}"unhandledRejection"===e?k(e,n,r)||i||q(n,"Unhandled rejection "):k(e,r)}function G(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():l.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{var n=JSON.stringify(e);t=n}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){return e.length<41?e:e.substr(0,38)+"..."}(t)+">, no stack trace)"}function W(){return"function"==typeof K}var z=function(){return!1},$=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function J(e){var t=e.match($);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function X(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);K(this,X),t>32&&this.uncycle()}l.inherits(X,Error),r.CapturedTrace=X,X.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],n={},r=0,i=this;void 0!==i;++r)t.push(i),i=i._parent;for(var r=(e=this._length=r)-1;r>=0;--r){var o=t[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<e;++r){var a=t[r].stack,s=n[a];if(void 0!==s&&s!==r){s>0&&(t[s-1]._parent=void 0,t[s-1]._length=1),t[r]._parent=void 0,t[r]._length=1;var c=r>0?t[r-1]:this;s<e-1?(c._parent=t[s+1],c._parent.uncycle(),c._length=c._parent._length+1):(c._parent=void 0,c._length=1);for(var u=c._length+1,l=r-2;l>=0;--l)t[l]._length=u,u++;return}}}},X.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=V(e),n=t.message,r=[t.stack],i=this;void 0!==i;)r.push(U(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],n=1;n<e.length;++n){for(var r=e[n],i=t.length-1,o=t[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(var s=a;s>=0;--s){var c=r[s];if(t[i]!==c)break;t.pop(),i--}t=r}}(r),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(r),l.notEnumerableProp(e,"stack",function(e,t){for(var n=0;n<t.length-1;++n)t[n].push("From previous event:"),t[n]=t[n].join("\n");return n<t.length&&(t[n]=t[n].join("\n")),e+"\n"+t.join("\n")}(n,r)),l.notEnumerableProp(e,"__stackCleaned__",!0)}};var K=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():G(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,g=e,m=t;var n=Error.captureStackTrace;return z=function(e){return d.test(e)},function(e,t){Error.stackTraceLimit+=6,n(e,t),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return g=/@/,m=t,v=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){r="stack"in e}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(m=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?G(t):t.toString()},null):(g=e,m=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(a=function(e){console.warn(e)},l.isNode&&t.stderr.isTTY?a=function(e,t){var n=t?"[33m":"[31m";console.warn(n+e+"[0m\n")}:l.isNode||"string"!=typeof(new Error).stack||(a=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var Q={warnings:b,longStackTraces:!1,cancellation:!1,monitoring:!1};return _&&n.longStackTraces(),{longStackTraces:function(){return Q.longStackTraces},warnings:function(){return Q.warnings},cancellation:function(){return Q.cancellation},monitoring:function(){return Q.monitoring},propagateFromFunction:function(){return P},boundValueFunction:function(){return L},checkForgottenReturns:function(e,t,n,r,i){if(void 0===e&&null!==t&&S){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(t._trace){for(var s=t._trace.stack.split("\n"),c=U(s),u=c.length-1;u>=0;--u){var l=c[u];if(!p.test(l)){var f=l.match(h);f&&(o="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(c.length>0)for(var d=c[0],u=0;u<s.length;++u)if(s[u]===d){u>0&&(a="\n"+s[u-1]);break}}var g="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(g,!0,t)}},setBounds:function(e,t){if(W()){for(var n,r,i=e.stack.split("\n"),o=t.stack.split("\n"),a=-1,s=-1,c=0;c<i.length;++c){var u=J(i[c]);if(u){n=u.fileName,a=u.line;break}}for(var c=0;c<o.length;++c){var u=J(o[c]);if(u){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(z=function(e){if(d.test(e))return!0;var t=J(e);return!!(t&&t.fileName===n&&a<=t.line&&t.line<=s)})}},warn:B,deprecated:function(e,t){var n=e+" is deprecated and will be removed in a future version.";return t&&(n+=" Use "+t+" instead."),B(n)},CapturedTrace:X,fireDomEvent:w,fireGlobalEvent:T}}},{"./errors":12,"./util":36}],10:[function(e,t,n){"use strict";t.exports=function(e){function t(){return this.value}function n(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(n){return n instanceof e&&n.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:n},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(n,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:e},void 0);var t=arguments[1];return this.caught(e,function(){throw t})},e.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof e&&n.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:n},void 0);var r=arguments[1];return r instanceof e&&r.suppressUnhandledRejections(),this.caught(n,function(){return r})}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.reduce,r=e.all;function i(){return r(this)}e.prototype.each=function(e){return n(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return n(this,e,t,t)},e.each=function(e,r){return n(e,r,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,r){return n(e,r,t,t)}}},{}],12:[function(e,t,n){"use strict";var r,i,o=e("./es5"),a=o.freeze,s=e("./util"),c=s.inherits,u=s.notEnumerableProp;function l(e,t){function n(r){if(!(this instanceof n))return new n(r);u(this,"message","string"==typeof r?r:t),u(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var f=l("Warning","warning"),d=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),h=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(e){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<g.length;++m)"function"==typeof Array.prototype[g[m]]&&(h.prototype[g[m]]=Array.prototype[g[m]]);o.defineProperty(h.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),h.prototype.isOperational=!0;var v=0;function y(e){if(!(this instanceof y))return new y(e);u(this,"name","OperationalError"),u(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(u(this,"message",e.message),u(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h.prototype.toString=function(){var e=Array(4*v+1).join(" "),t="\n"+e+"AggregateError of:\n";v++,e=Array(4*v+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=e+i[o];r=i.join("\n"),t+=r+"\n"}return v--,t},c(y,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:d,TimeoutError:p,OperationalError:y,RejectionError:y,AggregateError:h}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:f}},{"./es5":13,"./util":36}],13:[function(e,t,n){var r=function(){"use strict";return void 0===this}();if(r)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t};t.exports={isArray:function(e){try{return"[object Array]"===o.call(e)}catch(e){return!1}},keys:s,names:s,defineProperty:function(e,t,n){return e[t]=n.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e,t){var n=e.map;e.prototype.filter=function(e,r){return n(this,e,r,t)},e.filter=function(e,r,i){return n(e,r,i,t)}}},{}],15:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.CancellationError,a=i.errorObj,s=e("./catch_filter")(r);function c(e,t,n){this.promise=e,this.type=t,this.handler=n,this.called=!1,this.cancelPromise=null}function u(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function d(e){if(!l(this,e))return a.e=e,a}function p(e){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),e);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var p=n(c,i);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var h=new o("late cancellation observer");return i._attachExtraTrace(h),a.e=h,a}p.isPending()&&p._attachCancellationCallback(new u(this))}return p._then(f,d,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=e,a):(l(this),e)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,n,r){return"function"!=typeof e?this.then():this._then(n,r,void 0,new c(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,p,p)},t.prototype.tap=function(e){return this._passThrough(e,1,p)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,p);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var c=arguments[r];if(!i.isObject(c))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(c)));o[a++]=c}o.length=a;var u=arguments[r];return this._passThrough(s(o,u,this),1,void 0,p)},c}},{"./catch_filter":7,"./util":36}],16:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=e("./errors"),c=s.TypeError,u=e("./util"),l=u.errorObj,f=u.tryCatch,d=[];function p(e,n,i,o){if(a.cancellation()){var s=new t(r),c=this._finallyPromise=new t(r);this._promise=s.lastly(function(){return c}),s._captureStackTrace(),s._setOnCancel(this)}else{var u=this._promise=new t(r);u._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(p,o),p.prototype._isResolved=function(){return null===this._promise},p.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},p.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n=void 0!==this._generator.return;if(n)this._promise._pushContext(),e=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=f(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},p.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=f(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=f(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},p.prototype.promise=function(){return this._promise},p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},p.prototype._continue=function(e){var n=this._promise;if(e===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof t||null!==(o=function(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=f(n[o])(e);if(r._popContext(),a===l){r._pushContext();var s=t.reject(l.e);return r._popContext(),s}var c=i(a,r);if(c instanceof t)return c}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new c("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(t).yieldHandler,r=p,i=(new Error).stack;return function(){var t=e.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=t,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new c("expecting a function but got "+u.classString(e));d.push(e)},t.spawn=function(e){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new p(e,this),i=r.promise();return r._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=e("./util");s.canEvaluate,s.tryCatch,s.errorObj,t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var r=[].slice.call(arguments);e&&r.pop();var i=new n(r).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=t._getDomain,c=e("./util"),u=c.tryCatch,l=c.errorObj,f=t._async;function d(e,t,n,r){this.constructor$(e),this._promise._captureStackTrace();var i=s();this._callback=null===i?t:c.domainBind(i,t),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function p(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+c.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+c.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+c.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new d(e,n,a,o).promise()}c.inherits(d,n),d.prototype._asyncInit=function(){this._init$(void 0,-2)},d.prototype._init=function(){},d.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),s=this._preservedValues,c=this._limit;if(n<0){if(r[n=-1*n-1]=e,c>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(c>=1&&this._inFlight>=c)return r[n]=e,this._queue.push(n),!1;null!==s&&(s[n]=e);var f=this._promise,d=this._callback,p=f._boundValue();f._pushContext();var h=u(d).call(p,e,n,o),g=f._popContext();if(a.checkForgottenReturns(h,g,null!==s?"Promise.filter":"Promise.map",f),h===l)return this._reject(h.e),!0;var m=i(h,this._promise);if(m instanceof t){var v=(m=m._target())._bitField;if(0==(50397184&v))return c>=1&&this._inFlight++,r[n]=m,m._proxy(this,-1*(n+1)),!1;if(0==(33554432&v))return 0!=(16777216&v)?(this._reject(m._reason()),!0):(this._cancel(),!0);h=m._value()}r[n]=h}var y=++this._totalResolved;return y>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},d.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,n=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var r=e.pop();this._promiseFulfilled(n[r],r)}},d.prototype._filter=function(e,t){for(var n=t.length,r=new Array(n),i=0,o=0;o<n;++o)e[o]&&(r[i++]=t[o]);r.length=i,this._resolve(r)},d.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return p(this,e,t,null)},t.map=function(e,t,n,r){return p(e,t,n,r)}}},{"./util":36}],19:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var a=e("./util"),s=a.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+a.classString(e));return function(){var r=new t(n);r._captureStackTrace(),r._pushContext();var i=s(e).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+a.classString(e));var r,c=new t(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];r=a.isArray(u)?s(e).apply(l,u):s(e).call(l,u)}else r=s(e)();var f=c._popContext();return o.checkForgottenReturns(r,f,"Promise.try",c),c._resolveFromSyncValue(r),c},t.prototype._resolveFromSyncValue=function(e){e===a.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,n){"use strict";var r=e("./util"),i=r.maybeWrapAsError,o=e("./errors"),a=o.OperationalError,s=e("./es5"),c=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&s.getPrototypeOf(e)===Error.prototype}(e)){(t=new a(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var n=s.keys(e),i=0;i<n.length;++i){var o=n[i];c.test(o)||(t[o]=e[o])}return t}return r.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(n,r){if(null!==e){if(n){var o=u(i(n));e._attachExtraTrace(o),e._reject(o)}else if(t){var a=[].slice.call(arguments,1);e._fulfill(a)}else e._fulfill(r);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,n){"use strict";t.exports=function(t){var n=e("./util"),r=t._async,i=n.tryCatch,o=n.errorObj;function a(e,t){if(!n.isArray(e))return s.call(this,e,t);var a=i(t).apply(this._boundValue(),[null].concat(e));a===o&&r.throwLater(a.e)}function s(e,t){var n=this._boundValue(),a=void 0===e?i(t).call(n,null):i(t).call(n,null,e);a===o&&r.throwLater(a.e)}function c(e,t){if(!e){var n=new Error(e+"");n.cause=e,e=n}var a=i(t).call(this._boundValue(),e);a===o&&r.throwLater(a.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var n=s;void 0!==t&&Object(t).spread&&(n=a),this._then(n,c,void 0,this,e)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){var r=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new R.PromiseInspection(this._target())},o=function(e){return R.reject(new h(e))};function a(){}var s,c={},u=e("./util");s=u.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},u.notEnumerableProp(R,"_getDomain",s);var l=e("./es5"),f=e("./async"),d=new f;l.defineProperty(R,"_async",{value:d});var p=e("./errors"),h=R.TypeError=p.TypeError;R.RangeError=p.RangeError;var g=R.CancellationError=p.CancellationError;R.TimeoutError=p.TimeoutError,R.OperationalError=p.OperationalError,R.RejectionError=p.OperationalError,R.AggregateError=p.AggregateError;var m=function(){},v={},y={},b=e("./thenables")(R,m),_=e("./promise_array")(R,m,b,o,a),S=e("./context")(R),C=S.create,w=e("./debuggability")(R,S),T=(w.CapturedTrace,e("./finally")(R,b,y)),E=e("./catch_filter")(y),x=e("./nodeback"),k=u.errorObj,A=u.tryCatch;function R(e){e!==m&&function(e,t){if(null==e||e.constructor!==R)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new h("expecting a function but got "+u.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function I(e){this.promise._resolveCallback(e)}function M(e){this.promise._rejectCallback(e,!1)}function N(e){var t=new R(m);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return R.prototype.toString=function(){return"[object Promise]"},R.prototype.caught=R.prototype.catch=function(e){var t=arguments.length;if(t>1){var n,r=new Array(t-1),i=0;for(n=0;n<t-1;++n){var a=arguments[n];if(!u.isObject(a))return o("Catch statement predicate: expecting an object but got "+u.classString(a));r[i++]=a}return r.length=i,e=arguments[n],this.then(void 0,E(r,e,this))}return this.then(void 0,e)},R.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},R.prototype.then=function(e,t){if(w.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var n=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(n+=", "+u.classString(t)),this._warn(n)}return this._then(e,t,void 0,void 0,void 0)},R.prototype.done=function(e,t){var n=this._then(e,t,void 0,void 0,void 0);n._setIsFinal()},R.prototype.spread=function(e){return"function"!=typeof e?o("expecting a function but got "+u.classString(e)):this.all()._then(e,void 0,void 0,v,void 0)},R.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},R.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},R.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)},R.getNewLibraryCopy=n.exports,R.is=function(e){return e instanceof R},R.fromNode=R.fromCallback=function(e){var t=new R(m);t._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=A(e)(x(t,n));return r===k&&t._rejectCallback(r.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},R.all=function(e){return new _(e).promise()},R.cast=function(e){var t=b(e);return t instanceof R||((t=new R(m))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},R.resolve=R.fulfilled=R.cast,R.reject=R.rejected=function(e){var t=new R(m);return t._captureStackTrace(),t._rejectCallback(e,!0),t},R.setScheduler=function(e){if("function"!=typeof e)throw new h("expecting a function but got "+u.classString(e));return d.setScheduler(e)},R.prototype._then=function(e,t,n,r,i){var o=void 0!==i,a=o?i:new R(m),c=this._target(),l=c._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&l)?this._boundValue():c===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var f=s();if(0!=(50397184&l)){var p,h,v=c._settlePromiseCtx;0!=(33554432&l)?(h=c._rejectionHandler0,p=e):0!=(16777216&l)?(h=c._fulfillmentHandler0,p=t,c._unsetRejectionIsUnhandled()):(v=c._settlePromiseLateCancellationObserver,h=new g("late cancellation observer"),c._attachExtraTrace(h),p=t),d.invoke(v,c,{handler:null===f?p:"function"==typeof p&&u.domainBind(f,p),promise:a,receiver:r,value:h})}else c._addCallbacks(e,t,a,r,f);return a},R.prototype._length=function(){return 65535&this._bitField},R.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},R.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},R.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},R.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},R.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},R.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},R.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},R.prototype._isFinal=function(){return(4194304&this._bitField)>0},R.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},R.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},R.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},R.prototype._setAsyncGuaranteed=function(){d.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},R.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==c)return void 0===t&&this._isBound()?this._boundValue():t},R.prototype._promiseAt=function(e){return this[4*e-4+2]},R.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},R.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},R.prototype._boundValue=function(){},R.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,n=e._rejectionHandler0,r=e._promise0,i=e._receiverAt(0);void 0===i&&(i=c),this._addCallbacks(t,n,r,i,null)},R.prototype._migrateCallbackAt=function(e,t){var n=e._fulfillmentHandlerAt(t),r=e._rejectionHandlerAt(t),i=e._promiseAt(t),o=e._receiverAt(t);void 0===o&&(o=c),this._addCallbacks(n,r,i,o,null)},R.prototype._addCallbacks=function(e,t,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof e&&(this._fulfillmentHandler0=null===i?e:u.domainBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=null===i?t:u.domainBind(i,t));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof e&&(this[a+0]=null===i?e:u.domainBind(i,e)),"function"==typeof t&&(this[a+1]=null===i?t:u.domainBind(i,t))}return this._setLength(o+1),o},R.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},R.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(r(),!1);var n=b(e,this);if(!(n instanceof R))return this._fulfill(e);t&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new g("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(r())}},R.prototype._rejectCallback=function(e,t,n){var r=u.ensureErrorObject(e),i=r===e;if(!i&&!n&&w.warnings()){var o="a promise was rejected with a non-error: "+u.classString(e);this._warn(o,!0)}this._attachExtraTrace(r,!!t&&i),this._reject(e)},R.prototype._resolveFromExecutor=function(e){if(e!==m){var t=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(e,function(e){t._resolveCallback(e)},function(e){t._rejectCallback(e,n)});n=!1,this._popContext(),void 0!==r&&t._rejectCallback(r,!0)}},R.prototype._settlePromiseFromHandler=function(e,t,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),t===v?n&&"number"==typeof n.length?o=A(e).apply(this._boundValue(),n):(o=k).e=new h("cannot .spread() a non-array: "+u.classString(n)):o=A(e).call(t,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===y?r._reject(n):o===k?r._rejectCallback(o.e,!1):(w.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},R.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},R.prototype._followee=function(){return this._rejectionHandler0},R.prototype._setFollowee=function(e){this._rejectionHandler0=e},R.prototype._settlePromise=function(e,t,n,r){var o=e instanceof R,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(o&&e._invokeInternalOnCancel(),n instanceof T&&n.isFinallyHandler()?(n.cancelPromise=e,A(t).call(n,r)===k&&e._reject(k.e)):t===i?e._fulfill(i.call(n)):n instanceof a?n._promiseCancelled(e):o||e instanceof _?e._cancel():n.cancel()):"function"==typeof t?o?(c&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,n,r,e)):t.call(n,r,e):n instanceof a?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,e):n._promiseRejected(r,e)):o&&(c&&e._setAsyncGuaranteed(),0!=(33554432&s)?e._fulfill(r):e._reject(r))},R.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,n=e.promise,r=e.receiver,i=e.value;"function"==typeof t?n instanceof R?this._settlePromiseFromHandler(t,r,i,n):t.call(r,i,n):n instanceof R&&n._reject(i)},R.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},R.prototype._settlePromise0=function(e,t,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,e,i,t)},R.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},R.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():d.settlePromises(this))}},R.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return d.fatalError(e,u.isNode);(65535&t)>0?d.settlePromises(this):this._ensurePossibleRejectionHandled()}},R.prototype._fulfillPromises=function(e,t){for(var n=1;n<e;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},R.prototype._rejectPromises=function(e,t){for(var n=1;n<e;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,t)}},R.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,e),this._rejectPromises(t,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,e),this._fulfillPromises(t,r)}this._setLength(0)}this._clearCancellationData()},R.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},R.defer=R.pending=function(){w.deprecated("Promise.defer","new Promise");var e=new R(m);return{promise:e,resolve:I,reject:M}},u.notEnumerableProp(R,"_makeSelfResolutionError",r),e("./method")(R,m,b,o,w),e("./bind")(R,m,b,w),e("./cancel")(R,_,o,w),e("./direct_resolve")(R),e("./synchronous_inspection")(R),e("./join")(R,_,b,m,d,s),R.Promise=R,R.version="3.5.1",e("./map.js")(R,_,o,b,m,w),e("./call_get.js")(R),e("./using.js")(R,o,b,C,m,w),e("./timers.js")(R,m,w),e("./generators.js")(R,o,m,b,a,w),e("./nodeify.js")(R),e("./promisify.js")(R,m),e("./props.js")(R,_,b,o),e("./race.js")(R,m,b,o),e("./reduce.js")(R,_,o,b,m,w),e("./settle.js")(R,_,w),e("./some.js")(R,_,o),e("./filter.js")(R,m),e("./each.js")(R,m),e("./any.js")(R),u.toFastProperties(R),u.toFastProperties(R.prototype),N({a:1}),N({b:2}),N({c:3}),N(1),N(function(){}),N(void 0),N(!1),N(new R(m)),w.setBounds(f.firstLineError,u.lastLineError),R}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o){var a=e("./util");function s(e){var r=this._promise=new t(n);e instanceof t&&r._propagateFrom(e,3),r._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function e(n,o){var s=r(this._values,this._promise);if(s instanceof t){var c=(s=s._target())._bitField;if(this._values=s,0==(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(e,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(e){e}(o));else{var u=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(u,!1)}},s.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(e[s],i);c instanceof t?(c=c._target(),a=c._bitField):a=null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0==(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!=(33554432&a)?this._promiseFulfilled(c._value(),s):0!=(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},s.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(e){return e},s}},{"./util":36}],24:[function(e,t,n){"use strict";t.exports=function(t,n){var r={},i=e("./util"),o=e("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,c=i.canEvaluate,u=e("./errors").TypeError,l={__isPromisified__:!0},f=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function p(e){return!f.test(e)}function h(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function g(e,t,n){var r=i.getDataPropertyOrDefault(e,t+n,l);return!!r&&h(r)}function m(e,t,n,r){for(var o=i.inheritedDataKeys(e),a=[],s=0;s<o.length;++s){var c=o[s],l=e[c],f=r===d||d(c,l,e);"function"!=typeof l||h(l)||g(e,c,t)||!r(c,l,e,f)||a.push(c,l)}return function(e,t,n){for(var r=0;r<e.length;r+=2){var i=e[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<e.length;a+=2)if(e[a]===o)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(a,t,n),a}var v=function(e){return e.replace(/([$])/,"\\$")},y=c?void 0:function(e,c,u,l,f,d){var p=function(){return this}(),h=e;function g(){var i=c;c===r&&(i=this);var u=new t(n);u._captureStackTrace();var l="string"==typeof h&&this!==p?this[h]:e,f=o(u,d);try{l.apply(i,a(arguments,f))}catch(e){u._rejectCallback(s(e),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof h&&(e=l),i.notEnumerableProp(g,"__isPromisified__",!0),g};function b(e,t,n,o,a){for(var s=new RegExp(v(t)+"$"),c=m(e,t,s,n),u=0,l=c.length;u<l;u+=2){var f=c[u],d=c[u+1],p=f+t;if(o===y)e[p]=y(f,r,f,d,t,a);else{var h=o(d,function(){return y(f,r,f,d,t,a)});i.notEnumerableProp(h,"__isPromisified__",!0),e[p]=h}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new u("expecting a function but got "+i.classString(e));if(h(e))return e;var n=void 0===(t=Object(t)).context?r:t.context,o=!!t.multiArgs,a=function(e,t,n){return y(e,t,void 0,e,null,n)}(e,n,o);return i.copyDescriptors(e,a,p),a},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(t=Object(t)).multiArgs,r=t.suffix;"string"!=typeof r&&(r="Async");var o=t.filter;"function"!=typeof o&&(o=d);var a=t.promisifier;if("function"!=typeof a&&(a=y),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(e),c=0;c<s.length;++c){var l=e[s[c]];"constructor"!==s[c]&&i.isClass(l)&&(b(l.prototype,r,o,a,n),b(l,r,o,a,n))}return b(e,r,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o,a=e("./util"),s=a.isObject,c=e("./es5");"function"==typeof Map&&(o=Map);var u=function(){var e=0,t=0;function n(n,r){this[e]=n,this[e+t]=r,e++}return function(r){t=r.size,e=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(e){var t,n=!1;if(void 0!==o&&e instanceof o)t=u(e),n=!0;else{var r=c.keys(e),i=r.length;t=new Array(2*i);for(var a=0;a<i;++a){var s=r[a];t[a]=e[s],t[a+i]=s}}this.constructor$(t),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(e){var n,o=r(e);return s(o)?(n=o instanceof t?o._then(t.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof t&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){this._values[t]=e;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=function(e){for(var t=new o,n=e.length/2|0,r=0;r<n;++r){var i=e[n+r],a=e[r];t.set(i,a)}return t}(this._values);else{r={};for(var i=this.length(),a=0,s=this.length();a<s;++a)r[this._values[a+i]]=this._values[a]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return f(this)},t.props=function(e){return f(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,n){"use strict";function r(e){this._capacity=e,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(e){return this._capacity<e},r.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1);var n=this._front+t&this._capacity-1;this[n]=e,this._length=t+1},r.prototype.push=function(e,t,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(e),this._pushOne(t),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=e,this[i+1&o]=t,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e;var n=this._front,r=this._length,i=n+r&t-1;!function(e,t,n,r,i){for(var o=0;o<i;++o)n[o+r]=e[o+0],e[o+0]=void 0}(this,0,this,t,i)},t.exports=r},{}],27:[function(e,t,n){"use strict";t.exports=function(t,n,r,i){var o=e("./util"),a=function(e){return e.then(function(t){return s(t,e)})};function s(e,s){var c=r(e);if(c instanceof t)return a(c);if(null===(e=o.asArray(e)))return i("expecting an array or an iterable object but got "+o.classString(e));var u=new t(n);void 0!==s&&u._propagateFrom(s,3);for(var l=u._fulfill,f=u._reject,d=0,p=e.length;d<p;++d){var h=e[d];(void 0!==h||d in e)&&t.cast(h)._then(l,f,void 0,u,null)}return u}t.race=function(e){return s(e,void 0)},t.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=t._getDomain,c=e("./util"),u=c.tryCatch;function l(e,n,r,i){this.constructor$(e);var a=s();this._fn=null===a?n:c.domainBind(a,n),void 0!==r&&(r=t.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function d(e,t,n,i){if("function"!=typeof t)return r("expecting a function but got "+c.classString(t));var o=new l(e,t,n,i);return o.promise()}function p(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(h,void 0,void 0,this,void 0)):h.call(this,n)}function h(e){var n,r=this.array,i=r._promise,o=u(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),e,this.index,this.length):o.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}c.inherits(l,n),l.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==o&&this._eachValues.push(e)},l.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},l.prototype._init=function(){},l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},l.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},l.prototype._iterate=function(e){var n,r;this._values=e;var i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},t.prototype.reduce=function(e,t){return d(this,e,t,null)},t.reduce=function(e,t,n,r){return d(e,t,n,r)}}},{"./util":36}],29:[function(e,i,o){"use strict";var a,s,c,u,l,f=e("./util"),d=f.getNativePromise();if(f.isNode&&"undefined"==typeof MutationObserver){var p=n.setImmediate,h=t.nextTick;a=f.isRecentNode?function(e){p.call(n,e)}:function(e){h.call(t,e)}}else if("function"==typeof d&&"function"==typeof d.resolve){var g=d.resolve();a=function(e){g.then(e)}}else a="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?void 0!==r?function(e){r(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:(s=document.createElement("div"),c={attributes:!0},u=!1,l=document.createElement("div"),new MutationObserver(function(){s.classList.toggle("foo"),u=!1}).observe(l,c),function(e){var t=new MutationObserver(function(){t.disconnect(),e()});t.observe(s,c),u||(u=!0,l.classList.toggle("foo"))});i.exports=a},{"./util":36}],30:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=t.PromiseInspection,o=e("./util");function a(e){this.constructor$(e)}o.inherits(a,n),a.prototype._promiseResolved=function(e,t){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseFulfilled=function(e,t){var n=new i;return n._bitField=33554432,n._settledValueField=e,this._promiseResolved(t,n)},a.prototype._promiseRejected=function(e,t){var n=new i;return n._bitField=16777216,n._settledValueField=e,this._promiseResolved(t,n)},t.settle=function(e){return r.deprecated(".settle()",".reflect()"),new a(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=e("./errors").RangeError,a=e("./errors").AggregateError,s=i.isArray,c={};function u(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new u(e),i=n.promise();return n.setHowMany(t),n.init(),i}i.inherits(u,n),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=s(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(e){this._howMany=e},u.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new a,t=this.length();t<this._values.length;++t)this._values[t]!==c&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(e){this._values.push(e)},u.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new o(t)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(e,t,n){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var n=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return a.call(this._target())},e.prototype.isRejected=function(){return o.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return s.call(this._target())},e.prototype.value=function(){return n.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),r.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,n){"use strict";t.exports=function(t,n){var r=e("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(e,s){if(o(e)){if(e instanceof t)return e;var c=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(c===i){s&&s._pushContext();var u=t.reject(c.e);return s&&s._popContext(),u}if("function"==typeof c){if(function(e){try{return a.call(e,"_promise0")}catch(e){return!1}}(e)){var u=new t(n);return e._then(u._fulfill,u._reject,void 0,u,null),u}return function(e,o,a){var s=new t(n),c=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var u=!0,l=r.tryCatch(o).call(e,function(e){s&&(s._resolveCallback(e),s=null)},function(e){s&&(s._rejectCallback(e,u,!0),s=null)});return u=!1,s&&l===i&&(s._rejectCallback(l.e,!0,!0),s=null),c}(e,c,s)}}return e}}},{"./util":36}],34:[function(e,t,n){"use strict";t.exports=function(t,n,r){var i=e("./util"),o=t.TimeoutError;function a(e){this.handle=e}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(e){return c(+this).thenReturn(e)},c=t.delay=function(e,i){var o,c;return void 0!==i?(o=t.resolve(i)._then(s,null,null,e,void 0),r.cancellation()&&i instanceof t&&o._setOnCancel(i)):(o=new t(n),c=setTimeout(function(){o._fulfill()},+e),r.cancellation()&&o._setOnCancel(new a(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function u(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.delay=function(e){return c(e,this)},t.prototype.timeout=function(e,t){var n,s;e=+e;var c=new a(setTimeout(function(){n.isPending()&&function(e,t,n){var r;r="string"!=typeof t?t instanceof Error?t:new o("operation timed out"):new o(t),i.markAsOriginatingFromRejection(r),e._attachExtraTrace(r),e._reject(r),null!=n&&n.cancel()}(n,t,s)},e));return r.cancellation()?(s=this.then(),(n=s._then(u,l,void 0,c,void 0))._setOnCancel(c)):n=this._then(u,l,void 0,c,void 0),n}}},{"./util":36}],35:[function(e,t,n){"use strict";t.exports=function(t,n,r,i,o,a){var s=e("./util"),c=e("./errors").TypeError,u=e("./util").inherits,l=s.errorObj,f=s.tryCatch,d={};function p(e){setTimeout(function(){throw e},0)}function h(e,n){var i=0,a=e.length,s=new t(o);return function o(){if(i>=a)return s._fulfill();var c=function(e){var t=r(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(c instanceof t&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),e.promise)}catch(e){return p(e)}if(c instanceof t)return c._then(o,p,null,null,null)}o()}(),s}function g(e,t,n){this._data=e,this._promise=t,this._context=n}function m(e,t,n){this.constructor$(e,t,n)}function v(e){return g.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function y(e){this.length=e,this.promise=null,this[e-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},g.prototype.tryDispose=function(e){var t=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=t!==d?this.doDispose(t,e):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},u(m,g),m.prototype.doDispose=function(e,t){var n=this.data();return n.call(e,e,t)},y.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[e-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var c=!0;2===e&&Array.isArray(arguments[0])?(i=arguments[0],e=i.length,c=!1):(i=arguments,e--);for(var u=new y(e),d=0;d<e;++d){var p=i[d];if(g.isDisposer(p)){var m=p;(p=p.promise())._setDisposable(m)}else{var b=r(p);b instanceof t&&(p=b._then(v,null,null,{resources:u,index:d},void 0))}u[d]=p}for(var _=new Array(u.length),d=0;d<_.length;++d)_[d]=t.resolve(u[d]).reflect();var S=t.all(_).then(function(e){for(var t=0;t<e.length;++t){var n=e[t];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void S.cancel();e[t]=n.value()}C._pushContext(),o=f(o);var r=c?o.apply(void 0,e):o(e),i=C._popContext();return a.checkForgottenReturns(r,i,"Promise.using",C),r}),C=S.lastly(function(){var e=new t.PromiseInspection(S);return h(u,e)});return u.promise=C,C._setOnCancel(u),C},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new m(e,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(e,r,i){"use strict";var o,a=e("./es5"),s="undefined"==typeof navigator,c={e:{}},u="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var e=o;return o=null,e.apply(this,arguments)}catch(e){return c.e=e,c}}function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function d(e,t,n){if(f(e))return e;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return a.defineProperty(e,t,r),e}var p=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var n=0;n<e.length;++n)if(e[n]===t)return!0;return!1};if(a.isES5){var n=Object.getOwnPropertyNames;return function(e){for(var r=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=n(e)}catch(e){return r}for(var s=0;s<o.length;++s){var c=o[s];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(e,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}e=a.getPrototypeOf(e)}return r}}var r={}.hasOwnProperty;return function(n){if(t(n))return[];var i=[];e:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<e.length;++a)if(r.call(e[a],o))continue e;i.push(o)}return i}}(),h=/this\s*\.\s*\S+\s*=/,g=/^[a-z$_][a-z$_0-9]*$/i;function m(e){try{return e+""}catch(e){return"[no string representation]"}}function v(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function y(e){return v(e)&&a.propertyIsWritable(e,"stack")}var b="stack"in new Error?function(e){return y(e)?e:new Error(m(e))}:function(e){if(y(e))return e;try{throw new Error(m(e))}catch(e){return e}};function _(e){return{}.toString.call(e)}var S=function(e){return a.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var C="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,n=[],r=e[Symbol.iterator]();!(t=r.next()).done;)n.push(t.value);return n};S=function(e){return a.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?C(e):null}}var w,T=void 0!==t&&"[object process]"===_(t).toLowerCase(),E=void 0!==t&&void 0!==t.env,x={isClass:function(e){try{if("function"==typeof e){var t=a.names(e.prototype),n=a.isES5&&t.length>1,r=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=h.test(e+"")&&a.names(e).length>0;if(n||r||i)return!0}return!1}catch(e){return!1}},isIdentifier:function(e){return g.test(e)},inheritedDataKeys:p,getDataPropertyOrDefault:function(e,t,n){if(!a.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var r=Object.getOwnPropertyDescriptor(e,t);return null!=r?null==r.get&&null==r.set?r.value:n:void 0},thrower:function(e){throw e},isArray:a.isArray,asArray:S,notEnumerableProp:d,isPrimitive:f,isObject:function(e){return"function"==typeof e||"object"==typeof e&&null!==e},isError:v,canEvaluate:s,errorObj:c,tryCatch:function(e){return o=e,l},inherits:function(e,t){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=e,this.constructor$=t,t.prototype)n.call(t.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=t.prototype[r])}return r.prototype=t.prototype,e.prototype=new r,e.prototype},withAppended:function(e,t){var n,r=e.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=e[n];return i[n]=t,i},maybeWrapAsError:function(e){return f(e)?new Error(m(e)):e},toFastProperties:function(e){function t(){}t.prototype=e;for(var n=8;n--;)new t;return e},filledRange:function(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=t+i+n;return r},toString:m,canAttachTrace:y,ensureErrorObject:b,originatesFromRejection:function(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)},markAsOriginatingFromRejection:function(e){try{d(e,"isOperational",!0)}catch(e){}},classString:_,copyDescriptors:function(e,t,n){for(var r=a.names(e),i=0;i<r.length;++i){var o=r[i];if(n(o))try{a.defineProperty(t,o,a.getDescriptor(e,o))}catch(e){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:T,hasEnvVariables:E,env:function(e){return E?t.env[e]:void 0},global:u,getNativePromise:function(){if("function"==typeof Promise)try{var e=new Promise(function(){});if("[object Promise]"==={}.toString.call(e))return Promise}catch(e){}},domainBind:function(e,t){return e.bind(t)}};x.isRecentNode=x.isNode&&(0===(w=t.versions.node.split(".").map(Number))[0]&&w[1]>10||w[0]>0),x.isNode&&x.toFastProperties(t);try{throw new Error}catch(e){x.lastLineError=e}r.exports=x},{"./es5":13}]},{},[4])(4),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(16),n(9),n(17).setImmediate)},function(e,t,n){"use strict";var r,i;r=[n(1),n(33),n(32),n(31)],void 0===(i=function(e,t,n,r){var i,o,a,s=r.transitions.transition,c=r.transitions.afterTransition,u=r.triggers.anyOf,l=[],f=null,d=function(t,n,r){return e.invoke(e.filter(t,function(e){return void 0!==e[n]}),n,r)},p=0,h={},g=["websocket","xdr-streaming","xhr-streaming","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],m=r.create({initial:"idle",events:{register:s({from:["idle"],to:"connecting"}),assignGuid:s({from:["connecting","reconnecting"],to:"connected"}),close:s({from:"connected",to:"disconnected"}),closedUnexpectedly:s({from:"connected",to:"reconnecting"}),reconnect:s({from:["connecting","reconnecting","disconnected"],to:"reconnecting"})},triggers:[{event:"close",activatedBy:u(["remoteClose","pairingError","kicked","crash","idleTimeout","clientClose"])},{event:"closedUnexpectedly",activatedBy:u(["networkIssue"])}],callbacks:[c({to:"closed"},function(){f.close(),console.log("Closing Socket...")}),c({to:"connected"},function(){}),c({to:"reconnecting"},function(){a&&clearTimeout(a),1e3===p&&console.log("Cannot setup sockJS connection, max reconnects attempted"),setTimeout(function(){p<1e3&&setTimeout(function(){d(e.values(h),"onBeforeReconnect",p),S(i,!0),p++},1e3*(p>10?10:p))},100)})]}),v=function(){return"connected"===m.getState()},y=function(){return{guid_assigned:_,remoteclose:function(){console.log("remote close"),m.trigger("remoteClose")},pairingError:function(){m.trigger("pairingError")},kicked:function(){m.trigger("kicked")}}},b=function(e,t){"meeting.register"===e||v()?f.send(JSON.stringify([e,t||{}])):console.log("Cant send event yet -- sock or guid not ready")},_=function(t){o=t.seamGuid,console.log("Self GuidAssigned",o),m.assignGuid(),d(e.values(h),"onConnect",t)},S=function(r,o){return new t(function(t,s){h.guidAssigned={onConnect:t},o&&(console.log("Reconnecting"),console.log(m.getState())),i=r,console.log("Params = ",i),console.log("websocketUrl = ",i.websocketURL),f=new n(i.websocketURL,{},{cookie:!0,protocols_whitelist:g}),a=setTimeout(function(){v()?clearTimeout(a):(console.log("closing due to socket timeout"),m.close(),m.reconnect())},15e3),i.access_token,f.onopen=function(){!function(t){var n={access_token:t.oauthInfo.access_token,numeric_id:t.oauthInfo.scope.meeting.meetingNumericId,leader_id:t.oauthInfo.scope.meeting.leaderId,protocol:"2",events:t.events,user:{full_name:t.user.name,is_leader:t.user.leaderId}},r=e.extend.apply(null,e.union([{},n],e.map(l,function(t){return e.isFunction(t)?t():t})));m.register(),console.log("register: on state = "+m.getState()+", message = meeting.register, "+JSON.stringify(r)),b("meeting.register",r);var i=setTimeout(function(){"connected"!==m.getState()?(console.log("reconnecting as NO guid_assigned during timeout"),console.log(m.getState()),m.reconnect()):clearTimeout(i)},5e3)}(i),d(e.values(h),"onopen",i)},f.onmessage=function(t){try{var n=JSON.parse(t.data);if(2==n.length&&"object"==typeof n[1]){var r=n[0];switch(r){case"keepalive":b("heartbeat");break;case"refresh":break;default:var i=n[1],o=r.match("([^.]*)$")[0];if(o in y())y()[o](i);else{var a=e.keys(h),s=e.find(a,function(e){return r.match("^"+e)});h[s]&&h[s].onMessage&&h[s].onMessage(r,i)}}}else console.log("JSON Received but not valid event: "+(n[0]||""))}catch(e){console.log("Invalid JSON from SockJSClient - "+t.data,e)}},f.onclose=function(e){"connected"===m.getState()&&m.closedUnexpectedly()},f.onerror=function(t){console.log("Error Handler called.",t),d(e.values(h),"onError",t)}})};return{sendEvent:b,connect:S,close:function(){console.log("client side closing"),a&&clearTimeout(a),m.trigger("clientClose"),f.close("3077","client-closing on keep alive failure")},registerHandler:function(e,t,n){h[t]=e,n&&l.push(n)}}}.apply(t,r))||(e.exports=i)},function(e,t,n){var r;void 0===(r=function(e){var t=n(1),r=n(2),i=n(19),o=n(18);return r.Class({constructor:function(e){this.collection=e,this.selfParticipant=new o},extractSelf:function(e){var n,r,i,a=this.selfParticipant?this.selfParticipant.id:null;e.f&&(t(e.f).filter(function(e){return!a||o.getId(e)!==a||(n=e,!1)}),console.log("newFullself = ",n),n&&this.processSelf(n,this.selfParticipant)),e.a&&(t(e.a).filter(function(e){return!a||o.getId(e)!==a||(r=e,!1)}),r&&this.processSelf(r,this.selfParticipant)),e.m&&(t(e.m).filter(function(e){return!a||o.getId(e)!==a||(i=e,!1)}),i&&this.processSelf(i,this.selfParticipant)),e.d&&t(e.d).filter(t.bind(function(e){return!a||o.getId(e)!==a||(this.selfLeft(),!1)},this))},fullUpdate:function(e,n){console.log("fullUpdate rawParticipantData = ",e),console.log("fullUpdate options = ",n.selfParticipant);var r=this.collection?this.collection:new i,o=[],a=[],s=[],c=[];this.extractSelf(e),t(e.f).each(function(e){var t=r.getExistingForRaw(e);t?(a.push(e),c.push(t.get("id"))):o.push(e)}),t(t.difference(t.pluck(r.models,"id"),c)).each(function(e){s.push(r.get(e))}),this.processAdded(o,n),this.processModified(a,n),this.processDeleted(s,n,!0)},partialUpdate:function(e,t){this.extractSelf(e),e.a&&this.processAdded(e.a,t),e.m&&this.processModified(e.m,t),e.d&&this.processDeleted(e.d,t)},processAdded:function(e,n){var r=this.collection,i=t(e).map(t.bind(function(e){var t=r.model.translateAttributes(e,void 0);return new r.model(t)},this)).filter(function(e){return e.get("isVisible")});t.each(i,function(e){r.add(e,n)})},processModified:function(e,n){var r=this.collection;t.each(e,function(e){var n=r.model.translateAttributes(e,null),i=new r.model(n),o=r.get(i.get("id"));o&&t.each(o.attributes,function(e,t){var n=i.get(t);"connections"==t||"dataObject"==t||void 0===n||null===n||isNaN(n)||o.get(t)!=n&&o.set(t,n)})})},processDeleted:function(e,n,r){var i=this.collection;t(e).each(function(e){var t=r?i.get(e):i.getExistingForRaw(e);t&&t.destroy()})},assignedSelf:function(e){var n,r=this.collection;this.selfParticipant.id=e.E1,r&&(console.log("currData = ",r),r=t(r).filter(function(t){return console.log("participant = ",t),!(!t||e&&e.E1&&t.id===e.E1&&(n=t,1))}),n?this.processSelf(n):o.translateAttributes(e,this.selfParticipant))},processSelf:function(e,t){if(void 0!==e){var n=t||new o,r=this.collection.model.translateAttributes(e,n);n.set(r)}},selfLeft:function(){},registerMeetingEventsProcessor:function(e){var n=this.collection?this.collection:new i;this.meetingEventsProcessor=e;var r=this;t.defer(function(){r.meetingEventsProcessor.processFullRoster(n)})}})}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){"use strict";(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(1),i=t.Model.extend({idAttribute:"connectionGuid"},{translationMatrix:function(e){var t=r.clone(e);return t.capabilities&&(t.capabilities=r.map(t.capabilities,function(e){return e.toLowerCase()})),t}});return i.Collection=t.Collection.extend({model:i}),i}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){"use strict";var r,i;r=[n(20),n(19),n(35),n(34)],void 0===(i=function(e,t,n,r){var i=e||{user:{name:"Client_SDK_Test"},events:["meeting","endpoint"]},o=new t,a=new n(o,{init:!0});return{connect:function(e,o){var s={websocketURL:e.events.url,oauthInfo:e.oauthInfo,user:{name:i.user.name,leaderId:e.oauthInfo.scope.meeting.leaderId},events:i.events};r.registerHandler({onMessage:function(e,r){var i={};if(r.body&&r.body){try{i=JSON.parse(r.body)}catch(e){console.log("corrupted json message body",e)}i.timestamp=r.timestamp,i.event&&("statechange.endpoints"===i.event.substr(0,21)?function(e){console.log("MAIN: onEndpointNotification msg = ",e);var r=e.meetingGuid;e.props&&e.props.f&&(console.log("MAIN: @"+e.timestamp+" "+r+" contain these eps: "),(a=a||new n(new t)).fullUpdate(e.props,{init:!0}),console.log("onFullRoster:3 roster = ",a.collection),e.props.f.forEach(function(t){console.log("MAIN: @"+e.timestamp+" "+t.n+"("+t.E1+") as a "+t.e+" ("+t.t+")")})),e.props&&e.props.a&&(a.partialUpdate(e.props),e.props.a.forEach(function(t){console.log("MAIN: @"+e.timestamp+" "+t.n+"("+t.E1+") is added to "+r+" as a "+t.e+" ("+t.t+")")})),e.props&&e.props.m&&(a.partialUpdate(e.props),console.log("partialUpdate: roster = ",a.collection),console.log("partialUpdate: self = ",a.selfParticipant),e.props.m.forEach(function(t){console.log("MAIN: @"+e.timestamp+" "+t.E1+" is modified")})),e.props&&e.props.d&&(a.partialUpdate(e.props),console.log("partialUpdatedelete: roster = ",a.collection),console.log("partialUpdatedelete: self = ",a.selfParticipant),e.props.d.forEach(function(t){console.log("MAIN: @"+e.timestamp+" "+t.n+"("+t.E1+") is deleted from "+r)}))}(i):"statechange.livemeeting"===i.event.substr(0,23)?function(e){console.log("MAIN: onMeetingNotification msg = ",e),console.log("MAIN: @"+e.timestamp+" "+e.props.meetingId+" ("+e.props.meetingGuid+") has title = "+e.props.title+" is "+e.props.status)}(i):"dialout.notification"===i.event&&function(e){console.log("MAIN: onDialoutNotification msg = ",e),console.log("MAIN: @"+e.timestamp+" dialout statusCode = "+e.status+" ("+e.statusCode+")")}(i))}}},"meeting.notification.msg"),r.connect(s).then(function(e){console.log("MAIN: WEBSOCKET connect sucess ",e);var t={};t.E1=e.seamGuid,t.ch=e.guid?e.guid:"",t.m=e.meetingGuid?e.meetingGuid:"",console.log("local selfParticipant = ",t),a.assignedSelf(t),console.log("roster.selfParticipant = ",a.selfParticipant),r.registerHandler({onMessage:function(e,t){var n;n=t,console.log("MAIN: onChat msg = ",n)}},"meeting.chat.msg"),r.onBeforeReconnect=function(e){console.log("attempt",e)},r.onError=function(e){console.log("error",e)}}).error(function(e){console.log("could not able to create websocket connection to BJN cloud",e)})},close:function(){console.log("WebSocketClient.close executed"),r.close()},roster:a}}.apply(t,r))||(e.exports=i)},function(e,t,n){"use strict";var r,i;r=[n(21)],void 0===(i=function(e){return{aggregatePairing:function(t,n){var r={url:"/seamapi/v1/services/pairingCodeGenerator?stringifyOauthJson=false&includeProfilePictureUrl=false&includePhoneContactInfo=false&includePairing=false",body:t};e.post(r,n)},webRTCPairing:function(t,n){var r={url:"/seamapi/v1/user/"+t.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+t.oauthInfo.scope.meeting.meetingNumericId+"/pairing_code/webrtc?access_token="+encodeURIComponent(t.oauthInfo.access_token),body:{endpointType:4,userId:t.oauthInfo.scope.meeting.leaderId,languageCode:"en",capabilities:["AUDIO","VIDEO","CONTENT"]}};e.post(r,n)},sipDialout:function(t,n,r){var i={url:"/seamapi/v1/user/"+t.oauthInfo.scope.meeting.leaderId+"/live_meetings/"+t.oauthInfo.scope.meeting.meetingNumericId+"/dialout/pstn?access_token="+encodeURIComponent(t.oauthInfo.access_token),body:{uri:n}};e.post(i,r)}}}.apply(t,r))||(e.exports=i)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(0),o=n(4),a=i.Model.extend({defaults:{supportsOutputSpeakerSelection:null}});return new(t.Class({STATIC:{},constructor:function(e){r.bindAll(this),this.model=new a},detectCapabilities:function(){var e=o.defer();return this.detectOutputSpeakerSelection(),e.resolve(),e.promise},detectOutputSpeakerSelection:function(){$("body").append('<video id="testSpeakerSelection" style="display:none"></video>');var e=$("#testSpeakerSelection")[0];this.model.set("supportsOutputSpeakerSelection",!(!e||void 0===e.setSinkId)),$("#testSpeakerSelection").remove()}}))}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;(function(){var i;if("function"==typeof this.require)try{var o=this.require("crypto").randomBytes;i=o&&function(){return o(16)}}catch(e){}if(!i&&this.crypto&&crypto.getRandomValues){var a=new Uint8Array(16);i=function(){return crypto.getRandomValues(a),a}}if(!i){var s=new Array(16);i=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}for(var c="function"==typeof this.Buffer?this.Buffer:Array,u=[],l={},f=0;f<256;f++)u[f]=(f+256).toString(16).substr(1),l[u[f]]=f;function d(e,t){var n=t||0,r=u;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}var p=i(),h=[1|p[0],p[1],p[2],p[3],p[4],p[5]],g=16383&(p[6]<<8|p[7]),m=0,v=0;function y(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new c(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;a++)t[r+a]=o[a];return t||d(o)}var b=y;b.v1=function(e,t,n){var r=t&&n||0,i=t||[],o=null!=(e=e||{}).clockseq?e.clockseq:g,a=null!=e.msecs?e.msecs:(new Date).getTime(),s=null!=e.nsecs?e.nsecs:v+1,c=a-m+(s-v)/1e4;if(c<0&&null==e.clockseq&&(o=o+1&16383),(c<0||a>m)&&null==e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");m=a,v=s,g=o;var u=(1e4*(268435455&(a+=122192928e5))+s)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=255&u;var l=a/4294967296*1e4&268435455;i[r++]=l>>>8&255,i[r++]=255&l,i[r++]=l>>>24&15|16,i[r++]=l>>>16&255,i[r++]=o>>>8|128,i[r++]=255&o;for(var f=e.node||h,p=0;p<6;p++)i[r+p]=f[p];return t||d(i)},b.v4=y,b.parse=function(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=l[e])});i<16;)t[r+i++]=0;return t},b.unparse=d,b.BufferClass=c,void 0===(r=function(){return b}.call(t,n,t,e))||(e.exports=r)}).call(this)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(15),i=n(1),o=n(3),a=n(6);return t.Model.extend({defaults:{localContentStream:null,chromeMediaSourceId:null,isChromeExtensionInstalled:!1,extensionStatus:a.EXTENSION_STATES.NOT_INSTALLED,screenShareState:null,tokenStatus:null,presentationToken:{},firefoxScreenShareCancelled:null},isExtensionInstalled:function(){var e=r("body").find(".InMeetingExtensionIsInstalled"),t=!1,n=this;i.each(e,function(e,i,o){r(e).attr("data-extension-id")===n.get("extensionId")&&(t=!0)});var s=this.get("extensionStatus")===a.EXTENSION_STATES.INSTALLED;return t||s?(o.debug("RTCScreenSharingModel: The Screen Sharing Chrome extension has been installed."),!0):(o.warn("RTCScreenSharingModel: The Screen Sharing Chrome extension is not installed."),!1)},isExtensionInstalling:function(){return this.model.get("extensionStatus")===a.EXTENSION_STATES.INSTALLING}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;void 0===(r=function(e,t,n){n.exports=function e(t){if(!t)return!1;if(this.length!=t.length)return!1;for(var n=0,r=this.length;n<r;n++)if(this[n]instanceof Array&&t[n]instanceof Array){if(!e.apply(this[n],[t[n]]))return!1}else if(this[n]!=t[n])return!1;return!0}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){var i=n(23),o=/%[sdv%]/g,a=function(e,t,n){var r=[e+"="+(t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?r.push(n[t.name][a]):r.push(n[t.names[i]])}else r.push(n[t.name]);return function(e){var t=1,n=arguments,r=n.length;return e.replace(o,function(e){if(t>=r)return e;var i=n[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})}.apply(null,r)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];r.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var n=t.outerOrder||s,r=t.innerOrder||c,o=[];return n.forEach(function(t){i[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})}),e.media.forEach(function(e){o.push(a("m",i.m[0],e)),r.forEach(function(t){i[t].forEach(function(n){n.name in e&&null!=e[n.name]?o.push(a(t,n,e)):n.push in e&&null!=e[n.push]&&e[n.push].forEach(function(e){o.push(a(t,n,e))})})})}),o.join("\r\n")+"\r\n"}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){var i=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,n){var r=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:r&&!t[e.name]&&(t[e.name]={});var o=e.push?{}:r?t[e.name]:t;!function(e,t,n,r){if(r&&!n)t[r]=i(e[1]);else for(var o=0;o<n.length;o+=1)null!=e[o+1]&&(t[n[o]]=i(e[o+1]))}(n.match(e.reg),o,e.names,e.name),e.push&&t[e.push].push(o)},a=n(23),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},n=[],r=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(n.push({rtp:[],fmtp:[]}),r=n[n.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(i))return o(c,r,i)}}),t.media=n,t};var c=function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=i(n[1])),e};t.parseFmtpConfig=function(e){return e.split(/\;\s?/).reduce(c,{})},t.parsePayloads=function(e){return e.split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],n=e.split(" ").map(i),r=0;r<n.length;r+=3)t.push({component:n[r],ip:n[r+1],port:n[r+2]});return t}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){var i=n(44),o=n(43);t.write=o,t.parse=i.parse,t.parseFmtpConfig=i.parseFmtpConfig,t.parsePayloads=i.parsePayloads,t.parseRemoteCandidates=i.parseRemoteCandidates}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){var i=n(45);t.write=function(e,t){return void 0!==e&&void 0!==e.media&&Array.isArray(e.media)&&e.media.forEach(function(e){void 0!==e.sources&&0!==Object.keys(e.sources).length&&(e.ssrcs=[],Object.keys(e.sources).forEach(function(t){var n=e.sources[t];Object.keys(n).forEach(function(r){e.ssrcs.push({id:t,attribute:r,value:n[r]})})}),delete e.sources),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.ssrcs=e.ssrcs.join(" "))})}),void 0!==e&&void 0!==e.groups&&Array.isArray(e.groups)&&e.groups.forEach(function(e){void 0!==e.mids&&Array.isArray(e.mids)&&(e.mids=e.mids.join(" "))}),i.write(e,t)},t.parse=function(e){var t=i.parse(e);return void 0!==t&&void 0!==t.media&&Array.isArray(t.media)&&t.media.forEach(function(e){void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&(e.sources={},e.ssrcs.forEach(function(t){e.sources[t.id]||(e.sources[t.id]={}),e.sources[t.id][t.attribute]=t.value}),delete e.ssrcs),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&e.ssrcGroups.forEach(function(e){"string"==typeof e.ssrcs&&(e.ssrcs=e.ssrcs.split(" "))})}),void 0!==t&&void 0!==t.groups&&Array.isArray(t.groups)&&t.groups.forEach(function(e){"string"==typeof e.mids&&(e.mids=e.mids.split(" "))}),t}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){"use strict";var i=n(46),o=n(42);function a(){this.cache={}}r.exports=a,a.prototype.getFirstSendingIndexFromAnswer=function(e){if(!this.cache.answer)return null;var t=i.parse(this.cache.answer);if(t&&t.media&&Array.isArray(t.media))for(var n=0;n<t.media.length;n++)if(t.media[n].type==e&&(!t.media[n].direction||"sendrecv"===t.media[n].direction||"sendonly"===t.media[n].direction))return n;return null},a.prototype.toPlanB=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length<=3&&n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Unified Plan."),e;for(var r=e.sdp,o=!1,a=0;a<n.media.length;a++)n.media[a].rtp.forEach(function(e){if("NULL"===e.codec){o=!0;var n=i.parse(t.cache.offer);e.codec=n.media[a].rtp[0].codec}});o&&(r=i.write(n)),this.cache[e.type]=r;var s=n.media;n.media=[];var c={},u=[];s.forEach(function(e){if(("string"!=typeof e.rtcpMux||"rtcp-mux"!==e.rtcpMux)&&"inactive"!==e.direction)throw new Error("Cannot convert to Plan B because m-lines without the rtcp-mux attribute were found.");if("application"===e.type)return n.media.push(e),void u.push(e.mid);void 0===c[e.type]&&(c[e.type]=e),"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){"object"!=typeof c[e.type].sources&&(c[e.type].sources={}),c[e.type].sources[t]=e.sources[t],void 0!==e.msid&&(c[e.type].sources[t].msid=e.msid)}),void 0!==e.ssrcGroups&&Array.isArray(e.ssrcGroups)&&(void 0!==c[e.type].ssrcGroups&&Array.isArray(c[e.type].ssrcGroups)||(c[e.type].ssrcGroups=[]),c[e.type].ssrcGroups=c[e.type].ssrcGroups.concat(e.ssrcGroups)),c[e.type]===e&&(e.candidates=s[0].candidates,e.iceUfrag=s[0].iceUfrag,e.icePwd=s[0].icePwd,e.fingerprint=s[0].fingerprint,e.mid=e.type,delete e.bundleOnly,delete e.msid,u.push(e.type),n.media.push(e))}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=u.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var l=i.write(n);return new RTCSessionDescription({type:e.type,sdp:l})},a.prototype.toUnifiedPlan=function(e){var t=this;if("object"!=typeof e||null===e||"string"!=typeof e.sdp)return console.warn("An empty description was passed as an argument."),e;var n=i.parse(e.sdp);if(void 0===n.media||!Array.isArray(n.media)||0===n.media.length)return console.warn("The description has no media."),e;if(n.media.length>3||!n.media.every(function(e){return-1!==["video","audio","data"].indexOf(e.mid)}))return console.warn("This description does not look like Plan B."),e;var r=[];n.media.forEach(function(e){r.push(e.mid)});var a,s=!1;if(void 0!==n.groups&&Array.isArray(n.groups)&&(s=n.groups.every(function(e){return"BUNDLE"!==e.type||o.apply(e.mids.sort(),[r.sort()])})),!s)throw new Error("Cannot convert to Unified Plan because m-lines that are not bundled were found.");void 0!==this.cache[e.type]&&(a=i.parse(this.cache[e.type]));var c={audio:{},video:{}},u={};if(n.media.forEach(function(t){if(("string"!=typeof t.rtcpMux||"rtcp-mux"!==t.rtcpMux)&&"inactive"!==t.direction)throw new Error("Cannot convert to Unified Plan because m-lines without the rtcp-mux attribute were found.");if("application"!==t.type){var n=t.sources,r=t.ssrcGroups,i=t.candidates,o=t.iceUfrag,s=t.icePwd,l=t.fingerprint,f=t.port;delete t.sources,delete t.ssrcGroups,delete t.candidates,delete t.iceUfrag,delete t.icePwd,delete t.fingerprint,delete t.port,delete t.mid;var d={};void 0!==r&&Array.isArray(r)&&r.forEach(function(e){"SIM"!==e.semantics&&void 0!==e.ssrcs&&Array.isArray(e.ssrcs)&&e.ssrcs.forEach(function(t){void 0===d[t]&&(d[t]=[]),d[t].push(e)})});var p={};"object"==typeof n&&Object.keys(n).forEach(function(r){var h;"offer"!==e.type||n[r].msid?(void 0!==d[r]&&Array.isArray(d[r])&&d[r].some(function(e){return e.ssrcs.some(function(e){if("object"==typeof p[e])return h=p[e],!0})}),"object"==typeof h?(h.sources[r]=n[r],delete n[r].msid):(h=Object.create(t),p[r]=h,void 0!==n[r].msid&&(h.msid=n[r].msid,h.direction="sendrecv",delete n[r].msid),h.sources={},h.sources[r]=n[r],h.ssrcGroups=d[r],void 0!==a&&void 0!==a.media&&Array.isArray(a.media)&&a.media.forEach(function(e){"object"==typeof e.sources&&Object.keys(e.sources).forEach(function(t){t===r&&(h.mid=e.mid)})}),void 0===h.mid&&(e.type,h.mid=[t.type,"-",r].join("")),h.candidates=i,h.iceUfrag=o,h.icePwd=s,h.fingerprint=l,h.port=f,u[h.mid]=h)):c[t.type][r]=n[r]})}else u[t.mid]=t}),n.media=[],r=[],"offer"===e.type)for(var l=0;l<a.media.length;l++){var f=a.media[l];void 0===u[f.mid]&&(delete f.msid,delete f.sources,delete f.ssrcGroups,f.direction&&"sendrecv"!==f.direction?"sendonly"===f.direction&&(f.direction="inactive"):f.direction="recvonly"),n.media.push(f),"string"==typeof f.mid&&r.push(f.mid)}else void 0!==a&&void 0!==a.media&&Array.isArray(a.media)&&a.media.forEach(function(e){r.push(e.mid),void 0!==u[e.mid]?n.media.push(u[e.mid]):(delete e.msid,delete e.sources,delete e.ssrcGroups,e.direction&&"sendrecv"!==e.direction||(e.direction="recvonly"),e.direction&&"sendonly"!==e.direction||(e.direction="inactive"),n.media.push(e))}),Object.keys(u).forEach(function(e){-1===r.indexOf(e)&&(r.push(e),"recvonly"===u[e].direction?n.media.some(function(t){if(("sendrecv"===t.direction||"sendonly"===t.direction)&&t.type===u[e].type)return Object.keys(u[e].sources).forEach(function(n){t.sources[n]=u[e].sources[n]}),!0}):n.media.push(u[e]))});["audio","video"].forEach(function(e){if(n&&n.media&&Array.isArray(n.media)){var r=null;if(Object.keys(c[e]).length>0&&null===(r=t.getFirstSendingIndexFromAnswer(e)))for(var i=0;i<n.media.length;i++)if(n.media[i].type===e){r=i;break}if(r&&n.media.length>r){var o=n.media[r];Object.keys(c[e]).forEach(function(t){o.sources&&o.sources[t]&&console.warn("Replacing an existing SSRC."),o.sources||(o.sources={}),o.sources[t]=c[e][t]})}}}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=r.join(" "),!0}),n.msidSemantic={semantic:"WMS",token:"*"};var d=0;r=[],n.media.forEach(function(e){0==d?e.mid="sdparta_0":1==d?e.mid="sdparta_1":2==d&&(e.mid="sdparta_2"),r.push(e.mid),d++}),n.groups.some(function(e){if("BUNDLE"===e.type)return e.mids=r.join(" "),!0});var p=i.write(n);return this.cache[e.type]=p,new RTCSessionDescription({type:e.type,sdp:p})}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;void 0===(r=function(e,t,r){t.Interop=n(47)}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(0),r=n(11);return t.Model.extend({initialize:function(){},setStreamByType:function(e,t,n){var i="local"===t?r.getLocalStreamType(e):r.getRemoteStreamType(e);this.set(i,n)}},{getDefaults:function(){return{id:null,receiveMedia:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},peerConnectionConfig:{iceServers:[],bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",iceTransports:"all"},peerConnectionConstraints:{optional:[]},iceGatheringState:"",iceConnectionState:"",useTrickleICE:!1,localSdp:null,remoteSdp:null,localVideoStream:null,localAudioStream:null,localContentStream:null,remoteStream:null,remoteContentStream:null,closed:!1,signalingState:""}}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(0),o=n(3),a=n(25),s=(a=n(25),n(5));return t.Class({STATIC:{},constructor:function(e){r.bindAll(this),r.extend(this,i.Events),this.model=new a,this.peerConnection=e.peerConnection,this.pollInterval=e.statsPollInterval},startPollingStats:function(){var e=this;this.pollStatsHandle||(o.debug("RTCCallStats: Starting call stats poll with interval: ",this.pollInterval),this.pollStatsHandle=window.setInterval(function(){e.getStats({peerConnection:e.peerConnection,success:e.getStatsSuccess,error:e.getStatsError})},this.pollInterval))},stopPollingStats:function(){this.pollStatsHandle?(o.debug("RTCCallStats: Stopping call stats poll"),window.clearInterval(this.pollStatsHandle),this.pollStatsHandle=null):o.warn("RTCCallStats: Call stats poll already stopped")},getStats:function(e){var t=e.peerConnection;t&&t.getStats&&t.getStats(null,e.success,e.error)},getStatsSuccess:function(e){"firefox"===s.browser&&this.trigger("rtcstats",e),this.model.updateStats(e)},getStatsError:function(e){o.error("RTCCallStats: Failed to get webrtc call stats",e)},close:function(){this.stopPollingStats()}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"use strict";var r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},r.splitSections=function(e){var t=e.split("\nm=");return t.map(function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"})},r.matchPrefix=function(e,t){return r.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},r.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1]}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),"candidate:"+t.join(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.numChannels=3===t.length?parseInt(t[2],10):1,n},r.writeRtpMap=function(e){var t=e.payloadType;return void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType),"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==e.numChannels?"/"+e.numChannels:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t=r[i].trim().split("="),n[t[0].trim()]=t[1];return n},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach(function(t){r.push(t+"="+e.parameters[t])}),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},r.getDtlsParameters=function(e,t){var n=r.splitLines(e),i=(n=n.concat(r.splitLines(t))).filter(function(e){return 0===e.indexOf("a=fingerprint:")})[0].substr(14),o={role:"auto",fingerprints:[{algorithm:i.split(" ")[0],value:i.split(" ")[1]}]};return o},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},r.getIceParameters=function(e,t){var n=r.splitLines(e),i={usernameFragment:(n=n.concat(r.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)};return i},r.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e),i=n[0].split(" "),o=3;o<i.length;o++){var a=i[o],s=r.matchPrefix(e,"a=rtpmap:"+a+" ")[0];if(s){var c=r.parseRtpMap(s),u=r.matchPrefix(e,"a=fmtp:"+a+" ");switch(c.parameters=u.length?r.parseFmtp(u[0]):{},c.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+a+" ").map(r.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(r.parseExtmap(e))}),t},r.writeRtpDescription=function(e,t){var n="";return n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}),n+="a=rtcp-mux\r\n"},r.parseRtpEncodingParameters=function(e){var t,n=[],i=r.parseRtpParameters(e),o=-1!==i.fecMechanisms.indexOf("RED"),a=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),c=s.length>0&&s[0].ssrc,u=r.matchPrefix(e,"a=ssrc-group:FID").map(function(e){var t=e.split(" ");return t.shift(),t.map(function(e){return parseInt(e,10)})});u.length>0&&u[0].length>1&&u[0][0]===c&&(t=u[0][1]),i.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var r={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10),rtx:{payloadType:e.payloadType,ssrc:t}};n.push(r),o&&((r=JSON.parse(JSON.stringify(r))).fec={ssrc:t,mechanism:a?"red+ulpfec":"red"},n.push(r))}}),0===n.length&&c&&n.push({ssrc:c});var l=r.matchPrefix(e,"b=");return l.length&&(0===l[0].indexOf("b=TIAS:")?l=parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")&&(l=parseInt(l[0].substr(5),10)),n.forEach(function(e){e.maxBitrate=l})),n},r.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.writeMediaSection=function(e,t,n,i){var o=r.writeRtpDescription(e.kind,t);if(o+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a="msid:"+i.id+" "+e.rtpSender.track.id+"\r\n";o+="a="+a,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},t.exports=r},{}],2:[function(e,t,n){"use strict";!function(){var n=e("./utils").log,r=e("./utils").browserDetails;t.exports.browserDetails=r,t.exports.extractVersion=e("./utils").extractVersion,t.exports.disableLog=e("./utils").disableLog;var i=e("./chrome/chrome_shim")||null,o=e("./edge/edge_shim")||null,a=e("./firefox/firefox_shim")||null,s=e("./safari/safari_shim")||null;switch(r.browser){case"opera":case"chrome":if(!i||!i.shimPeerConnection)return void n("Chrome shim is not included in this adapter release.");n("adapter.js shimming chrome."),t.exports.browserShim=i,i.shimGetUserMedia(),i.shimMediaStream(),i.shimSourceObject(),i.shimPeerConnection(),i.shimOnTrack();break;case"firefox":if(!a||!a.shimPeerConnection)return void n("Firefox shim is not included in this adapter release.");n("adapter.js shimming firefox."),t.exports.browserShim=a,a.shimGetUserMedia(),a.shimSourceObject(),a.shimPeerConnection(),a.shimOnTrack();break;case"edge":if(!o||!o.shimPeerConnection)return void n("MS edge shim is not included in this adapter release.");n("adapter.js shimming edge."),t.exports.browserShim=o,o.shimGetUserMedia(),o.shimPeerConnection();break;case"safari":if(!s)return void n("Safari shim is not included in this adapter release.");n("adapter.js shimming safari."),t.exports.browserShim=s,s.shimGetUserMedia();break;default:n("Unsupported browser!")}}()},{"./chrome/chrome_shim":3,"./edge/edge_shim":5,"./firefox/firefox_shim":7,"./safari/safari_shim":9,"./utils":10}],3:[function(e,t,n){"use strict";var r=e("../utils.js").log,i=e("../utils.js").browserDetails,o={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){var t=this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.addEventListener("addtrack",function(n){var r=new Event("track");r.track=n.track,r.receiver={track:n.track},r.streams=[e.stream],t.dispatchEvent(r)}),e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;this._srcObject=e,this.src&&URL.revokeObjectURL(this.src),e?(this.src=URL.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&URL.revokeObjectURL(t.src),t.src=URL.createObjectURL(e)})):this.src=""}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(e,t){r("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new webkitRTCPeerConnection(e,t),i=n.getStats.bind(n);return n.getStats=function(e,t,n){var r=this,o=arguments;if(arguments.length>0&&"function"==typeof e)return i(e,t);var a=function(e){var t={},n=e.result();return n.forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t},s=function(e,t){var n=new Map(Object.keys(e).map(function(t){return[t,e[t]]}));return t=t||e,Object.keys(t).forEach(function(e){n[e]=t[e]}),n};return arguments.length>=2?i.apply(this,[function(e){o[1](s(a(e)))},arguments[0]]):new Promise(function(t,n){1===o.length&&"object"==typeof e?i.apply(r,[function(e){t(s(a(e)))},n]):i.apply(r,[function(e){t(s(a(e),e.result()))},n])}).then(t,n)},n},window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype,webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}}),["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(r,i){t.apply(e,[r,i,n])})}return t.apply(this,arguments)}}),i.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this,r=new Promise(function(r,i){t.apply(n,[e[0],r,i])});return e.length<2?r:r.then(function(){e[1].apply(null,[])},function(t){e.length>=3&&e[2].apply(null,[t])})}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)}}};t.exports={shimMediaStream:o.shimMediaStream,shimOnTrack:o.shimOnTrack,shimSourceObject:o.shimSourceObject,shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils.js":10,"./getusermedia":4}],4:[function(e,t,n){"use strict";var r=e("../utils.js").log;t.exports=function(){var e=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var i=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var o={};"number"==typeof r.ideal?(o[i("min",n)]=r.ideal,t.optional.push(o),(o={})[i("max",n)]=r.ideal,t.optional.push(o)):(o[i("",n)]=r.ideal,t.optional.push(o))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[i("",n)]=r.exact):["min","max"].forEach(function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[i(e,n)]=r[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},t=function(t,n){if((t=JSON.parse(JSON.stringify(t)))&&t.audio&&(t.audio=e(t.audio)),t&&"object"==typeof t.video){var i=t.video.facingMode;if((i=i&&("object"==typeof i?i:{ideal:i}))&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete t.video.facingMode,"environment"===i.exact||"environment"===i.ideal))return navigator.mediaDevices.enumerateDevices().then(function(o){var a=(o=o.filter(function(e){return"videoinput"===e.kind})).find(function(e){return-1!==e.label.toLowerCase().indexOf("back")})||o.length&&o[o.length-1];return a&&(t.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),t.video=e(t.video),r("chrome: "+JSON.stringify(t)),n(t)});t.video=e(t.video)}return r("chrome: "+JSON.stringify(t)),n(t)},n=function(e){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[e.name]||e.name,message:e.message,constraint:e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};navigator.getUserMedia=function(e,r,i){t(e,function(e){navigator.webkitGetUserMedia(e,r,function(e){i(n(e))})})};var i=function(e){return new Promise(function(t,n){navigator.getUserMedia(e,t,n)})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:i,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return t(e,function(e){return o(e).catch(function(e){return Promise.reject(n(e))})})}}else navigator.mediaDevices.getUserMedia=function(e){return i(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){r("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){r("Dummy mediaDevices.removeEventListener called.")})}},{"../utils.js":10}],5:[function(e,t,n){"use strict";var r=e("sdp"),i=e("../utils").browserDetails,o={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(e){return e}),window.RTCSessionDescription||(window.RTCSessionDescription=function(e){return e})),window.RTCPeerConnection=function(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.onicecandidate=null,this.onaddstream=null,this.ontrack=null,this.onremovestream=null,this.onsignalingstatechange=null,this.oniceconnectionstatechange=null,this.onnegotiationneeded=null,this.ondatachannel=null,this.localStreams=[],this.remoteStreams=[],this.getLocalStreams=function(){return t.localStreams},this.getRemoteStreams=function(){return t.remoteStreams},this.localDescription=new RTCSessionDescription({type:"",sdp:""}),this.remoteDescription=new RTCSessionDescription({type:"",sdp:""}),this.signalingState="stable",this.iceConnectionState="new",this.iceGatheringState="new",this.iceOptions={gatherPolicy:"all",iceServers:[]},e&&e.iceTransportPolicy)switch(e.iceTransportPolicy){case"all":case"relay":this.iceOptions.gatherPolicy=e.iceTransportPolicy;break;case"none":throw new TypeError('iceTransportPolicy "none" not supported')}if(this.usingBundle=e&&"max-bundle"===e.bundlePolicy,e&&e.iceServers){var r=JSON.parse(JSON.stringify(e.iceServers));this.iceOptions.iceServers=r.filter(function(e){if(e&&e.urls){var t=e.urls;return"string"==typeof t&&(t=[t]),!!(t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")||0===e.indexOf("stun:")&&i.version>=14393})[0])}return!1})}this.transceivers=[],this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var e=this,t=r.splitSections(e.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(n){var r=!n.candidate||0===Object.keys(n.candidate).length;if(r)for(var i=1;i<t.length;i++)-1===t[i].indexOf("\r\na=end-of-candidates\r\n")&&(t[i]+="a=end-of-candidates\r\n");else-1===n.candidate.candidate.indexOf("typ endOfCandidates")&&(t[n.candidate.sdpMLineIndex+1]+="a="+n.candidate.candidate+"\r\n");if(e.localDescription.sdp=t.join(""),e.dispatchEvent(n),null!==e.onicecandidate&&e.onicecandidate(n),!n.candidate&&"complete"!==e.iceGatheringState){var o=e.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});o&&(e.iceGatheringState="complete")}}),this._localIceCandidatesBuffer=[]},window.RTCPeerConnection.prototype.addStream=function(e){this.localStreams.push(e.clone()),this._maybeFireNegotiationNeeded()},window.RTCPeerConnection.prototype.removeStream=function(e){var t=this.localStreams.indexOf(e);t>-1&&(this.localStreams.splice(t,1),this._maybeFireNegotiationNeeded())},window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},window.RTCPeerConnection.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},window.RTCPeerConnection.prototype._getCommonCapabilities=function(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]};return e.codecs.forEach(function(e){for(var r=0;r<t.codecs.length;r++){var i=t.codecs[r];if(e.name.toLowerCase()===i.name.toLowerCase()&&e.clockRate===i.clockRate&&e.numChannels===i.numChannels){n.codecs.push(i),i.rtcpFeedback=i.rtcpFeedback.filter(function(t){for(var n=0;n<e.rtcpFeedback.length;n++)if(e.rtcpFeedback[n].type===t.type&&e.rtcpFeedback[n].parameter===t.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var r=0;r<t.headerExtensions.length;r++){var i=t.headerExtensions[r];if(e.uri===i.uri){n.headerExtensions.push(i);break}}}),n},window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(e,t){var n=this,i=new RTCIceGatherer(n.iceOptions),o=new RTCIceTransport(i);i.onlocalcandidate=function(a){var s=new Event("icecandidate");s.candidate={sdpMid:e,sdpMLineIndex:t};var c=a.candidate,u=!c||0===Object.keys(c).length;u?(void 0===i.state&&(i.state="completed"),s.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(c.component="RTCP"===o.component?2:1,s.candidate.candidate=r.writeCandidate(c));var l=r.splitSections(n.localDescription.sdp);-1===s.candidate.candidate.indexOf("typ endOfCandidates")?l[s.candidate.sdpMLineIndex+1]+="a="+s.candidate.candidate+"\r\n":l[s.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n",n.localDescription.sdp=l.join("");var f=n.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});switch(n.iceGatheringState){case"new":n._localIceCandidatesBuffer.push(s),u&&f&&n._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case"gathering":n._emitBufferedCandidates(),n.dispatchEvent(s),null!==n.onicecandidate&&n.onicecandidate(s),f&&(n.dispatchEvent(new Event("icecandidate")),null!==n.onicecandidate&&n.onicecandidate(new Event("icecandidate")),n.iceGatheringState="complete")}},o.onicestatechange=function(){n._updateConnectionState()};var a=new RTCDtlsTransport(o);return a.ondtlsstatechange=function(){n._updateConnectionState()},a.onerror=function(){a.state="failed",n._updateConnectionState()},{iceGatherer:i,iceTransport:o,dtlsTransport:a}},window.RTCPeerConnection.prototype._transceive=function(e,t,n){var i=this._getCommonCapabilities(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:r.localCName},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&(i.encodings=e.recvEncodingParameters,i.rtcp={cname:e.cname},e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},window.RTCPeerConnection.prototype.setLocalDescription=function(e){var t,n,i=this;if("offer"===e.type)this._pendingOffer&&(t=r.splitSections(e.sdp),n=t.shift(),t.forEach(function(e,t){var n=r.parseRtpParameters(e);i._pendingOffer[t].localCapabilities=n}),this.transceivers=this._pendingOffer,delete this._pendingOffer);else if("answer"===e.type){t=r.splitSections(i.remoteDescription.sdp),n=t.shift();var o=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach(function(e,t){var a=i.transceivers[t],s=a.iceGatherer,c=a.iceTransport,u=a.dtlsTransport,l=a.localCapabilities,f=a.remoteCapabilities,d="0"===e.split("\n",1)[0].split(" ",2)[1];if(!d&&!a.isDatachannel){var p=r.getIceParameters(e,n);if(o){var h=r.matchPrefix(e,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});h.length&&c.setRemoteCandidates(h)}var g=r.getDtlsParameters(e,n);o&&(g.role="server"),i.usingBundle&&0!==t||(c.start(s,p,o?"controlling":"controlled"),u.start(g));var m=i._getCommonCapabilities(l,f);i._transceive(a,m.codecs.length>0,!1)}})}switch(this.localDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-local-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}var a=arguments.length>1&&"function"==typeof arguments[1];if(a){var s=arguments[1];window.setTimeout(function(){s(),"new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),i._emitBufferedCandidates()},0)}var c=Promise.resolve();return c.then(function(){a||("new"===i.iceGatheringState&&(i.iceGatheringState="gathering"),window.setTimeout(i._emitBufferedCandidates.bind(i),500))}),c},window.RTCPeerConnection.prototype.setRemoteDescription=function(e){var t=this,n=new MediaStream,i=[],o=r.splitSections(e.sdp),a=o.shift(),s=r.matchPrefix(a,"a=ice-lite").length>0;switch(this.usingBundle=r.matchPrefix(a,"a=group:BUNDLE ").length>0,o.forEach(function(o,c){var u=r.splitLines(o),l=u[0].substr(2).split(" "),f=l[0],d="0"===l[1],p=r.getDirection(o,a),h=r.matchPrefix(o,"a=mid:");if(h=h.length?h[0].substr(6):r.generateIdentifier(),"application"!==f||"DTLS/SCTP"!==l[2]){var g,m,v,y,b,_,S,C,w,T,E,x,k,A=r.parseRtpParameters(o);d||(E=r.getIceParameters(o,a),(x=r.getDtlsParameters(o,a)).role="client"),C=r.parseRtpEncodingParameters(o);var R=r.matchPrefix(o,"a=ssrc:").map(function(e){return r.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];R&&(k=R.value);var I=r.matchPrefix(o,"a=end-of-candidates",a).length>0,M=r.matchPrefix(o,"a=candidate:").map(function(e){return r.parseCandidate(e)}).filter(function(e){return"1"===e.component});if("offer"!==e.type||d)"answer"!==e.type||d||(g=t.transceivers[c],m=g.iceGatherer,v=g.iceTransport,y=g.dtlsTransport,b=g.rtpSender,_=g.rtpReceiver,S=g.sendEncodingParameters,w=g.localCapabilities,t.transceivers[c].recvEncodingParameters=C,t.transceivers[c].remoteCapabilities=A,t.transceivers[c].cname=k,(s||I)&&M.length&&v.setRemoteCandidates(M),t.usingBundle&&0!==c||(v.start(m,E,"controlling"),y.start(x)),t._transceive(g,"sendrecv"===p||"recvonly"===p,"sendrecv"===p||"sendonly"===p),!_||"sendrecv"!==p&&"sendonly"!==p?delete g.rtpReceiver:(T=_.track,i.push([T,_]),n.addTrack(T)));else{var N,O=t.usingBundle&&c>0?{iceGatherer:t.transceivers[0].iceGatherer,iceTransport:t.transceivers[0].iceTransport,dtlsTransport:t.transceivers[0].dtlsTransport}:t._createIceAndDtlsTransports(h,c);I&&O.iceTransport.setRemoteCandidates(M),w=RTCRtpReceiver.getCapabilities(f),S=[{ssrc:1001*(2*c+2)}],_=new RTCRtpReceiver(O.dtlsTransport,f),T=_.track,i.push([T,_]),n.addTrack(T),t.localStreams.length>0&&t.localStreams[0].getTracks().length>=c&&("audio"===f?N=t.localStreams[0].getAudioTracks()[0]:"video"===f&&(N=t.localStreams[0].getVideoTracks()[0]),N&&(b=new RTCRtpSender(N,O.dtlsTransport))),t.transceivers[c]={iceGatherer:O.iceGatherer,iceTransport:O.iceTransport,dtlsTransport:O.dtlsTransport,localCapabilities:w,remoteCapabilities:A,rtpSender:b,rtpReceiver:_,kind:f,mid:h,cname:k,sendEncodingParameters:S,recvEncodingParameters:C},t._transceive(t.transceivers[c],!1,"sendrecv"===p||"sendonly"===p)}}else t.transceivers[c]={mid:h,isDatachannel:!0}}),this.remoteDescription={type:e.type,sdp:e.sdp},e.type){case"offer":this._updateSignalingState("have-remote-offer");break;case"answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+e.type+'"')}return n.getTracks().length&&(t.remoteStreams.push(n),window.setTimeout(function(){var e=new Event("addstream");e.stream=n,t.dispatchEvent(e),null!==t.onaddstream&&window.setTimeout(function(){t.onaddstream(e)},0),i.forEach(function(r){var i=r[0],o=r[1],a=new Event("track");a.track=i,a.receiver=o,a.streams=[n],t.dispatchEvent(e),null!==t.ontrack&&window.setTimeout(function(){t.ontrack(a)},0)})},0)),arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._updateSignalingState("closed")},window.RTCPeerConnection.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this.dispatchEvent(t),null!==this.onsignalingstatechange&&this.onsignalingstatechange(t)},window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=function(){var e=new Event("negotiationneeded");this.dispatchEvent(e),null!==this.onnegotiationneeded&&this.onnegotiationneeded(e)},window.RTCPeerConnection.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};if(this.transceivers.forEach(function(e){t[e.iceTransport.state]++,t[e.dtlsTransport.state]++}),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0||t.checking>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":(t.connected>0||t.completed>0)&&(e="connected"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this.dispatchEvent(n),null!==this.oniceconnectionstatechange&&this.oniceconnectionstatechange(n)}},window.RTCPeerConnection.prototype.createOffer=function(){var e,t=this;if(this._pendingOffer)throw new Error("createOffer called while there is a pending offer.");1===arguments.length&&"function"!=typeof arguments[0]?e=arguments[0]:3===arguments.length&&(e=arguments[2]);var n=[],i=0,o=0;if(this.localStreams.length&&(i=this.localStreams[0].getAudioTracks().length,o=this.localStreams[0].getVideoTracks().length),e){if(e.mandatory||e.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==e.offerToReceiveAudio&&(i=e.offerToReceiveAudio),void 0!==e.offerToReceiveVideo&&(o=e.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(e){n.push({kind:e.kind,track:e,wantReceive:"audio"===e.kind?i>0:o>0}),"audio"===e.kind?i--:"video"===e.kind&&o--});i>0||o>0;)i>0&&(n.push({kind:"audio",wantReceive:!0}),i--),o>0&&(n.push({kind:"video",wantReceive:!0}),o--);var a=r.writeSessionBoilerplate(),s=[];n.forEach(function(e,n){var i,o,a=e.track,c=e.kind,u=r.generateIdentifier(),l=t.usingBundle&&n>0?{iceGatherer:s[0].iceGatherer,iceTransport:s[0].iceTransport,dtlsTransport:s[0].dtlsTransport}:t._createIceAndDtlsTransports(u,n),f=RTCRtpSender.getCapabilities(c),d=[{ssrc:1001*(2*n+1)}];a&&(i=new RTCRtpSender(a,l.dtlsTransport)),e.wantReceive&&(o=new RTCRtpReceiver(l.dtlsTransport,c)),s[n]={iceGatherer:l.iceGatherer,iceTransport:l.iceTransport,dtlsTransport:l.dtlsTransport,localCapabilities:f,remoteCapabilities:null,rtpSender:i,rtpReceiver:o,kind:c,mid:u,sendEncodingParameters:d,recvEncodingParameters:null}}),this.usingBundle&&(a+="a=group:BUNDLE "+s.map(function(e){return e.mid}).join(" ")+"\r\n"),n.forEach(function(e,n){var i=s[n];a+=r.writeMediaSection(i,i.localCapabilities,"offer",t.localStreams[0])}),this._pendingOffer=s;var c=new RTCSessionDescription({type:"offer",sdp:a});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,c),Promise.resolve(c)},window.RTCPeerConnection.prototype.createAnswer=function(){var e=this,t=r.writeSessionBoilerplate();this.usingBundle&&(t+="a=group:BUNDLE "+this.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),this.transceivers.forEach(function(n){if(n.isDatachannel)t+="m=application 0 DTLS/SCTP 5000\r\nc=IN IP4 0.0.0.0\r\na=mid:"+n.mid+"\r\n";else{var i=e._getCommonCapabilities(n.localCapabilities,n.remoteCapabilities);t+=r.writeMediaSection(n,i,"answer",e.localStreams[0])}});var n=new RTCSessionDescription({type:"answer",sdp:t});return arguments.length&&"function"==typeof arguments[0]&&window.setTimeout(arguments[0],0,n),Promise.resolve(n)},window.RTCPeerConnection.prototype.addIceCandidate=function(e){if(null===e)this.transceivers.forEach(function(e){e.iceTransport.addRemoteCandidate({})});else{var t=e.sdpMLineIndex;if(e.sdpMid)for(var n=0;n<this.transceivers.length;n++)if(this.transceivers[n].mid===e.sdpMid){t=n;break}var i=this.transceivers[t];if(i){var o=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return;if("1"!==o.component)return;"endOfCandidates"===o.type&&(o={}),i.iceTransport.addRemoteCandidate(o);var a=r.splitSections(this.remoteDescription.sdp);a[t+1]+=(o.type?e.candidate.trim():"a=end-of-candidates")+"\r\n",this.remoteDescription.sdp=a.join("")}}return arguments.length>1&&"function"==typeof arguments[1]&&window.setTimeout(arguments[1],0),Promise.resolve()},window.RTCPeerConnection.prototype.getStats=function(){var e=[];this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(n){t[n]&&e.push(t[n].getStats())})});var t=arguments.length>1&&"function"==typeof arguments[1]&&arguments[1];return new Promise(function(n){var r=new Map;Promise.all(e).then(function(e){e.forEach(function(e){Object.keys(e).forEach(function(t){r.set(t,e[t]),r[t]=e[t]})}),t&&window.setTimeout(t,0,r),n(r)})})}}};t.exports={shimPeerConnection:o.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":6,sdp:1}],6:[function(e,t,n){"use strict";t.exports=function(){var e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return e(t).catch(function(e){return Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}},{}],7:[function(e,t,n){"use strict";var r=e("../utils").browserDetails,i={shimOnTrack:function(){"object"!=typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(e){e.stream.getTracks().forEach(function(t){var n=new Event("track");n.track=t,n.receiver={track:t},n.streams=[e.stream],this.dispatchEvent(n)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(){if("object"==typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||(window.RTCPeerConnection=function(e,t){if(r.version<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];if(o.hasOwnProperty("urls"))for(var a=0;a<o.urls.length;a++){var s={url:o.urls[a]};0===o.urls[a].indexOf("turn")&&(s.username=o.username,s.credential=o.credential),n.push(s)}else n.push(e.iceServers[i])}e.iceServers=n}return new mozRTCPeerConnection(e,t)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=RTCPeerConnection.prototype[e];RTCPeerConnection.prototype[e]=function(){return arguments[0]=new("addIceCandidate"===e?RTCIceCandidate:RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}});var e=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():e.apply(this,arguments)};var t=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(e,n,r){return t.apply(this,[e||null]).then(function(e){return function(e){var t=new Map;return Object.keys(e).forEach(function(n){t.set(n,e[n]),t[n]=e[n]}),t}(e)}).then(n,r)}}}};t.exports={shimOnTrack:i.shimOnTrack,shimSourceObject:i.shimSourceObject,shimPeerConnection:i.shimPeerConnection,shimGetUserMedia:e("./getusermedia")}},{"../utils":10,"./getusermedia":8}],8:[function(e,t,n){"use strict";var r=e("../utils").log,i=e("../utils").browserDetails;t.exports=function(){var e=function(e){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},t=function(t,n,o){var a=function(e){if("object"!=typeof e||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r=e[n]="object"==typeof e[n]?e[n]:{ideal:e[n]};if(void 0===r.min&&void 0===r.max&&void 0===r.exact||t.push(n),void 0!==r.exact&&("number"==typeof r.exact?r.min=r.max=r.exact:e[n]=r.exact,delete r.exact),void 0!==r.ideal){e.advanced=e.advanced||[];var i={};"number"==typeof r.ideal?i[n]={min:r.ideal,max:r.ideal}:i[n]=r.ideal,e.advanced.push(i),delete r.ideal,Object.keys(r).length||delete e[n]}}}),t.length&&(e.require=t),e};return t=JSON.parse(JSON.stringify(t)),i.version<38&&(r("spec: "+JSON.stringify(t)),t.audio&&(t.audio=a(t.audio)),t.video&&(t.video=a(t.video)),r("ff37: "+JSON.stringify(t))),navigator.mozGetUserMedia(t,n,function(t){o(e(t))})};if(navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:function(e){return new Promise(function(n,r){t(e,n,r)})},addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},i.version<41){var n=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(i.version<49){var o=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(t){return o(t).catch(function(t){return Promise.reject(e(t))})}}navigator.getUserMedia=function(e,n,r){if(i.version<44)return t(e,n,r);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(e).then(n,r)}}},{"../utils":10}],9:[function(e,t,n){"use strict";var r={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}};t.exports={shimGetUserMedia:r.shimGetUserMedia}},{}],10:[function(e,t,n){"use strict";var r=!0,i={disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(r=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},log:function(){if("object"==typeof window){if(r)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},extractVersion:function(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)},detectBrowser:function(){var e={browser:null,version:null};if("undefined"==typeof window||!window.navigator)return e.browser="Not a browser.",e;if(navigator.mozGetUserMedia)e.browser="firefox",e.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1);else if(navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)e.browser="chrome",e.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2);else{if(!navigator.userAgent.match(/Version\/(\d+).(\d+)/))return e.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.",e;e.browser="safari",e.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)}else{if(!navigator.mediaDevices||!navigator.userAgent.match(/Edge\/(\d+).(\d+)$/))return e.browser="Not a supported browser.",e;e.browser="edge",e.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)}return e}};t.exports={log:i.log,disableLog:i.disableLog,browserDetails:i.detectBrowser(),extractVersion:i.extractVersion}},{}]},{},[2])(2)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(4),r=n(2),i=n(1),o=n(0),a=n(3),s=(n(51),n(8)),c=n(7),u=n(50),l=n(6),f=n(11),d=n(49),p=n(10),h=n(24),g=n(48),m=n(5);return r.Class({iceRestartTimer:null,iceRestartTimeout:1e4,iceConnectivityTimeout:2e4,iceConnectivityTimer:null,numIceCandidates:0,constructor:function(e){i.bindAll(this),i.extend(this,o.Events),this.isFirefox="firefox"===m.browser,this.ICE_CONNECTION_STATES=l.WEBRTC_STATES.iceConnectionState;var t=f.deepMergeObjects(d.getDefaults(),e.peerConfig);this.model=new d(t),this.isConnectionLost=!1,this.oldPktCount=0,this.maxPktRecvCounter=5,this.pktRecvCounter=this.maxPktRecvCounter,this.isClosing=!1,this.isRemoteMute=!1;var n=this.model.get("peerConnectionConfig"),r=this.model.get("peerConnectionConstraints");a.debug("RTCPeer: Force turn is enabled, get only relay ICE candidates"),n.iceTransportPolicy="relay",n.webrtcDisableBundling&&!this.isFirefox?(a.debug("RTCPeer: Disable ICE bundling"),n.bundlePolicy="balanced",this.bundlePolicy="balanced"):this.bundlePolicy="max-bundle",this.isFirefox&&n.iceServers.forEach(function(e){e.username=e.username+"#firefox"}),this.pc=new RTCPeerConnection(n,r),this.pc.onicecandidate=this.onIceCandidate,this.pc.onaddstream=this.onRemoteStreamAdded,this.pc.onremovestream=this.onRemoteStreamRemoved,this.pc.onsignalingstatechange=this.onSignalingStateChanged,this.pc.oniceconnectionstatechange=this.onIceConnectionStateChanged,this.pc.onicegatheringstatechange=this.onIceGatheringStateChanged,this.pc.onnegotiationneeded=this.onNegotiationNeeded,i.isNull(e.localAudioStream)||i.isUndefined(e.localAudioStream)||this.addStream(e.localAudioStream),i.isNull(e.localVideoStream)||i.isUndefined(e.localVideoStream)||this.addStream(e.localVideoStream),i.isNull(e.fakeStream)||i.isUndefined(e.fakeStream)||this.addStream(e.fakeStream),this.callStats=new u({peerConnection:this.pc,statsPollInterval:this.isFirefox?1e3:this.model.get("statsPollInterval")}),this.callStatsModel=this.callStats.model,this.callStats.on("rtcstats",this.checkFFMediaConnectivity),this.isFirefox&&(this.sdpInterop=new g.Interop),this.webrtcFec=n.webrtcFec},addStream:function(e){if(this.isPCClosed())return a.warn("RTCPeer: Peer connection is closed, ignoring addStream request"),s.PEER_CONNECTION_ERRORS.PC_CLOSED;this.pc.addStream(e),this.model.setStreamByType(e,"local",e),a.debug("RTCPeer: Added stream to peer connection: ",e.id)},removeStream:function(e){if(this.isPCClosed())return a.warn("RTCPeer: Peer connection is closed, ignoring removeStream request"),s.PEER_CONNECTION_ERRORS.PC_CLOSED;this.pc.removeStream(e),this.model.setStreamByType(e,"local",null),a.debug("RTCPeer: Removed stream from peer connection: ",e.id)},removeAudioStream:function(){var e=this.model.get("localAudioStream");i.isNull(e)||i.isUndefined(e)?a.debug("RTCPeer: Local Audio Stream in PC is null, cannot remove"):this.removeStream(e)},removeVideoStream:function(){var e=this.model.get("localVideoStream");i.isNull(e)||i.isUndefined(e)?a.debug("RTCPeer: Local Video Stream in PC is null, cannot remove"):this.removeStream(e)},onIceCandidate:function(e){var t=e.candidate;t?(this.model.set("iceGatheringState",this.pc.iceGatheringState),this.trigger("iceCandidate",this,t),this.numIceCandidates++):null===t&&(0===this.numIceCandidates?(a.debug("RTCPeer :: Received NULL Ice Candidate before gathering candidates"),this.onIceGatheringFailure()):(a.debug("RTCPeer: Ice Gathering complete, Ice Candidate count "+this.numIceCandidates),this.model.set("iceGatheringState",this.pc.iceGatheringState)))},onIceConnectionStateChanged:function(e){if(this.pc)switch(this.model.set("iceConnectionState",this.pc.iceConnectionState),a.debug("RTCPeer: iceConnectionState changed to: "+this.pc.iceConnectionState),this.pc.iceConnectionState){case this.ICE_CONNECTION_STATES.CHECKING:this.initIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.CONNECTED:case this.ICE_CONNECTION_STATES.COMPLETED:this.initCallStats(),this.clearIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.DISCONNECTED:this.initIceRestart(),this.initIceConnectivityTimer();break;case this.ICE_CONNECTION_STATES.FAILED:this.isFirefox?(a.warn("ICE connection failed, restarting the call"),p.callDisconnected(s.DISCONNECT_REASONS.ICE_CONNECTION_FAILED)):(this.initIceConnectivityTimer(),this.restartIce());break;case this.ICE_CONNECTION_STATES.CLOSED:this.isPCClosed()||this.trigger("iceConnectionClosed")}},ffIceConnectionChange:function(e){this.pc&&(this.model.set("iceConnectionState",e),e===this.ICE_CONNECTION_STATES.CONNECTED?this.clearIceConnectivityTimer():(this.initIceRestart(),this.initIceConnectivityTimer()))},initIceRestart:function(){var e=this,t=this.model.get("iceConnectionState");this.iceRestartTimer=window.setTimeout(function(){(t=e.model.get("iceConnectionState"))===e.ICE_CONNECTION_STATES.CONNECTED||t===e.ICE_CONNECTION_STATES.COMPLETED?e.clearIceRestartTimer():e.restartIce()},this.iceRestartTimeout)},restartIce:function(){this.trigger("restartICE"),this.clearIceRestartTimer(),this.isConnectionLost=!1},initIceConnectivityTimer:function(){var e=this;null===e.iceConnectivityTimer&&(e.iceConnectivityTimer=setTimeout(function(){var t=e.model.get("iceConnectionState");t!==e.ICE_CONNECTION_STATES.CONNECTED&&t!==e.ICE_CONNECTION_STATES.COMPLETED&&(a.warn("Can not establish ICE connectivity, restarting the call"),0===e.numIceCandidates?p.callDisconnected(s.DISCONNECT_REASONS.ICE_GATHERING_FAILED):p.callDisconnected(s.DISCONNECT_REASONS.ICE_CONNECTION_FAILED))},e.iceConnectivityTimeout))},clearIceRestartTimer:function(){this.iceRestartTimer&&window.clearTimeout(this.iceRestartTimer),this.iceRestartTimer=null},clearIceConnectivityTimer:function(){this.iceConnectivityTimer&&window.clearTimeout(this.iceConnectivityTimer),this.iceConnectivityTimer=null},onIceGatheringStateChanged:function(e){a.debug("RTCPeer: Received 'iceGatheringStateChange' event")},onNegotiationNeeded:function(e){},onSignalingStateChanged:function(e){this.pc&&(a.debug("RTCPeer: signalingState changed to: "+this.pc.signalingState),this.model.set("signalingState",this.pc.signalingState),"closed"!==this.pc.signalingState||this.isClosing||p.callDisconnected(s.DISCONNECT_REASONS.SIG_CHANNEL_CLOSED))},onIceCandidatesEnded:function(){a.debug("RTCPeer: Received 'endOfCandidates' event")},onRemoteStreamAdded:function(e){var t=e.stream;i.isNull(t)||i.isUndefined(t)?a.error("RTCPeer: onRemoteStreamAdded event has invalid stream in it: ",t):(this.model.setStreamByType(t,"remote",t),a.debug("RTCPeer: Connector added a stream to peer connection: ",t))},onRemoteStreamRemoved:function(e){var t=e.stream;i.isNull(t)||i.isUndefined(t)?a.error("RTCPeer: onRemoteStreamRemoved event has invalid stream in it: ",t):(this.model.setStreamByType(t,"remote",null),a.debug("RTCPeer: Connector removed a stream from peer connection: ",t))},initCallStats:function(){this.callStats.startPollingStats()},checkFFMediaConnectivity:function(e){if(!this.isRemoteMute&&"connected"===this.model.get("iceConnectionState")){var t=0;Object.keys(e).find(function(n){var r,i;r=e[n],i="inboundrtp",r.type!=i||r.isRemote||(t+=e[n].packetsReceived)}),t-this.oldPktCount?(this.pktRecvCounter=this.maxPktRecvCounter,this.isConnectionLost&&(this.isConnectionLost=!1,this.ffIceConnectionChange("connected"),a.debug("RTCPeer :: ICE connected"))):this.pktRecvCounter?this.pktRecvCounter--:this.isConnectionLost||(this.ffIceConnectionChange("disconnected"),this.isConnectionLost=!0,a.debug("RTPeer :: ICE disconnected")),this.oldPktCount=t}},handleResponseMessage:function(e){},handleErrorMessage:function(e){a.debug("RTCPeer: Received 'error' message: "+e)},handleNotificationMessage:function(e){a.debug("RTCPeer: Received 'notification' message: "+e);var t=c.METHODS;switch(e.method){case t.CANDIDATE:this.pc.processIce(e.iceCandidate);break;default:a.error("RTCPeer: Method received in notification message: "+e.method+" is not supported.")}},createOffer:function(e){var n=this,r=t.defer();if(this.isFirefox)o=e;else var o=i.extend({},this.model.get("receiveMedia"),e);return o&&o.iceRestart&&(this.numIceCandidates=0),this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring createOffer request"),r.reject(s.PEER_CONNECTION_ERRORS.PC_CLOSED)):this.pc.createOffer(function(e){(!n.webrtcFec||n.isFirefox||m.version<"48")&&(m.version<"51"&&!n.isFirefox?(e.sdp=h.maybeRemoveCodecFromSDP(e.sdp,"98"),e.sdp=h.maybeRemoveCodecFromSDP(e.sdp,"116")):e.sdp=h.maybeRemoveVideoFec(e.sdp,{videoFec:"false"})),n.pc.setLocalDescription(e,function(){n.isFirefox&&((e=n.sdpInterop.toPlanB(e)).sdp=h.maybeReplaceVideoPortNumber(e.sdp,9)),e=n._appendInfoToSdp(e),n.model.set("localSdp",e),r.resolve(e)},function(e){a.error("RTCPeer: Error while setting localSdp: "+e),r.reject(e)})},function(e){a.error("RTCPeer: Error while creating offer sdp: "+e),r.reject(e)},o),r.promise},handleOffer:function(e){var n=this,r=e.params.sessionDescription,i=t.defer(),o=function(e){a.error("RTCPeer: Error while processing incoming offer request: "+e),i.reject(e)};return this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring handleOffer request"),i.reject(s.PEER_CONNECTION_ERRORS.PC_CLOSED)):this.pc.setRemoteDescription(new RTCSessionDescription(r),function(){n.model.set("remoteSdp",r),n.pc.createAnswer(function(e){n.pc.setLocalDescription(answer,function(){e=n._appenInfotoSdp(e),n.model.set("localSdp",e),i.resolve()},o)},o)},o),i.promise},handleAnswer:function(e){var n=this,r=e.params.sessionDescription,i=t.defer();return this.isPCClosed()?(a.warn("RTCPeer: Peer connection is closed, ignoring handleAnswer request"),i.reject(s.PEER_CONNECTION_ERRORS.PC_CLOSED)):(this.isFirefox&&(r=this.sdpInterop.toUnifiedPlan(r)),this.pc.setRemoteDescription(new RTCSessionDescription(r),function(){n.model.set("remoteSdp",r),i.resolve()},function(e){a.error("RTCPeer: Error while setting remote description: "+e),i.reject(e)})),i.promise},handleUpdate:function(e){var n=t.defer();return a.warn("RTCPeer: 'update' Method is not supported yet"),n.resolve(),n.promise},handleKeepAlive:function(e){a.debug("RTCPeer: Received a keepalive message");var n=t.defer();return n.resolve(),n.promise},handleDisconnect:function(e){var n=t.defer();return this.pc?(this.isClosing=!0,"closed"!==this.pc.signalingState&&this.pc.close(),this.model.set("remoteStream",null),this.model.set("closed",!0),this.pc=null):a.warn("RTCPeer: This Peer Connection has already been closed!!"),n.resolve(),n.promise},handleIceCandidate:function(e){var n=t.defer();if(this.isFirefox&&("audio"===e.sdpMid?e.sdpMid="sdparta_0":(e.sdpMid="sdparta_1",e.sdpMLineIndex=1)),this.pc){var r=new RTCIceCandidate({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate,sdpMid:e.sdpMid});this.pc.addIceCandidate(r),n.resolve()}return n.promise},isPCClosed:function(){return!0===this.model.get("closed")||"closed"===this.pc.signalingState},_appendInfoToSdp:function(e){var t=new Object({audioMsid:"",videoMsid:"",contnetMsid:""});return this.pc.getLocalStreams().forEach(function(e){switch(e.bjn_label){case"local_av_stream":t.audioMsid=e.id,t.videoMsid=e.id;break;case"local_audio_stream":t.audioMsid=e.id;break;case"local_video_stream":t.videoMsid=e.id;break;case"content_stream":case"fake_stream":t.contentMsid=e.id;break;default:a.error("RTCPeer: Invalid Stream found in PC "+e.bjn_label)}}),e.streamInfo=t,e},onIceGatheringFailure:function(){var e=this;window.setTimeout(function(){0===e.numIceCandidates&&(a.warn("RTCPeer :: Received only NULL Ice Candidate before gathering candidates, Restarting the call"),p.callDisconnected(s.DISCONNECT_REASONS.ICE_GATHERING_FAILED))},5e3)},replaceTrack:function(e,t){var n=this,r=null;if("audio"===e||"video"===e?r="audio"===e?this.model.get("localAudioStream"):this.model.get("localVideoStream"):t?(this.model.setStreamByType(t,"local",t),r=this.model.get("fakeStream")):(r=this.model.get("localContentStream"),t=this.model.get("fakeStream"),this.model.setStreamByType(r,"local",null)),i.isNull(r)||i.isUndefined(r)||!this.pc)a.debug("RTCPeer: Local Stream in PC is null, cannot replace the track");else if(r.id!==t.id){var o=r.getTracks()[0].id;this.pc.getSenders().forEach(function(e){e&&e.track.id===o&&(e.replaceTrack(t.getTracks()[0]),n.model.setStreamByType(t,"local",t))})}},close:function(){a.debug("RTCPeer: closing RTCPeerConnection now"),this.isClosing=!0,this.clearIceConnectivityTimer(),this.clearIceRestartTimer(),this.handleDisconnect(),this.callStats.close(),this.numIceCandidates=0}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(4),r=n(2),i=n(1),o=n(0),a=n(3),s=n(52),c=n(7),u=n(6),l=n(24),f=n(10),d=n(13),p=n(12),h=n(22),g=n(8),m=n(5);return r.Class({config:{keepAliveMaxFailures:6,keepAliveConnectorfailure:2,sdpParams:{videoRecvBitrate:1200}},peer:null,offerInProgress:!1,createOfferQueued:!1,keepAliveTimer:null,keepAliveFailedAttempts:0,isSignallingChannelReady:!1,constructor:function(e){i.bindAll(this),i.extend(this.config,e),i.extend(this,o.Events),this.BJ_CALLSTATES=u.BJ_CALLSTATES,this.WEBRTC_STATES=u.WEBRTC_STATES,d.setupMessageParser(this.getSignallingCallbacks()),this.iceCandidates=[],this.isSignalingChannelReady=!1,p.on("receivedConnectResponse",this.onReceiveConnectResponse),p.on("receivedKeepAliveResponse",this.onKeepAliveResponse)},createPeer:function(e){this.peer=new s(e),this.peer.on("iceCandidate",this.onNewIceCandiate),this.peer.model.on("change:iceGatheringState",this.onIceGatheringStateChanged),this.peer.model.on("change:iceConnectionState",this.onIceConnectionStateChange),this.peer.model.on("change:signalingState",this.onSignalingStateChange)},getPeer:function(){return this.peer},updateMeetingParams:function(e){if(this.meetingParams=e,this.meetingParams.maxBandwidth){var t=window.parseInt(this.meetingParams.maxBandwidth,10);t>=100&&t<=4096?(this.config.sdpParams.videoRecvBitrate=this.meetingParams.maxBandwidth,a.debug("RTCPeerConnectionManager :: Updating max session bitrate to - "+this.config.sdpParams.videoRecvBitrate)):a.debug("RTCPeerConnectionManager :: received invalid max bitrate "+t+", using default value")}else a.debug("RTCPeerConnectionManager :: using default max session bitrate - "+this.config.sdpParams.videoRecvBitrate)},signallingChannelCreated:function(){this.initKeepAliveMessage(),this.sendKeepAliveMessage(!1),this.isSignalingChannelReady=!0,this.enqueueIceCandidates()},initiateCall:function(e,t){var n=this;this.iceCandidates=[],this.createOffer(e).then(function(e){var t=f.getCurrentCallState();t===n.BJ_CALLSTATES.CONNECTING||t===n.BJ_CALLSTATES.INITIALISING||t===n.BJ_CALLSTATES.IDLE?n.sendConnectMessage(e):t!==n.BJ_CALLSTATES.RECONNECTING&&t!==n.BJ_CALLSTATES.REINITIALISING||n.sendUpdateMessage(e)},function(e){throw a.error("RTCPeerConnectionManager: Error while creating offerSdp, reconnecting the call"),f.callDisconnected(g.DISCONNECT_REASONS.SIG_CHANNEL_CLOSED),e})},sendIceCandidate:function(e){if(e){"firefox"===m.browser&&("sdparta_0"===e.sdpMid?e.sdpMid="audio":"sdparta_1"!==e.sdpMid&&"sdparta_2"!==e.sdpMid||(e.sdpMid="video",e.sdpMLineIndex=1));var t=c.getIceCandidateMessage(e);d.sendMsg(t),p.onBlueJayRequest(t)}},enqueueIceCandidates:function(){var e=this;e.iceCandidates.forEach(function(t){e.sendIceCandidate(t)})},onNewIceCandiate:function(e,t){!1===this.isSignalingChannelReady?this.iceCandidates.push(t):this.sendIceCandidate(t)},onIceGatheringStateChanged:function(e){f.iceGatheringStateChange(e.get("iceGatheringState"))},onIceConnectionStateChange:function(e){f.iceConnectionStateChange(e.get("iceConnectionState"))},onSignalingStateChange:function(e){f.signalingStateChange(e.get("signalingState"))},handleResponseMessage:function(e){return this.getPeer().handleResponseMessage(e)},handleErrorMessage:function(e){return this.getPeer().handleErrorMessage(e)},handleNotificationMessage:function(e){return this.getPeer().handleNotificationMessage(e)},handleRequestMessage:function(e){var t=c.METHODS,n=this.getPeer();switch(e.method){case t.CONNECT:return this.onConnect(n,e);case t.ANSWER:return this.onAnswer(n,e);case t.UPDATE:return this.onUpdate(n,e);case t.DISCONNECT:return this.onDisconnect(n,e);case t.KEEPALIVE:return this.onKeepAlive(n,e);case t.ICE:return this.onIceCandidate(n,e);default:a.error("RTCPeerConnectionManager: Method received in message: "+e.method+" is not supported.")}},onConnect:function(e,t){return e.handleOffer(t)},onAnswer:function(e,t){var n=this;return t.params.sessionDescription.sdp=l.maybeSetVideoReceiveBitRate(t.params.sessionDescription.sdp,n.config.sdpParams),e.handleAnswer(t).then(function(){n.offerInProgress=!1,n.createOfferQueued&&(a.debug("RTCPeerConnectionManager: Processing previously Queued 'update offer' request"),n.createUpdateOffer(),n.createOfferQueued=!1)})},onUpdate:function(e,t){return e.handleUpdate(t)},onDisconnect:function(e,t){return e.handleDisconnect(t)},onKeepAlive:function(e,t){return e.handleKeepAlive(t)},onIceCandidate:function(e,t){return e.handleIceCandidate(t.params.iceCandidate)},addPeerStream:function(e){var t=this.getPeer();return t?(t.addStream(e),this.createUpdateOffer(),!0):(a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring addStream API on it"),!1)},updatePeerStream:function(e){var t=this.getPeer();if(!t)return a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring updatePeerStream API on it"),!1;i.isUndefined(e.newAudioStream)||i.isNull(e.newAudioStream)||("firefox"===m.browser?t.replaceTrack("audio",e.newAudioStream):(t.removeAudioStream(),t.addStream(e.newAudioStream))),i.isUndefined(e.newVideoStream)||i.isNull(e.newVideoStream)||("firefox"===m.browser?t.replaceTrack("video",e.newVideoStream):(t.removeVideoStream(),t.addStream(e.newVideoStream))),"firefox"!==m.browser&&this.createUpdateOffer()},updateContentStream:function(e){this.getPeer().replaceTrack("content",e)},removePeerStream:function(e){var t=this.getPeer();return t?(t.removeStream(e),this.createUpdateOffer(),!0):(a.warn("RTCPeerConnectionManager: RTCPeer does not exist, ignoring removeStream API on it"),!1)},createUpdateOffer:function(e){var t=this;!1!==this.isSignallingChannelReady?this.createOffer(e).then(function(e){t.sendUpdateMessage(e)},function(e){a.error('RTCPeerConnectionManager: RTCPeer failed to create "updated" offer')}):this.createOfferQueued=!0},createOffer:function(e){var n=this.getPeer(),r=this,i=t.defer(),o=f.getCurrentCallState();return this.offerInProgress?(this.createOfferQueued=!0,a.debug("RTCPeerConnectionManager: Queing 'update offer' request. Current call state: ",o)):(r.offerInProgress=!0,n.createOffer(e).then(function(e){e.sdp=l.maybeSetVideoReceiveBitRate(e.sdp,r.config.sdpParams),e.sdp=l.maybeSetTrickleIceAttr(e.sdp),i.resolve(e)},function(e){r.offerInProgress=!1,i.reject(e)})),i.promise},sendConnectMessage:function(e){var t=c.getConnectMessage({sessionId:this.meetingParams.sessionId,endpointProperties:this.meetingParams.endpointDetails,sessionDescription:e,streamInfo:e.streamInfo,bundlingPolicy:this.peer.bundlePolicy});p.onBlueJayRequest(t),d.sendMsg(t)},sendUpdateMessage:function(e){var t=c.getUpdateMessage({sessionDescription:e,streamInfo:e.streamInfo});p.onBlueJayRequest(t),d.sendMsg(t)},sendKeepAliveMessage:function(e){if(!e||this.keepAliveFailedAttempts>=this.config.keepAliveMaxFailures-1){var t=c.getKeepaliveMessage();p.onKeepaliveRequest(t.id),d.sendMsg(t)}},getSignallingCallbacks:function(){return{request:this.onRequestMessage,response:this.onResponseMessage,error:this.onErrorMessage,notification:this.onNotificationMessage,invalidMessage:this.onInvalidMessage}},onRequestMessage:function(e){var t=c.getSuccessResponse(e.id);i.isUndefined(p.lookupOutgoingResponse(e.id))?e.method===c.METHODS.TOKEN?(h.handleTokenMessage(e),d.sendMsg(t)):this.handleRequestMessage(e).then(function(n){d.sendMsg(t),p.onOutgoingBlueJayResponse(e.id,t),"disconnect"===e.method&&f.callDisconnected(e.params)},function(t){a.debug("RTCPeerConnectionManager :: Error while handling request message "+t);var n=c.getErrorResponse(e.id,g.SIGNALING_ERRORS.BAD_REQUEST);d.sendMsg(n)}):d.sendMsg(t)},onResponseMessage:function(e){this.handleResponseMessage(e),p.onIncomingBlueJayResponse(e.id)},onErrorMessage:function(e){this.handleErrorMessage(e),e.error.code!==g.SIGNALING_ERRORS.METHOD_NOT_IMPLEMENTED.code?f.callDisconnected(g.DISCONNECT_REASONS.TRANSPORT_FAIL):a.warn("RTCPeerConnectionManager :: Method not Implemented, Message :: "+JSON.stringify(p.getRequestMessage(e.id)))},onNotificationMessage:function(e){this.handleNotificationMessage(e)},onInvalidMessage:function(e,t){var n=c.getErrorResponse(e.id,t);d.sendMsg(n)},initKeepAliveMessage:function(){var e=this;e.keepAliveTimer=setInterval(function(){"finished"===p.getKeepaliveMessageState()?(e.sendKeepAliveMessage(!1),e.keepAliveFailedAttempts=0):(e.keepAliveFailedAttempts++,e.keepAliveFailedAttempts==e.config.keepAliveConnectorfailure&&d.WS_STATES===u.WS_STATES.CONNECTED||e.keepAliveFailedAttempts>=e.config.keepAliveMaxFailures?(a.warn("RTCPeerConnectionManager: KeepAlive timeout has occurred, call will need to be reconnected!!"),f.callDisconnected(g.DISCONNECT_REASONS.KEEPALIVE_TIMEOUT)):e.sendKeepAliveMessage(!1))},p.config.keepaliveTimeout)},stopKeepAliveMessages:function(){this.keepAliveFailedAttempts=0,clearInterval(this.keepAliveTimer)},onReceiveConnectResponse:function(){this.isSignallingChannelReady=!0},onKeepAliveResponse:function(){this.keepAliveFailedAttempts=0},reset:function(){this.close()},close:function(){var e=this.getPeer();this.stopKeepAliveMessages(),this.createOfferQueued=!1,this.offerInProgress=!1,this.isSignalingChannelReady=!1,e&&e.close()}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){t.exports=function(e,t,n){window.URL;var r,i=t,o={autoplay:!0,mirror:!1,muted:!1,audio:!1,disableContextMenu:!1};if(n)for(r in n)o[r]=n[r];return i?"audio"===i.tagName.toLowerCase()&&(o.audio=!0):i=document.createElement(o.audio?"audio":"video"),o.disableContextMenu&&(i.oncontextmenu=function(e){e.preventDefault()}),o.autoplay&&(i.autoplay="autoplay"),o.muted&&(i.muted=!0),!o.audio&&o.mirror&&["","moz","webkit","o","ms"].forEach(function(e){var t=e?e+"Transform":"transform";i.style[t]="scaleX(-1)"}),i.srcObject=e,i}},{}]},{},[1])(1)},function(e,t,n){var r,i;i=function(){return function(e,t,n){function i(n,a){if(!t[n]){if(!e[n]){if(!a&&"function"==typeof r&&r)return r(n,!0);if(o)return o(n,!0);throw new Error("Cannot find module '"+n+"'")}var s=t[n]={exports:{}};e[n][0].call(s.exports,function(t){var r=e[n][1][t];return i(r||t)},s,s.exports)}return t[n].exports}for(var o="function"==typeof r&&r,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t,n){for(var r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=r.length,o=function(){},a={};i--;)a[r[i]]=o;t.exports=a},{}]},{},[1])(1)},"function"==typeof bootstrap?bootstrap("mockconsole",i):e.exports=i()},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var r=e("webrtcsupport");function i(e){if(this.support=r.webAudio&&r.mediaStream,this.gain=1,this.support){var t=this.context=new r.AudioContext;this.microphone=t.createMediaStreamSource(e),this.gainFilter=t.createGain(),this.destination=t.createMediaStreamDestination(),this.outputStream=this.destination.stream,this.microphone.connect(this.gainFilter),this.gainFilter.connect(this.destination),e.addTrack(this.outputStream.getAudioTracks()[0]),e.removeTrack(e.getAudioTracks()[0])}this.stream=e}i.prototype.setGain=function(e){this.support&&(this.gainFilter.gain.value=e,this.gain=e)},i.prototype.getGain=function(){return this.gain},i.prototype.off=function(){return this.setGain(0)},i.prototype.on=function(){this.setGain(1)},t.exports=i},{webrtcsupport:2}],2:[function(e,t,n){var r,i=!1,o=!1,a=window.navigator.userAgent.toLowerCase();-1!==a.indexOf("firefox")?(r="moz",o=!0):-1!==a.indexOf("chrome")&&(r="webkit",i=!0);var s=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,c=window.mozRTCIceCandidate||window.RTCIceCandidate,u=window.mozRTCSessionDescription||window.RTCSessionDescription,l=window.webkitMediaStream||window.MediaStream,f=window.navigator.userAgent.match("Chrome")&&parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10)>=26,d=window.AudioContext;t.exports={support:!!s,dataChannel:i||o||s&&s.prototype&&s.prototype.createDataChannel,prefix:r,webAudio:!(!d||!d.prototype.createMediaStreamSource),mediaStream:!(!l||!l.prototype.removeTrack),screenSharing:!!f,AudioContext:d,PeerConnection:s,SessionDescription:u,IceCandidate:c}},{}]},{},[1])(1)},function(e,t,n){var r;void 0===(r=function(e,t,n){function r(){this.callbacks={}}n.exports=r,r.prototype.on=function(e,t,n){var r=3===arguments.length,i=r?arguments[1]:void 0,o=r?arguments[2]:arguments[1];return o._groupName=i,(this.callbacks[e]=this.callbacks[e]||[]).push(o),this},r.prototype.once=function(e,t,n){var r=this,i=3===arguments.length,o=i?arguments[1]:void 0,a=i?arguments[2]:arguments[1];return this.on(e,o,function t(){r.off(e,t),a.apply(this,arguments)}),this},r.prototype.releaseGroup=function(e){var t,n,r,i;for(t in this.callbacks)for(n=0,r=(i=this.callbacks[t]).length;n<r;n++)i[n]._groupName===e&&(i.splice(n,1),n--,r--);return this},r.prototype.off=function(e,t){var n,r=this.callbacks[e];return r?1===arguments.length?(delete this.callbacks[e],this):(n=r.indexOf(t),r.splice(n,1),0===r.length&&delete this.callbacks[e],this):this},r.prototype.emit=function(e){var t,n,r,i=[].slice.call(arguments,1),o=this.callbacks[e],a=this.getWildcardCallbacks(e);if(o)for(t=0,n=(r=o.slice()).length;t<n&&r[t];++t)r[t].apply(this,i);if(a)for(n=a.length,t=0,n=(r=a.slice()).length;t<n&&r[t];++t)r[t].apply(this,[e].concat(i));return this},r.prototype.getWildcardCallbacks=function(e){var t,n,r=[];for(t in this.callbacks)n=t.split("*"),("*"===t||2===n.length&&e.slice(0,n[0].length)===n[0])&&(r=r.concat(this.callbacks[t]));return r}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){var r=e("getusermedia"),i={};t.exports=function(e,t){var n,o=2===arguments.length,a=o?t:e;if("undefined"==typeof window||"http:"===window.location.protocol)return(n=new Error("NavigatorUserMediaError")).name="HTTPS_REQUIRED",a(n);if(window.navigator.userAgent.match("Chrome")){var s=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),c=33,u=!window.chrome.webstore;if(window.navigator.userAgent.match("Linux")&&(c=35),u||s>=26&&s<=c)e=o&&e||{video:{mandatory:{googLeakyBucket:!0,maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3,chromeMediaSource:"screen"}}},r(e,a);else{var l=window.setTimeout(function(){return(n=new Error("NavigatorUserMediaError")).name="EXTENSION_UNAVAILABLE",a(n)},1e3);i[l]=[a,o?constraint:null],window.postMessage({type:"getScreen",id:l},"*")}}else if(window.navigator.userAgent.match("Firefox")){var f=parseInt(window.navigator.userAgent.match(/Firefox\/(.*)/)[1],10);f>=33?r(e=o&&e||{video:{mozMediaSource:"window",mediaSource:"window"}},function(e,t){if(a(e,t),!e)var n=t.currentTime,r=window.setInterval(function(){t||window.clearInterval(r),t.currentTime==n&&(window.clearInterval(r),t.onended&&t.onended()),n=t.currentTime},500)}):(n=new Error("NavigatorUserMediaError")).name="EXTENSION_UNAVAILABLE"}},window.addEventListener("message",function(e){if(e.origin==window.location.origin)if("gotScreen"==e.data.type&&i[e.data.id]){var t=i[e.data.id],n=t[1],o=t[0];if(delete i[e.data.id],""===e.data.sourceId){var a=new Error("NavigatorUserMediaError");a.name="PERMISSION_DENIED",o(a)}else(n=n||{audio:!1,video:{mandatory:{chromeMediaSource:"desktop",maxWidth:window.screen.width,maxHeight:window.screen.height,maxFrameRate:3},optional:[{googLeakyBucket:!0},{googTemporalLayeredScreencast:!0}]}}).video.mandatory.chromeMediaSourceId=e.data.sourceId,r(n,o)}else"getScreenPending"==e.data.type&&window.clearTimeout(e.data.id)})},{getusermedia:2}],2:[function(e,t,n){var r=window.navigator.getUserMedia||window.navigator.webkitGetUserMedia||window.navigator.mozGetUserMedia||window.navigator.msGetUserMedia;t.exports=function(e,t){var n,i=2===arguments.length,o="PermissionDeniedError";if(i||(t=e,e={video:!0,audio:!0}),!r)return(n=new Error("MediaStreamError")).name="NotSupportedError",window.setTimeout(function(){t(n)},0);var a=window.location.protocol;return"http:"!==a&&"https:"!==a?((n=new Error("MediaStreamError")).name="NotSupportedError",window.setTimeout(function(){t(n)},0)):e.audio||e.video?(localStorage&&"true"===localStorage.useFirefoxFakeDevice&&(e.fake=!0),void r.call(window.navigator,e,function(e){t(null,e)},function(e){var n;"string"==typeof e?(n=new Error("MediaStreamError")).name=e===o?o:"ConstraintNotSatisfiedError":(n=e).name||(n[o]?e.name=o:e.name="ConstraintNotSatisfiedError"),t(n)})):((n=new Error("MediaStreamError")).name="NoMediaRequestedError",window.setTimeout(function(){t(n)},0))}},{}]},{},[1])(1)},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){t.exports=function(e,t){var n,r=2===arguments.length,i="PermissionDeniedError";return r||(t=e,e={video:!0,audio:!0}),"undefined"!=typeof navigator&&navigator.getUserMedia?e.audio||e.video?void navigator.mediaDevices.getUserMedia(e).then(function(e){t(null,e)}).catch(function(e){var n;"string"==typeof e?(n=new Error("MediaStreamError")).name=e===i||"PERMISSION_DENIED"===e?i:"ConstraintNotSatisfiedError":(n=e).name||(n[i]?e.name=i:e.name="ConstraintNotSatisfiedError"),t(n)}):((n=new Error("MediaStreamError")).name="NoMediaRequestedError",setTimeout(function(){t(n)},0)):((n=new Error("MediaStreamError")).name="NotSupportedError",setTimeout(function(){t(n)},0))}},{}]},{},[1])(1)},function(e,t,n){var r;void 0===(r=function(e,t,n){var r,i;window.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(window.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=window.mozRTCPeerConnection||window.webkitRTCPeerConnection,a=window.mozRTCIceCandidate||window.RTCIceCandidate,s=window.mozRTCSessionDescription||window.RTCSessionDescription,c=window.webkitMediaStream||window.MediaStream,u="https:"===window.location.protocol&&("webkit"===r&&i>=26||"moz"===r&&i>=33),l=window.AudioContext||window.webkitAudioContext,f=document.createElement("video"),d=f&&f.canPlayType&&"probably"===f.canPlayType('video/webm; codecs="vp8", vorbis'),p=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;n.exports={prefix:r,browserVersion:i,support:!!o&&d&&!!p,supportRTCPeerConnection:!!o,supportVp8:d,supportGetUserMedia:!!p,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,dataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),webAudio:!(!l||!l.prototype.createMediaStreamSource),mediaStream:!(!c||!c.prototype.removeTrack),screenSharing:!!u,AudioContext:l,PeerConnection:o,SessionDescription:s,IceCandidate:a,MediaStream:c,getUserMedia:p}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){(function(t){var n;e.exports=function e(t,r,i){function o(s,c){if(!r[s]){if(!t[s]){var u="function"==typeof n&&n;if(!c&&u)return n(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var n=t[s][1][e];return o(n||e)},f,f.exports,e,t,r,i)}return r[s].exports}for(var a="function"==typeof n&&n,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],2:[function(e,t,n){var r=t.exports={};function i(){}r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var r=[];if(t){var i=document.createElement("div"),o=new MutationObserver(function(){var e=r.slice();r.length=0,e.forEach(function(e){e()})});return o.observe(i,{attributes:!0}),function(e){r.length||i.setAttribute("yes","no"),r.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],3:[function(e,t,n){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,n,r){(function(t,n){var i=/%[sdj%]/g;r.format=function(e){if(!v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(e).replace(i,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),c=r[n];n<o;c=r[++n])g(c)||!_(c)?a+=" "+c:a+=" "+s(c);return a},r.deprecate=function(e,i){if(y(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var o,a={};function s(e,t){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&r._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),l(n,e,n.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,t,n){if(e.customInspect&&t&&w(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return v(i)||(i=l(e,i,n)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}(e,t);if(o)return o;var a=Object.keys(t),s=function(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),C(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(w(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(S(t))return e.stylize(Date.prototype.toString.call(t),"date");if(C(t))return f(t)}var u,_="",T=!1,E=["{","}"];if(p(t)&&(T=!0,E=["[","]"]),w(t)){var x=t.name?": "+t.name:"";_=" [Function"+x+"]"}return b(t)&&(_=" "+RegExp.prototype.toString.call(t)),S(t)&&(_=" "+Date.prototype.toUTCString.call(t)),C(t)&&(_=" "+f(t)),0!==a.length||T&&0!=t.length?n<0?b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=T?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)k(t,String(a))?o.push(d(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(d(e,t,n,r,i,!0))}),o}(e,t,n,s,a):a.map(function(r){return d(e,t,n,s,r,T)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,_,E)):E[0]+_+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===T(e)}function _(e){return"object"==typeof e&&null!==e}function S(e){return _(e)&&"[object Date]"===T(e)}function C(e){return _(e)&&("[object Error]"===T(e)||e instanceof Error)}function w(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(y(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=t.pid;a[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else a[e]=function(){};return a[e]},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=h,r.isNull=g,r.isNullOrUndefined=function(e){return null==e},r.isNumber=m,r.isString=v,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=y,r.isRegExp=b,r.isObject=_,r.isDate=S,r.isError=C,r.isFunction=w,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var x=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){var e,t;console.log("%s - %s",(e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":"),[e.getDate(),x[e.getMonth()],t].join(" ")),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,_process:2,inherits:1}],5:[function(e,t,n){t.exports=e("util")},{util:4}]},{},[5])(5)}).call(this,n(9))},function(e,t,n){var r;void 0===(r=function(e){var t=n(61),r=n(26),i=n(60),o=n(59),a=n(58),s=n(57),c=n(56),u=n(55);function l(e){s.call(this);var t,n=this.config={autoAdjustMic:!1,detectSpeakingEvents:!0,audioFallback:!1,media:{audio:!0,video:!0},logger:u};for(t in e)this.config[t]=e[t];this.logger=n.logger,this._log=this.logger.log.bind(this.logger,"LocalMedia:"),this._logerror=this.logger.error.bind(this.logger,"LocalMedia:"),this.screenSharingSupport=i.screenSharing,this.localStreams=[],this.localScreens=[],i.support||this._logerror("Your browser does not support local media capture.")}return t.inherits(l,s),l.prototype.start=function(e,t){var n=this,r=e||this.config.media;o(r,function(e,i){if(e){if(n.config.audioFallback&&"DevicesNotFoundError"===e.name&&!1!==r.video)return r.video=!1,void n.start(r,t)}else r.audio&&n.config.detectSpeakingEvents&&n.setupAudioMonitor(i,n.config.harkOptions),n.localStreams.push(i),n.config.autoAdjustMic&&(n.gainController=new c(i),n.setMicIfEnabled(.5)),i.onended=function(){},n.emit("localStream",i);if(t)return t(e,i)})},l.prototype.stop=function(e){if(e){e.getTracks().forEach(function(e){e.stop()});var t=this.localStreams.indexOf(e);t>-1?(this.emit("localStreamStopped",e),this.localStreams=this.localStreams.splice(t,1)):(t=this.localScreens.indexOf(e))>-1&&(this.emit("localScreenStopped",e),this.localScreens=this.localScreens.splice(t,1))}else this.stopStreams(),this.stopScreenShare()},l.prototype.stopStreams=function(){var e=this;this.audioMonitor&&(this.audioMonitor.stop(),delete this.audioMonitor),this.localStreams.forEach(function(t){t.getTracks().forEach(function(e){e.stop()}),e.emit("localStreamStopped",t)}),this.localStreams=[]},l.prototype.startScreenShare=function(e){var t=this;a(function(n,r){if(n||(t.localScreens.push(r),r.onended=function(){var e=t.localScreens.indexOf(r);e>-1&&t.localScreens.splice(e,1),t.emit("localScreenStopped",r)},t.emit("localScreen",r)),e)return e(n,r)})},l.prototype.stopScreenShare=function(e){var t=this;e?(e.getTracks().forEach(function(e){e.stop()}),this.emit("localScreenStopped",e)):(this.localScreens.forEach(function(e){e.getTracks().forEach(function(e){e.stop()}),t.emit("localScreenStopped",e)}),this.localScreens=[])},l.prototype.mute=function(){this._audioEnabled(!1),this.hardMuted=!0,this.emit("audioOff")},l.prototype.unmute=function(){this._audioEnabled(!0),this.hardMuted=!1,this.emit("audioOn")},l.prototype.setupAudioMonitor=function(e,t){this._log("Setup audio");var n,i=this.audioMonitor=r(e,t),o=this;i.on("speaking",function(){o.emit("speaking"),o.hardMuted||o.setMicIfEnabled(1)}),i.on("stopped_speaking",function(){n&&clearTimeout(n),n=setTimeout(function(){o.emit("stoppedSpeaking"),o.hardMuted||o.setMicIfEnabled(.5)},1e3)}),i.on("volume_change",function(e,t){o.emit("volumeChange",e,t)})},l.prototype.setMicIfEnabled=function(e){this.config.autoAdjustMic&&this.gainController.setGain(e)},l.prototype.pauseVideo=function(){this._videoEnabled(!1),this.emit("videoOff")},l.prototype.resumeVideo=function(){this._videoEnabled(!0),this.emit("videoOn")},l.prototype.pause=function(){this.mute(),this.pauseVideo()},l.prototype.resume=function(){this.unmute(),this.resumeVideo()},l.prototype._audioEnabled=function(e){this.setMicIfEnabled(e?1:0),this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){t.enabled=!!e})})},l.prototype._videoEnabled=function(e){this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){t.enabled=!!e})})},l.prototype.isAudioEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getAudioTracks().forEach(function(t){e=e&&t.enabled})}),e},l.prototype.isVideoEnabled=function(){var e=!0;return this.localStreams.forEach(function(t){t.getVideoTracks().forEach(function(t){e=e&&t.enabled})}),e},l.prototype.startLocalMedia=l.prototype.start,l.prototype.stopLocalMedia=l.prototype.stop,Object.defineProperty(l.prototype,"localStream",{get:function(){return this.localStreams.length>0?this.localStreams[0]:null}}),Object.defineProperty(l.prototype,"localScreen",{get:function(){return this.localScreens.length>0?this.localScreens[0]:null}}),l}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;n(27),void 0===(r=function(e,t,r){var i=n(28);function o(e,t){if(!e)throw t||"Assertion failed"}var a=function(e,t){return{call:function(n,r){void 0!==e.from&&e.from!==n||void 0!==e.to&&e.to!==r||t({from:n,to:r})}}};return{create:function(e){o(void 0!==e.initial,"initial state is mandatory");var t={};t.events=e.events,t.triggers=e.triggers,t.callbacks=e.callbacks;var n={state:e.initial,activatedTriggers:[]};function r(e,t,n){e&&i.each(e,function(e){e.call(t,n)})}var a=function(e,o,a){var s=i.groupBy(t.callbacks,function(e){return!0===e.beforeTransition}),c=s[!0];c&&r(c,e,o),n.state=o;var u=s[!1];u&&r(u,e,o),!0===a&&(n.activatedTriggers=[])};return t.getState=function(){return n.state},i.each(i.keys(t.events),function(n){var r=e.events[n];o(void 0!==r),t[n]=function(){return r(t,a)}}),t.trigger=function(e){n.activatedTriggers.push(e),i.each(t.triggers,function(e){if(e.activatedBy.isFulfilled(n.activatedTriggers)&&t[e.event]()){var r=e.activatedBy.matchingTriggers(n.activatedTriggers);n.activatedTriggers=i.difference(n.activatedTriggers,r)}})},t},transitions:{transition:function(e){return function(t,n){var r=Array.isArray(e)?i.find(e,function(e){return e.from==t.getState()}):e;if(r&&void 0!==r.from&&(t.getState()==r.from||i.include(r.from,t.getState())))return n(t.getState(),r.to,r.resetTriggers),!0}},afterTransition:function(e,t){return i.extend(a(e,t),{beforeTransition:!1})},beforeTransition:function(e,t){return i.extend(a(e,t),{beforeTransition:!0})}},triggers:{anyOf:function(e){return{isFulfilled:function(e){return!i.isEmpty(this.matchingTriggers(e))},matchingTriggers:function(t){return i.intersection(e,t)}}},allOf:function(e){return{isFulfilled:function(e){return i.isEmpty(i.difference(this.matchingTriggers(e),e))},matchingTriggers:function(){return e}}}}}}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(1);return n(0),r.Model.extend({defaults:{bluejayReqMap:{},bluejayKeepAlive:{},bluejayRespMap:{},requestCallbacks:{},bluejayMuteMsg:{},bluejayTokenMsg:{},connectResponseReceived:!1,callState:"idle"},addRequest:function(e,t){this.get("bluejayReqMap")[e]=t},updateRequest:function(e,t){this.get("bluejayReqMap")[e]=t},removeRequest:function(e){this.get("bluejayReqMap")[e]&&this.unset("bluejayReqMap"[e],{silent:!0})},addResponse:function(e,t){this.get("bluejayRespMap")[e]=t},getRequest:function(e){return this.get("bluejayReqMap")[e]},getResponse:function(e){return this.get("bluejayRespMap")[e]},addKeepAlive:function(e){this.set("bluejayKeepAlive",e)},addMuteMessage:function(e){this.set("bluejayMuteMsg",e)},addTokenMessage:function(e){this.set("bluejayTokenMsg",e)},getMuteMessage:function(){return this.get("bluejayMuteMsg")},getTokenMessage:function(){return this.get("bluejayTokenMsg")},getAllRequestMsgIds:function(){return t.keys(this.get("bluejayReqMap"))},resetTransaction:function(){this.set(this.defaults,{silent:!0})}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(3),o=n(0),a=n(4),s=n(11),c=n(8),u=n(7),l=n(13),f=n(12),d=n(62),p=n(54),h=n(26),g=n(5),m=o.Model.extend({defaults:{previewStream:null,localStream:null,localAudioStream:null,localVideoStream:null,remoteStream:null,localAudioMuted:!1,localVideoMuted:!1,remoteAudioMuted:!1,remoteVideoMuted:!1,localStreamStopped:!1,availableDevices:{audioIn:[],videoIn:[],audioOut:[]},selectedMic:null,selectedCamera:null,selectedSpeaker:null,volumeLevel:0,isSpeaking:!1}});return t.Class({chromeConfig:{mediaConstraints:{audio:{advanced:[{googEchoCancellation:!0},{googAutoGainControl:!0},{googNoiseSuppression:!0},{googHighpassFilter:!0},{googAudioMirroring:!1},{googNoiseSuppression2:!0},{googEchoCancellation2:!0},{googAutoGainControl2:!0},{googDucking:!1}]},video:{width:{min:1280,max:1280},height:{min:720,max:720}}},selfViewConfig:{autoplay:!0,mirror:!0,muted:!0},volumeMonitoring:{interval:300,threshold:-50}},firefoxConfig:{mediaConstraints:{audio:{advanced:[{echoCancellation:!0},{mozAutoGainControl:!0},{mozNoiseSuppression:!0}]},video:{width:{min:"640",ideal:"1280"},height:{min:"360",ideal:"720"}}},selfViewConfig:{autoplay:!0,mirror:!0,muted:!0},volumeMonitoring:{interval:300,threshold:-50}},volumeMonitor:null,isSignallingChannelReady:!1,vadCount:0,constructor:function(e){r.bindAll(this),r.extend(this,o.Events),this.config="firefox"===g.browser?this.firefoxConfig:this.chromeConfig,this.config=s.deepMergeObjects(this.config,e),this.model=new m,this.localMedia=new d(this.config),this.cachedMediaConstraints=this.config.mediaConstraints,f.on("receivedConnectResponse",this.onReceiveConnectResponse)},startMedia:function(e,t){var n=this,r=a.defer(),i=s.deepMergeObjects(this.cachedMediaConstraints,e),o=this.cachedMediaConstraints;return this._startMedia(i,t).then(function(e){r.resolve(e),n.detectDeviceChange(o,i)},function(e){r.reject(e)}),this.cachedMediaConstraints=i,r.promise},_startMedia:function(e,t){var n=a.defer(),o=this,s=this.hasMicPreferenceChanged(this.cachedMediaConstraints,e),u=this.hasCameraPreferenceChanged(this.cachedMediaConstraints,e),l=[],f=!1;if("firefox"===g.browser&&"preview_stream"===t&&!s&&!u){var d=this.model.get("localStream");if(this.stopPreviewStream(),!r.isUndefined(d)&&!r.isNull(d)){var p=d.clone();p.bjn_label="preview_stream",p.getTracks().forEach(function(e){e.enabled=!0}),this.model.set("previewStream",p),l.push(p),n.resolve(l),f=!0}}return f||("firefox"===g.browser&&(this.stopLocalStreams(),this.stopPreviewStream(),this.stopVolumeMonitor(),this.stopLocalStreamClone()),"firefox"===g.browser&&!1===e.audio&&!1===e.video?(l=o.startMediaSuccess({stream:null,type:t,micChanged:!1,cameraChanged:!1}),n.reject(c.GET_LOCAL_MEDIA_STATES.DevicesNotFoundError)):this.localMedia.start(e,function(e,r){if(e){var a=c.translateGetUserMediaError(e);i.error("RTCLocalMediaManager: Error in get user media: ",JSON.stringify(a)),n.reject(a)}else o.startMediaSuccess({stream:r,type:t,micChanged:s,cameraChanged:u}).then(function(e){n.resolve(e)})})),n.promise},startMediaSuccess:function(e){var t=null,n=e.stream,r=null,o=this.model.get("localVideoMuted"),s=[],c=this,u=a.defer();return"firefox"===g.browser&&n&&this.saveLocalStream(n),"local_stream"===e.type?(this.createLocalStreams(n).then(function(e){u.resolve(e)}),u.promise):(this.stopPreviewStream(),(t=n).bjn_label="preview_stream",t.onended=function(){i.warn("RTCLocalMediaManager: Preview stream has ended. Id: ",this.id)},s.push(t),e.micChanged||!o&&e.cameraChanged||e.cameraChanged&&"firefox"===g.browser?(this.stopLocalStreams(),r=n.clone(),this.model.set("previewStream",t),this.createLocalStreams(r).then(function(e){s=s.concat(e),c.trigger("localStreamsChanged"),u.resolve(s)}),u.promise):(this.model.set("previewStream",t),u.resolve(s),u.promise))},createLocalStreams:function(e){var t=a.defer(),n=null,r=[],o=this,s=[];return n=this.hasVideoTracks(e)&&this.hasAudioTracks(e)?e.clone():e,s.push(this.extractAudioOnlyStream(e).then(function(e){e&&(r.push(e),o.model.set("localAudioStream",e))},function(e){i.error("RTCLocalMediaManager :: error while extracting audio stream",e)})),s.push(this.extractVideoOnlyStream(n).then(function(e){e&&(r.push(e),o.model.set("localVideoStream",e))},function(e){i.error("RTCLocalMediaManager :: error while extracting audio stream",e)})),a.all(s).then(function(){t.resolve(r)},function(e){i.error("RTCLocalMediaManager: Failed to create local streams"),t.reject(e)}),t.promise},saveLocalStream:function(e){var t=this.model.get("localStream");t&&(this.localMedia.stop(t),t=null);var n=e.clone();n.getTracks().forEach(function(e){e.enabled=!1}),n.label="local_stream",this.model.set("localStream",n)},hasMicPreferenceChanged:function(e,t){var n=this.getSourceId(e.audio),i=this.getSourceId(t.audio);return!r.isNull(i)&&n!==i},hasCameraPreferenceChanged:function(e,t){var n=this.getSourceId(e.video),i=this.getSourceId(t.video);return!r.isNull(i)&&n!==i},getSourceId:function(e){var t=null;return e.deviceId&&(t=e.deviceId),t},hasAudioTracks:function(e){return e&&e.getAudioTracks().length>0},hasVideoTracks:function(e){return e&&e.getVideoTracks().length>0},extractAudioOnlyStream:function(e){var t=a.defer(),n=this.model.get("localAudioMuted"),r=this,o=function(e){return n&&e.getAudioTracks().forEach(function(e){e.enabled=!n}),e.bjn_label="local_audio_stream",e.getAudioTracks()[0].onended=function(){i.warn("RTCLocalMediaManager: Local Audio track has ended. Id: ",this.id),r.model.set("localAudioStream",null)},e};if(this.hasAudioTracks(e)){var s=e;s.getVideoTracks().length>0&&(s.getVideoTracks()[0].stop(),s.removeTrack(s.getVideoTracks()[0])),s=o(s),t.resolve(s)}else"firefox"===g.browser?navigator.mediaDevices.getUserMedia({audio:!0,fake:!0}).then(function(e){var r=e;n=!0,r=o(r),t.resolve(r)},function(e){i.debug("RTCLocalMediaManager :: Error creating audio fake stream"),t.reject(e)}):t.resolve(null);return t.promise},extractVideoOnlyStream:function(e){var t=a.defer(),n=this.model.get("localVideoMuted"),r=this,o=function(e,t){return n&&e.getVideoTracks().forEach(function(e){"firefox"!==g.browser||t?e.stop():e.enabled=!n}),e.bjn_label="local_video_stream",e.getVideoTracks()[0].onended=function(){i.warn("RTCLocalMediaManager: Local Video track has ended. Id: ",this.id),r.model.set("localVideoStream",null)},e};if(this.hasVideoTracks(e)){var s=e;s.getAudioTracks().length>0&&(s.getAudioTracks()[0].stop(),s.removeTrack(s.getAudioTracks()[0])),s=o(s,!1),t.resolve(s)}else"firefox"===g.browser?navigator.mediaDevices.getUserMedia({video:!0,fake:!0}).then(function(e){var r=e;n=!0,r=o(r,!0),t.resolve(r)},function(e){i.debug("RTCLocalMediaManager :: Error creating fake stream"),t.reject(e)}):t.resolve(null);return t.promise},stopLocalStreams:function(){this.stopLocalAudioStream(),this.stopLocalVideoStream()},stopLocalAudioStream:function(){this.stopMedia(this.model.get("localAudioStream"),"localAudioStream")},stopLocalVideoStream:function(){this.stopMedia(this.model.get("localVideoStream"),"localVideoStream")},stopPreviewStream:function(){this.stopMedia(this.model.get("previewStream"),"previewStream")},stopLocalStreamClone:function(){this.stopMedia(this.model.get("localStream"),"localStream")},stopMedia:function(e,t){r.isNull(e)||r.isUndefined(e)||(this.localMedia.stop(e),i.debug("RTCLocalMediaManager: "+t+" has been stopped."),this.model.set(t,null,{silent:!0}))},renderStream:function(e){return e.config=r.defaults({autoplay:!0,mirror:!1,muted:!1},e.config),this.attachMediaStream(e)},renderSelfView:function(e){return e.config=r.defaults(this.config.selfViewConfig,e.config),this.attachMediaStream(e)},attachMediaStream:function(e){return e.stream&&e.el?(e.el&&(e.el.oncontextmenu=function(){return!1}),p(e.stream,e.el,e.config)):(i.error("RTCLocalMediaManager: Incorrect params passed to attachmediastream API. stream: "+e.stream+", el: "+e.el),null)},getDevices:function(){var e=this,t=a.defer(),n="",i="",o={audioIn:null,videoIn:null};this.model.get("localAudioStream")&&(n=this.model.get("localAudioStream").getAudioTracks()[0].label),this.model.get("localVideoStream")&&(i=this.model.get("localVideoStream").getVideoTracks()[0].label);var s=function(a){var s={audioIn:[],videoIn:[],audioOut:[]};r.each(a,function(t,r,a){"audio"===t.kind||"audioinput"===t.kind?(s.audioIn.push(e.translateDeviceInfo(t)),t.label===n&&(o.audioIn=t)):"video"===t.kind||"videoinput"===t.kind?(s.videoIn.push(e.translateDeviceInfo(t)),t.label===i&&(o.videoIn=t)):"audiooutput"===t.kind&&s.audioOut.push(e.translateDeviceInfo(t))}),e.model.set("availableDevices",s),t.resolve({available:s,selected:o})};return navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(s).catch(function(e){t.reject("Error in navigator.mediaDevices.enumerateDevices API")}):MediaStreamTrack.getSources?MediaStreamTrack.getSources(s):t.reject("Browser doesn't support MediaStreamTrack.getSources API"),t.promise},translateDeviceInfo:function(e){var t=e.id||e.deviceId;return"audiooutput"===e.kind&&(t=this.transformSpeakerId(t,!0)),{id:t,label:e.label,kind:e.kind,facing:e.facing,groupId:e.groupId}},transformSpeakerId:function(e,t){return t?e+"_speaker":(e&&-1!==e.indexOf("_speaker")&&(e=e.split("_speaker")[0]),e)},updateStream:function(e){r.isUndefined(e.remoteStream)||this.model.set("remoteStream",e.remoteStream)},muteStreams:function(e){var t=a.defer(),n=[];return r.isUndefined(e.localAudio)||n.push(this.muteLocalAudio(e.localAudio)),r.isUndefined(e.localVideo)||n.push(this.muteLocalVideo(e.localVideo)),r.isUndefined(e.remoteAudio)||n.push(this.muteRemoteAudio(e.remoteAudio)),r.isUndefined(e.remoteVideo)||n.push(this.muteRemoteVideo(e.remoteVideo)),a.all(n).then(function(){t.resolve()},function(){i.error("RTCLocalMediaManager: Failed to mute local/remote stream")}),t.promise},muteLocalAudio:function(e){var t=a.defer(),n=this.model.get("localAudioStream"),o=this.isAudioMuted(n);return r.isBoolean(e)&&o!==e?(r.isNull(n)||r.isUndefined(n)?i.warn("Local Audio stream is null, cannot mute/unmute local audio"):(i.debug("RTCLocalMediaManager: "+(e?"Muting ":"Unmuting ")+"local audio stream now"),n.getAudioTracks().forEach(function(t){t.enabled=!e}),this.model.set("localAudioMuted",e),i.debug("RTCLocalMediaManager: Local Audio ",e?"muted":"unmuted")),t.resolve(),t.promise):(i.debug("Local Audio is already "+(o?"muted.":"unmuted.")+" Ignoring the mute request."),t.resolve(),t.promise)},muteLocalVideo:function(e){var t=a.defer(),n=this.model.get("localVideoMuted");return r.isBoolean(e)&&n!==e?(e?this._stopLocalVideo(t):this._resumeLocalVideo(t),t.promise):(i.debug("Local Video is already "+(n?"muted.":"unmuted.")+" Ignoring the mute request."),t.resolve(),t.promise)},_stopLocalVideo:function(e){var t=null;t=this.model.get("localVideoStream"),r.isNull(t)||r.isUndefined(t)?i.warn("Local Video stream is null, cannot mute/unmute local video"):(i.debug("RTCLocalMediaManager: Stopping/Muting local video stream now"),t.getVideoTracks().forEach(function(e){"firefox"===g.browser?e.enabled=!1:e.stop()}),i.debug("RTCLocalMediaManager: Local Video muted")),this.model.set("localVideoMuted",!0),e.resolve()},_resumeLocalVideo:function(e){var t=s.deepMergeObjects(this.cachedMediaConstraints,{audio:!1});if(this.model.set("localVideoMuted",!1),"firefox"===g.browser){var n=this.model.get("localVideoStream");r.isNull(n)||r.isUndefined(n)||n.getVideoTracks().forEach(function(e){e.enabled=!0}),e.resolve()}else this._startMedia(t,"local_stream").then(function(t){i.debug("RTCLocalMediaManager: Local Video unmuted"),e.resolve()},function(t){i.warn("RTCLocalMediaManager: Failed to get local video stream: "+t),e.resolve()})},muteRemoteAudio:function(e){var t=a.defer(),n=this.model.get("remoteStream");return r.isNull(n)||r.isUndefined(n)?i.warn("Remote stream is null, cannot mute/unmute remote audio"):(n.getAudioTracks().forEach(function(t){t.enabled=!e}),this.model.set("remoteAudioMuted",e)),t.resolve(),t.promise},muteRemoteVideo:function(e){var t=a.defer(),n=this.model.get("remoteStream");return r.isNull(n)||r.isUndefined(n)?i.warn("Remote stream is null, cannot mute/unmute remote video"):(n.getVideoTracks().forEach(function(t){t.enabled=!e}),this.model.set("remoteVideoMuted",e)),t.resolve(),t.promise},isAudioMuted:function(e){var t=!0;return r.isNull(e)||r.isUndefined(e)||e.getAudioTracks().forEach(function(e){t=t&&!e.enabled}),t},startVolumeMonitor:function(e,t){r.extend(this.config.volumeMonitoring,t);var n=e.clone();n.getAudioTracks().forEach(function(e){e.enabled=!0}),n.getVideoTracks().forEach(function(e){e.stop()}),this.volumeMonitor=h(n,t),this.volumeMonitor.monitoredStream=n,this.volumeMonitor.on("volume_change",this.volumeLevelChanged),i.debug("RTCLocalMediaManager: Started volume monitor")},volumeLevelChanged:function(e,t){var n=Math.abs(1-Math.abs(e/100));"number"==typeof n&&(n=parseFloat(n.toFixed(3)));var r=n<1?n:0;this.model.set("volumeLevel",r),this.checkIfSpeaking(e)},checkIfSpeaking:function(e){e>=this.config.volumeMonitoring.threshold?(this.vadCount++,this.vadCount>=7&&(this.vadCount=20)):(this.vadCount--,this.vadCount<7&&(this.vadCount=0)),this.model.set("isSpeaking",this.vadCount>=7)},stopVolumeMonitor:function(){r.isNull(this.volumeMonitor)||(i.debug("RTCLocalMediaManager: Stopping volume monitor"),this.volumeMonitor.monitoredStream&&(this.volumeMonitor.monitoredStream.getTracks().forEach(function(e){e.stop()}),this.volumeMonitor.monitoredStream=null),this.volumeMonitor.stop())},setSpeaker:function(e){var t=this,n=e.mediaElements,i=e.speakerId;r.each(n,function(e){e&&"function"==typeof e.setSinkId&&i&&e.setSinkId(t.transformSpeakerId(i,!1))}),i&&i!==this.model.get("selectedSpeaker")&&(this.model.set("selectedSpeaker",i),this.sendDeviceInfo())},detectCameraStatus:function(e){var t,n=this,r=a.defer(),o="local_stream"===e?this.model.get("localVideoStream"):this.model.get("previewStream");return o&&"function"==typeof o.getVideoTracks?(t=o.getVideoTracks()[0])?window.setTimeout(function(){var o="local_stream"===e&&n.model.get("localVideoMuted");"ended"!==t.readyState||o?r.resolve(c.GET_LOCAL_MEDIA_STATES.AVAILABLE):(i.warn("RTCLocalMediaManager: Camera feed is unavailable, faulty camera or its in use by another program"),r.resolve(c.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE))},500):(i.warn("RTCLocalMediaManager: Stream doesn't have any video tracks"),r.resolve(c.GET_LOCAL_MEDIA_STATES.SOURCE_UNAVAILABLE)):r.resolve(c.GET_LOCAL_MEDIA_STATES.DEVICES_NOT_FOUND),r.promise},detectDeviceChange:function(e,t){var n=this.hasMicPreferenceChanged(e,t),r=this.hasCameraPreferenceChanged(e,t);this.model.set("selectedCamera",this.getSourceId(t.video)),this.model.set("selectedMic",this.getSourceId(t.audio)),(n||r)&&this.sendDeviceInfo()},sendDeviceInfo:function(){if(this.isSignallingChannelReady){var e=this.model.get("selectedMic"),t=this.model.get("selectedCamera"),n=this.model.get("selectedSpeaker"),r=this.getDeviceLabel(e,"audioIn"),o=this.getDeviceLabel(t,"videoIn"),a=this.getDeviceLabel(n,"audioOut");i.debug("RTCLocalMediaManager: Devices in use, Mic - "+r+", Camera - "+o+", Speaker - "+a);var s=u.getInfoMsg({type:"deviceinfo",device:{input:{audio:r,video:o},output:{audio:a,video:"Default"}}});l.sendMsg(s),f.onBlueJayRequest(s)}},getDeviceLabel:function(e,t){var n=null,i=this.model.get("availableDevices");return r.each(i[t],function(t,r,i){t.id===e&&(n=t.label)}),n},onReceiveConnectResponse:function(){this.isSignallingChannelReady=!0},close:function(){this.stopMediaCapture(),this.isSignallingChannelReady=!1,this.model.clear().set(m.defaults)},stopMediaCapture:function(){this.stopLocalStreams(),this.stopPreviewStream(),this.stopLocalStreamClone(),this.cachedMediaConstraints.audio.deviceId=null,this.cachedMediaConstraints.video.deviceId=null}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){var r;void 0===(r=function(e){var t=n(2),r=n(1),i=n(3),o=n(7),a=n(8),s=t.Class({STATIC:{SUPPORTED_METHODS:r.values(o.METHODS),ERROR:a.SIGNALING_ERRORS},constructor:function(e){r.bindAll(this),this.callbacks=e.callbacks},getMessgeType:function(e){return r.isUndefined(e.id)?"notification":r.isEmpty(e.error)?r.isEmpty(e.result)?r.isEmpty(e.params)?(i.error("Message passed is in invalid format. Supported message types are: request, response, error, notification"),"invalid"):"request":"response":"error"},parseIncomingMessage:function(e){var t=this,n=JSON.parse(e);this.validateMessage(n,function(){var e=t.getMessgeType(n);"function"==typeof t.callbacks[e]&&t.callbacks[e].apply(t,[n])},function(e){t.callbacks.invalidMessage.apply(t,[n,e])})},validateMessage:function(e,t,n){var a=o.getCallId();r.isNull(e.call)||r.isUndefined(e.call)?(i.error("Invalid message received from Remote Server, 'call' field not defined in message"),n(s.ERROR.BAD_REQUEST)):e.call!==a?(i.error("Invalid call id, Transaction does not exists"),n(s.ERROR.DOESNOT_EXIST)):r.isUndefined(e.method)||-1!==r.indexOf(s.SUPPORTED_METHODS,e.method)?t():(i.error("Invalid message received from Remote Server, 'method' passed is not supported: "+e.method),n(s.ERROR.METHOD_NOT_IMPLEMENTED))}});return s}.call(t,n,t,e))||(e.exports=r)},function(e,t,n){var r;e.exports=function e(t,n,i){function o(s,c){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!c&&u)return r(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n||e)},l,l.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof r&&r,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,n){var r=e("./url"),i=e("socket.io-parser"),o=e("./manager"),a=e("debug")("socket.io-client");t.exports=n=c;var s=n.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),c=i.source,u=i.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(a("ignoring socket cache for %s",c),n=o(c,t)):(s[u]||(a("new io instance for %s",c),s[u]=o(c,t)),n=s[u]),n.socket(i.path)}n.protocol=i.protocol,n.connect=c,n.Manager=e("./manager"),n.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(e,t,n){e("./url");var r=e("engine.io-client"),i=e("./socket"),o=e("component-emitter"),a=e("socket.io-parser"),s=e("./on"),c=e("component-bind"),u=(e("object-component"),e("debug")("socket.io-client:manager")),l=e("indexof"),f=e("backo2");function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},o(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=s(t,"open",function(){n.onopen(),e&&e()}),o=s(t,"error",function(t){if(u("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;u("connect attempt will timeout after %d",a);var c=setTimeout(function(){u("connect attempt timed out after %d",a),i.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(i),this.subs.push(o),this},d.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",c(this,"ondata"))),this.subs.push(s(this.decoder,"decoded",c(this,"ondecoded"))),this.subs.push(s(e,"error",c(this,"onerror"))),this.subs.push(s(e,"close",c(this,"onclose")))},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},d.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new i(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~l(n.connected,t)||n.connected.push(t)})}return t},d.prototype.destroy=function(e){var t=l(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},d.prototype.packet=function(e){u("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){u("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:[function(e,t,n){t.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},{}],5:[function(e,t,n){var r=e("socket.io-parser"),i=e("component-emitter"),o=e("to-array"),a=e("./on"),s=e("component-bind"),c=e("debug")("socket.io-client:socket"),u=e("has-binary");t.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},f=i.prototype.emit;function d(e,t){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},d.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(l.hasOwnProperty(e))return f.apply(this,arguments),this;var t=o(arguments),n=r.EVENT;u(t)&&(n=r.BINARY_EVENT);var i={type:n,data:t};return"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:r.CONNECT})},d.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){if(e.nsp==this.nsp)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);c("sending ack %j",i);var a=u(i)?r.BINARY_ACK:r.ACK;t.packet({type:a,id:e,data:i})}}},d.prototype.onack=function(e){c("calling ack %s with %j",e.id,e.data);var t=this.acks[e.id];t.apply(this,e.data),delete this.acks[e.id]},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(e,t,n){(function(n){var r=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var o=e,t=t||n.location;return null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),o=r(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/",o.id=o.protocol+"://"+o.host+":"+o.port,o.href=o.protocol+"://"+o.host+(t&&t.port==o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:[function(e,t,n){function r(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(e){this.ms=e},r.prototype.setMax=function(e){this.max=e},r.prototype.setJitter=function(e){this.jitter=e}},{}],8:[function(e,t,n){var r=[].slice;t.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return t.apply(e,n.concat(r.call(arguments)))}}},{}],9:[function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},r.prototype.once=function(e,t){var n=this;function r(){n.off(e,r),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},r.fn=t,this.on(e,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks[e];if(!r)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks[e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],10:[function(e,t,n){function r(e){return r.enabled(e)?function(t){var n;t=(n=t)instanceof Error?n.stack||n.message:n;var i=new Date,o=i-(r[e]||i);r[e]=i,t=e+" "+t+" +"+r.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}t.exports=r,r.names=[],r.skips=[],r.enable=function(e){try{localStorage.debug=e}catch(e){}for(var t=(e||"").split(/[\s,]+/),n=t.length,i=0;i<n;i++)"-"===(e=t[i].replace("*",".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$"))},r.disable=function(){r.enable("")},r.humanize=function(e){return e>=36e5?(e/36e5).toFixed(1)+"h":e>=6e4?(e/6e4).toFixed(1)+"m":e>=1e3?(e/1e3|0)+"s":e+"ms"},r.enabled=function(e){for(var t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(var t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1};try{window.localStorage&&r.enable(localStorage.debug)}catch(e){}},{}],11:[function(e,t,n){t.exports=e("./lib/")},{"./lib/":12}],12:[function(e,t,n){t.exports=e("./socket"),t.exports.parser=e("engine.io-parser")},{"./socket":13,"engine.io-parser":25}],13:[function(e,t,n){(function(n){var r=e("./transports"),i=e("component-emitter"),o=e("debug")("engine.io-client:socket"),a=e("indexof"),s=e("engine.io-parser"),c=e("parseuri"),u=e("parsejson"),l=e("parseqs");function f(e,t){if(!(this instanceof f))return new f(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=c(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:n.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length?t.port=r.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(n.location?location.hostname:"localhost"),this.port=t.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}t.exports=f,f.priorWebsocketSuccess=!1,i(f.prototype),f.protocol=s.protocol,f.Socket=f,f.Transport=e("./transport"),f.transports=e("./transports"),f.parser=e("engine.io-parser"),f.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=s.protocol,t.transport=e,this.id&&(t.sid=this.id);var n=new r[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return n},f.prototype.open=function(){var e;if(this.rememberUpgrade&&f.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},f.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},f.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",function(i){if(!n)if("pong"==i.type&&"probe"==i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;f.priorWebsocketSuccess="websocket"==t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause(function(){n||"closed"!=r.readyState&&(o("changing transport and sending upgrade packet"),d(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())})}else{o('probe transport "%s" failed',e);var a=new Error("probe error");a.transport=t.name,r.emit("upgradeError",a)}}))}function a(){n||(n=!0,d(),t.close(),t=null)}function s(n){var i=new Error("probe error: "+n);i.transport=t.name,a(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){s("transport closed")}function u(){s("socket closed")}function l(e){t&&e.name!=t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),a())}function d(){t.removeListener("open",i),t.removeListener("error",s),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",l)}f.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",s),t.once("close",c),this.once("close",u),this.once("upgrading",l),t.open()},f.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",f.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},f.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(u(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},f.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},f.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},f.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},f.prototype.ping=function(){this.sendPacket("ping")},f.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},f.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},f.prototype.write=f.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},f.prototype.sendPacket=function(e,t,n){if("closing"!=this.readyState&&"closed"!=this.readyState){var r={type:e,data:t};this.emit("packetCreate",r),this.writeBuffer.push(r),this.callbackBuffer.push(n),this.flush()}},f.prototype.close=function(){if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var e=this;function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},f.prototype.onError=function(e){o("socket error %j",e),f.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},f.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){o('socket close with reason: "%s"',e);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){n.writeBuffer=[],n.callbackBuffer=[],n.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},f.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~a(this.transports,e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:[function(e,t,n){var r=e("engine.io-parser"),i=e("component-emitter");function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized}t.exports=o,i(o.prototype),o.timestamps=0,o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!=this.readyState&&""!=this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!=this.readyState&&"open"!=this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!=this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],15:[function(e,t,n){(function(t){var r=e("xmlhttprequest"),i=e("./polling-xhr"),o=e("./polling-jsonp"),a=e("./websocket");n.polling=function(e){var n=!1,a=!1,s=!1!==e.jsonp;if(t.location){var c="https:"==location.protocol,u=location.port;u||(u=c?443:80),n=e.hostname!=location.hostname||u!=e.port,a=e.secure!=c}if(e.xdomain=n,e.xscheme=a,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},n.websocket=a}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,n){(function(n){var r=e("./polling"),i=e("component-inherit");t.exports=u;var o,a=/\n/g,s=/\\n/g;function c(){}function u(e){r.call(this,e),this.query=this.query||{},o||(n.___eio||(n.___eio=[]),o=n.___eio),this.index=o.length;var t=this;o.push(function(e){t.onData(e)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=c)},!1)}i(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},u.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),c=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=c,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(s,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==n.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:[function(e,t,n){(function(n){var r=e("xmlhttprequest"),i=e("./polling"),o=e("component-emitter"),a=e("component-inherit"),s=e("debug")("engine.io-client:polling-xhr");function c(){}function u(e){if(i.call(this,e),n.location){var t="https:"==location.protocol,r=location.port;r||(r=t?443:80),this.xd=e.hostname!=n.location.hostname||r!=e.port,this.xs=e.secure!=t}}function l(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!=e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.create()}function f(){for(var e in l.requests)l.requests.hasOwnProperty(e)&&l.requests[e].abort()}t.exports=u,t.exports.Request=l,a(u,i),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,new l(e)},u.prototype.doWrite=function(e,t){var n="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=r},u.prototype.doPoll=function(){s("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},o(l.prototype),l.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),i=this;try{if(s("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async),this.supportsBinary&&(t.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}"withCredentials"in t&&(t.withCredentials=!0),this.hasXDR()?(t.onload=function(){i.onLoad()},t.onerror=function(){i.onError(t.responseText)}):t.onreadystatechange=function(){4==t.readyState&&(200==t.status||1223==t.status?i.onLoad():setTimeout(function(){i.onError(t.status)},0))},s("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout(function(){i.onError(e)},0)}n.document&&(this.index=l.requestsCount++,l.requests[this.index]=this)},l.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},l.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},l.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},l.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=c:this.xhr.onreadystatechange=c,e)try{this.xhr.abort()}catch(e){}n.document&&delete l.requests[this.index],this.xhr=null}},l.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(e){}e="application/octet-stream"===t?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},l.prototype.hasXDR=function(){return void 0!==n.XDomainRequest&&!this.xs&&this.enablesXDR},l.prototype.abort=function(){this.cleanup()},n.document&&(l.requestsCount=0,l.requests={},n.attachEvent?n.attachEvent("onunload",f):n.addEventListener&&n.addEventListener("beforeunload",f,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,n){var r=e("../transport"),i=e("parseqs"),o=e("engine.io-parser"),a=e("component-inherit"),s=e("debug")("engine.io-client:polling");t.exports=u;var c=null!=new(e("xmlhttprequest"))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;c&&!t||(this.supportsBinary=!1),r.call(this,e)}a(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function n(){s("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(s("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){s("pre-pause polling complete"),--r||n()})),this.writable||(s("we are currently writing - waiting to pause"),r++,this.once("drain",function(){s("pre-pause writing complete"),--r||n()}))}else n()},u.prototype.poll=function(){s("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;s("polling got data %s",e),o.decodePayload(e,this.socket.binaryType,function(e,n,r){if("opening"==t.readyState&&t.onOpen(),"close"==e.type)return t.onClose(),!1;t.onPacket(e)}),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():s('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){s("writing close packet"),e.write([{type:"close"}])}"open"==this.readyState?(s("transport open - closing"),t()):(s("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")},t=this;o.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,n)})},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=+new Date+"-"+r.timestamps++),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"==t&&443!=this.port||"http"==t&&80!=this.port)&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(e,t,n){var r=e("../transport"),i=e("engine.io-parser"),o=e("parseqs"),a=e("component-inherit"),s=e("debug")("engine.io-client:websocket"),c=e("ws");function u(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),r.call(this,e)}t.exports=u,a(u,r),u.prototype.name="websocket",u.prototype.supportsBinary=!0,u.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t={agent:this.agent};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,this.ws=new c(e,void 0,t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},u.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(u.prototype.onData=function(e){var t=this;setTimeout(function(){r.prototype.onData.call(t,e)},0)}),u.prototype.write=function(e){var t=this;this.writable=!1;for(var n=0,r=e.length;n<r;n++)i.encodePacket(e[n],this.supportsBinary,function(e){try{t.ws.send(e)}catch(e){s("websocket closed before onclose event")}});setTimeout(function(){t.writable=!0,t.emit("drain")},0)},u.prototype.onClose=function(){r.prototype.onClose.call(this)},u.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"==t&&443!=this.port||"ws"==t&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=+new Date),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+this.hostname+n+this.path+e},u.prototype.check=function(){return!(!c||"__initialize"in c&&this.name===u.prototype.name)}},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:[function(e,t,n){var r=e("has-cors");t.exports=function(e){var t=e.xdomain,n=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(e){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}},{"has-cors":40}],21:[function(e,t,n){t.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],22:[function(e,t,n){function r(){var e;try{e=localStorage.debug}catch(e){}return e}(n=t.exports=e("./debug")).log=function(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color,i=0,o=0;return(e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1)))[0].replace(/%[a-z%]/g,function(e){"%"!==e&&"%c"===e&&(o=++i)}),e.splice(o,0,r),e},n.save=function(e){try{null==e?localStorage.removeItem("debug"):localStorage.debug=e}catch(e){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(r())},{"./debug":23}],23:[function(e,t,n){(n=t.exports=function(e){function t(){}function o(){var e=o,t=+new Date,a=t-(r||t);e.diff=a,e.prev=r,e.curr=t,r=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=n.colors[i++%n.colors.length]);var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var c=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%"===t)return t;c++;var i=n.formatters[r];if("function"==typeof i){var o=s[c];t=i.call(e,o),s.splice(c,1),c--}return t}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(e,s));var u=o.log||n.log||console.log.bind(console);u.apply(e,s)}t.enabled=!1,o.enabled=!0;var a=n.enabled(e)?o:t;return a.namespace=e,a}).coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){n.enable("")},n.enable=function(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&("-"===(e=t[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0},{ms:24}],24:[function(e,t,n){var r=1e3,i=6e4,o=36e5,a=24*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}t.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"y":return 315576e5*n;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"h":return n*o;case"minutes":case"minute":case"m":return n*i;case"seconds":case"second":case"s":return n*r;case"ms":return n}}}(e):t.long?s(n=e,a,"day")||s(n,o,"hour")||s(n,i,"minute")||s(n,r,"second")||n+" ms":function(e){return e>=a?Math.round(e/a)+"d":e>=o?Math.round(e/o)+"h":e>=i?Math.round(e/i)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e);var n}},{}],25:[function(e,t,n){(function(t){var r=e("./keys"),i=e("has-binary"),o=e("arraybuffer.slice"),a=e("base64-arraybuffer"),s=e("after"),c=e("utf8"),u=navigator.userAgent.match(/Android/i),l=/PhantomJS/i.test(navigator.userAgent),f=u||l;n.protocol=3;var d=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=r(d),h={type:"error",data:"parser error"},g=e("blob");function m(e,t,n){for(var r=new Array(e.length),i=s(e.length,n),o=function(e,n,i){t(n,function(t,n){r[e]=n,i(t,r)})},a=0;a<e.length;a++)o(a,e[a],i)}n.encodePacket=function(e,r,i,o){"function"==typeof r&&(o=r,r=!1),"function"==typeof i&&(o=i,i=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&a instanceof ArrayBuffer)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=d[e.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}(e,r,o);if(g&&a instanceof t.Blob)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);if(f)return function(e,t,r){if(!t)return n.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){e.data=i.result,n.encodePacket(e,t,!0,r)},i.readAsArrayBuffer(e.data)}(e,t,r);var i=new Uint8Array(1);i[0]=d[e.type];var o=new g([i.buffer,e.data]);return r(o)}(e,r,o);if(a&&a.base64)return function(e,t){var r="b"+n.packets[e.type]+e.data.data;return t(r)}(e,o);var s=d[e.type];return void 0!==e.data&&(s+=i?c.encode(String(e.data)):String(e.data)),o(""+s)},n.encodeBase64Packet=function(e,r){var i,o="b"+n.packets[e.type];if(g&&e.data instanceof g){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];r(o+e)},a.readAsDataURL(e.data)}try{i=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),c=new Array(s.length),u=0;u<s.length;u++)c[u]=s[u];i=String.fromCharCode.apply(null,c)}return o+=t.btoa(i),r(o)},n.decodePacket=function(e,t,r){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return n.decodeBase64Packet(e.substr(1),t);if(r)try{e=c.decode(e)}catch(e){return h}var i=e.charAt(0);return Number(i)==i&&p[i]?e.length>1?{type:p[i],data:e.substring(1)}:{type:p[i]}:h}var a=new Uint8Array(e),i=a[0],s=o(e,1);return g&&"blob"===t&&(s=new g([s])),{type:p[i],data:s}},n.decodeBase64Packet=function(e,n){var r=p[e.charAt(0)];if(!t.ArrayBuffer)return{type:r,data:{base64:!0,data:e.substr(1)}};var i=a.decode(e.substr(1));return"blob"===n&&g&&(i=new g([i])),{type:r,data:i}},n.encodePayload=function(e,t,r){"function"==typeof t&&(r=t,t=null);var o=i(e);return t&&o?g&&!f?n.encodePayloadAsBlob(e,r):n.encodePayloadAsArrayBuffer(e,r):e.length?void m(e,function(e,r){n.encodePacket(e,!!o&&t,!0,function(e){r(null,function(e){return e.length+":"+e}(e))})},function(e,t){return r(t.join(""))}):r("0:")},n.decodePayload=function(e,t,r){if("string"!=typeof e)return n.decodePayloadAsBinary(e,t,r);var i;if("function"==typeof t&&(r=t,t=null),""==e)return r(h,0,1);for(var o,a,s="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"!=l)s+=l;else{if(""==s||s!=(o=Number(s)))return r(h,0,1);if(a=e.substr(c+1,o),s!=a.length)return r(h,0,1);if(a.length){if(i=n.decodePacket(a,t,!0),h.type==i.type&&h.data==i.data)return r(h,0,1);var f=r(i,c+o,u);if(!1===f)return}c+=o,s=""}}return""!=s?r(h,0,1):void 0},n.encodePayloadAsArrayBuffer=function(e,t){if(!e.length)return t(new ArrayBuffer(0));m(e,function(e,t){n.encodePacket(e,!0,!0,function(e){return t(null,e)})},function(e,n){var r=n.reduce(function(e,t){var n;return n="string"==typeof t?t.length:t.byteLength,e+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(e){var t="string"==typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),a=0;a<e.length;a++)r[a]=e.charCodeAt(a);n=r.buffer}i[o++]=t?0:1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),t(i.buffer)})},n.encodePayloadAsBlob=function(e,t){m(e,function(e,t){n.encodePacket(e,!0,!0,function(e){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,n[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,g){var c=new g([n.buffer,s.buffer,e]);t(null,c)}})},function(e,n){return t(new g(n))})},n.decodePayloadAsBinary=function(e,t,r){"function"==typeof t&&(r=t,t=null);for(var i=e,a=[],s=!1;i.byteLength>0;){for(var c=new Uint8Array(i),u=0===c[0],l="",f=1;255!=c[f];f++){if(l.length>310){s=!0;break}l+=c[f]}if(s)return r(h,0,1);i=o(i,2+l.length),l=parseInt(l);var d=o(i,0,l);if(u)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);d="";for(var f=0;f<p.length;f++)d+=String.fromCharCode(p[f])}a.push(d),i=o(i,l)}var g=a.length;a.forEach(function(e,i){r(n.decodePacket(e,t,!0),i,g)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:[function(e,t,n){t.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},{}],27:[function(e,t,n){function r(){}t.exports=function(e,t,n){var i=!1;return n=n||r,o.count=e,0===e?t():o;function o(e,r){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=n):0!==o.count||i||t(null,r)}}},{}],28:[function(e,t,n){t.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),a=t,s=0;a<n;a++,s++)o[s]=i[a];return o.buffer}},{}],29:[function(e,t,n){!function(e){"use strict";n.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3==2?o=o.substring(0,o.length-1)+"=":i%3==1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(t){var n,r,i,o,a,s=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),f=new Uint8Array(l);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),a=e.indexOf(t[n+3]),f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&a;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],30:[function(e,t,n){(function(e){var n=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,r=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(e){return!1}}(),i=n&&n.prototype.append&&n.prototype.getBlob;t.exports=r?e.Blob:i?function(e,t){t=t||{};for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return t.type?r.getBlob(t.type):r.getBlob()}:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:[function(e,t,n){(function(n){var r=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(e(t[i]))return!0}else if(t&&"object"==typeof t)for(var o in t.toJSON&&(t=t.toJSON()),t)if(t.hasOwnProperty(o)&&e(t[o]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:32}],32:[function(e,t,n){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],33:[function(e,t,n){(function(e){!function(r){var i="object"==typeof n&&n,o="object"==typeof t&&t&&t.exports==i&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a||(r=a);var s,c,u,l=String.fromCharCode;function f(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function d(e,t){return l(e>>t&63|128)}function p(e){if(0==(4294967168&e))return l(e);var t="";return 0==(4294965248&e)?t=l(e>>6&31|192):0==(4294901760&e)?(t=l(e>>12&15|224),t+=d(e,6)):0==(4292870144&e)&&(t=l(e>>18&7|240),t+=d(e,12),t+=d(e,6)),t+=l(63&e|128)}function h(){if(u>=c)throw Error("Invalid byte index");var e=255&s[u];if(u++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function g(){var e,t,n,r;if(u>c)throw Error("Invalid byte index");if(u==c)return!1;if(e=255&s[u],u++,0==(128&e))return e;if(192==(224&e)){var i=h();if((r=(31&e)<<6|i)>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if(i=h(),t=h(),(r=(15&e)<<12|i<<6|t)>=2048)return r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=h(),t=h(),n=h(),(r=(15&e)<<18|i<<12|t<<6|n)>=65536&&r<=1114111))return r;throw Error("Invalid UTF-8 detected")}var m={version:"2.0.0",encode:function(e){for(var t,n=f(e),r=n.length,i=-1,o="";++i<r;)t=n[i],o+=p(t);return o},decode:function(e){s=f(e),c=s.length,u=0;for(var t,n=[];!1!==(t=g());)n.push(t);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=l((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=l(t);return i}(n)}};if(i&&!i.nodeType)if(o)o.exports=m;else{var v={}.hasOwnProperty;for(var y in m)v.call(m,y)&&(i[y]=m[y])}else r.utf8=m}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(e,t,n){(function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(e,t,n){n.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},n.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},{}],36:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){var t=e,n=e.indexOf("["),o=e.indexOf("]");-1!=n&&-1!=o&&(e=e.substring(0,n)+e.substring(n,o).replace(/:/g,";")+e.substring(o,e.length));for(var a=r.exec(e||""),s={},c=14;c--;)s[i[c]]=a[c]||"";return-1!=n&&-1!=o&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],37:[function(e,t,n){var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;function o(e,t,n){return t?new i(e,t):new i(e)}t.exports=i?o:null,i&&(o.prototype=i.prototype)},{}],38:[function(e,t,n){(function(n){var r=e("isarray");t.exports=function(e){return function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(r(t)){for(var i=0;i<t.length;i++)if(e(t[i]))return!0}else if(t&&"object"==typeof t)for(var o in t.toJSON&&(t=t.toJSON()),t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0;return!1}(e)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],39:[function(e,t,n){t.exports=e(32)},{}],40:[function(e,t,n){var r=e("global");try{t.exports="XMLHttpRequest"in r&&"withCredentials"in new r.XMLHttpRequest}catch(e){t.exports=!1}},{global:41}],41:[function(e,t,n){t.exports=function(){return this}()},{}],42:[function(e,t,n){var r=[].indexOf;t.exports=function(e,t){if(r)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},{}],43:[function(e,t,n){var r=Object.prototype.hasOwnProperty;n.keys=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},n.values=function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(e[n]);return t},n.merge=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},n.length=function(e){return n.keys(e).length},n.isEmpty=function(e){return 0==n.length(e)}},{}],44:[function(e,t,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(e){for(var t=r.exec(e||""),n={},o=14;o--;)n[i[o]]=t[o]||"";return n}},{}],45:[function(e,t,n){(function(t){var r=e("isarray"),i=e("./is-buffer");n.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=function e(n){if(!n)return n;if(i(n)){var o={_placeholder:!0,num:t.length};return t.push(n),o}if(r(n)){for(var a=new Array(n.length),s=0;s<n.length;s++)a[s]=e(n[s]);return a}if("object"==typeof n&&!(n instanceof Date)){var a={};for(var c in n)a[c]=e(n[c]);return a}return n}(n),o.attachments=t.length,{packet:o,buffers:t}},n.reconstructPacket=function(e,t){return e.data=function e(n){if(n&&n._placeholder){var i=t[n.num];return i}if(r(n)){for(var o=0;o<n.length;o++)n[o]=e(n[o]);return n}if(n&&"object"==typeof n){for(var a in n)n[a]=e(n[a]);return n}return n}(e.data),e.attachments=void 0,e},n.removeBlobs=function(e,n){var o=0,a=e;!function e(s,c,u){if(!s)return s;if(t.Blob&&s instanceof Blob||t.File&&s instanceof File){o++;var l=new FileReader;l.onload=function(){u?u[c]=this.result:a=this.result,--o||n(a)},l.readAsArrayBuffer(s)}else if(r(s))for(var f=0;f<s.length;f++)e(s[f],f,s);else if(s&&"object"==typeof s&&!i(s))for(var d in s)e(s[d],d,s)}(a),o||n(a)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(e,t,n){var r=e("debug")("socket.io-parser"),i=e("json3"),o=(e("isarray"),e("component-emitter")),a=e("./binary"),s=e("./is-buffer");function c(){}function u(e){var t="",o=!1;return t+=e.type,n.BINARY_EVENT!=e.type&&n.BINARY_ACK!=e.type||(t+=e.attachments,t+="-"),e.nsp&&"/"!=e.nsp&&(o=!0,t+=e.nsp),null!=e.id&&(o&&(t+=",",o=!1),t+=e.id),null!=e.data&&(o&&(t+=","),t+=i.stringify(e.data)),r("encoded %j as %s",e,t),t}function l(){this.reconstructor=null}function f(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:n.ERROR,data:"parser error"}}n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=c,n.Decoder=l,c.prototype.encode=function(e,t){if(r("encoding packet %j",e),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type)!function(e,t){a.removeBlobs(e,function(e){var n=a.deconstructPacket(e),r=u(n.packet),i=n.buffers;i.unshift(r),t(i)})}(e,t);else{var i=u(e);t([i])}},o(l.prototype),l.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t={},o=0;if(t.type=Number(e.charAt(0)),null==n.types[t.type])return d();if(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type){for(var a="";"-"!=e.charAt(++o)&&(a+=e.charAt(o),o!=e.length););if(a!=Number(a)||"-"!=e.charAt(o))throw new Error("Illegal attachments");t.attachments=Number(a)}if("/"==e.charAt(o+1))for(t.nsp="";++o;){var s=e.charAt(o);if(","==s)break;if(t.nsp+=s,o==e.length)break}else t.nsp="/";var c=e.charAt(o+1);if(""!==c&&Number(c)==c){for(t.id="";++o;){var s=e.charAt(o);if(null==s||Number(s)!=s){--o;break}if(t.id+=e.charAt(o),o==e.length)break}t.id=Number(t.id)}if(e.charAt(++o))try{t.data=i.parse(e.substr(o))}catch(e){return d()}return r("decoded %s as %j",e,t),t}(e),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type?(this.reconstructor=new f(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},l.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length==this.reconPack.attachments){var t=a.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:[function(e,t,n){(function(e){t.exports=function(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){t.exports=e(32)},{}],49:[function(e,t,n){!function(e){var t,r,i,o={}.toString,a="object"==typeof JSON&&JSON,s="object"==typeof n&&n&&!n.nodeType&&n;s&&a?(s.stringify=a.stringify,s.parse=a.parse):s=e.JSON=a||{};var c=new Date(-0xc782b5b800cec);try{c=-109252==c.getUTCFullYear()&&0===c.getUTCMonth()&&1===c.getUTCDate()&&10==c.getUTCHours()&&37==c.getUTCMinutes()&&6==c.getUTCSeconds()&&708==c.getUTCMilliseconds()}catch(e){}function u(e){if(u[e]!==i)return u[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=u("json-stringify")&&u("json-parse");else{var n,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var a=s.stringify,l="function"==typeof a&&c;if(l){(n=function(){return 1}).toJSON=n;try{l="0"===a(0)&&"0"===a(new Number)&&'""'==a(new String)&&a(o)===i&&a(i)===i&&a()===i&&"1"===a(n)&&"[1]"==a([n])&&"[null]"==a([i])&&"null"==a(null)&&"[null,null,null]"==a([i,o,null])&&a({a:[n,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===a(null,n)&&"[\n 1,\n 2\n]"==a([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==a(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==a(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==a(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==a(new Date(-1))}catch(e){l=!1}}t=l}if("json-parse"==e){var f=s.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){var d=5==(n=f(r)).a.length&&1===n.a[0];if(d){try{d=!f('"\t"')}catch(e){}if(d)try{d=1!==f("01")}catch(e){}if(d)try{d=1!==f("1.")}catch(e){}}}}catch(e){d=!1}t=d}}return u[e]=!!t}if(!u("json")){var l=u("bug-string-char-index");if(!c)var f=Math.floor,d=[0,31,59,90,120,151,181,212,243,273,304,334],p=function(e,t){return d[t]+365*(e-1970)+f((e-1969+(t=+(t>1)))/4)-f((e-1901+t)/100)+f((e-1601+t)/400)};(t={}.hasOwnProperty)||(t=function(e){var n,r={};return(r.__proto__=null,r.__proto__={toString:1},r).toString!=o?t=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(n=r.constructor,t=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),r=null,t.call(this,e)});var h={boolean:1,number:1,string:1,undefined:1};if(r=function(e,n){var i,a,s,c=0;for(s in(i=function(){this.valueOf=0}).prototype.valueOf=0,a=new i)t.call(a,s)&&c++;return i=a=null,c?r=2==c?function(e,n){var r,i={},a="[object Function]"==o.call(e);for(r in e)a&&"prototype"==r||t.call(i,r)||!(i[r]=1)||!t.call(e,r)||n(r)}:function(e,n){var r,i,a="[object Function]"==o.call(e);for(r in e)a&&"prototype"==r||!t.call(e,r)||(i="constructor"===r)||n(r);(i||t.call(e,r="constructor"))&&n(r)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],r=function(e,n){var r,i,s="[object Function]"==o.call(e),c=!s&&"function"!=typeof e.constructor&&function(e,t){var n=typeof e[t];return"object"==n?!!e[t]:!h[n]}(e,"hasOwnProperty")?e.hasOwnProperty:t;for(r in e)s&&"prototype"==r||!c.call(e,r)||n(r);for(i=a.length;r=a[--i];c.call(e,r)&&n(r));}),r(e,n)},!u("json-stringify")){var g={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},m=function(e,t){return("000000"+(t||0)).slice(-e)},v=function(e){var t,n='"',r=0,i=e.length,o=i>10&&l;for(o&&(t=e.split(""));r<i;r++){var a=e.charCodeAt(r);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=g[a];break;default:if(a<32){n+="\\u00"+m(2,a.toString(16));break}n+=o?t[r]:l?e.charAt(r):e[r]}}return n+'"'},y=function(e,n,a,s,c,u,l){var d,h,g,b,_,S,C,w,T,E,x,k,A,R,I,M;try{d=n[e]}catch(e){}if("object"==typeof d&&d)if("[object Date]"!=(h=o.call(d))||t.call(d,"toJSON"))"function"==typeof d.toJSON&&("[object Number]"!=h&&"[object String]"!=h&&"[object Array]"!=h||t.call(d,"toJSON"))&&(d=d.toJSON(e));else if(d>-1/0&&d<1/0){if(p){for(_=f(d/864e5),g=f(_/365.2425)+1970-1;p(g+1,0)<=_;g++);for(b=f((_-p(g,0))/30.42);p(g,b+1)<=_;b++);_=1+_-p(g,b),C=f((S=(d%864e5+864e5)%864e5)/36e5)%24,w=f(S/6e4)%60,T=f(S/1e3)%60,E=S%1e3}else g=d.getUTCFullYear(),b=d.getUTCMonth(),_=d.getUTCDate(),C=d.getUTCHours(),w=d.getUTCMinutes(),T=d.getUTCSeconds(),E=d.getUTCMilliseconds();d=(g<=0||g>=1e4?(g<0?"-":"+")+m(6,g<0?-g:g):m(4,g))+"-"+m(2,b+1)+"-"+m(2,_)+"T"+m(2,C)+":"+m(2,w)+":"+m(2,T)+"."+m(3,E)+"Z"}else d=null;if(a&&(d=a.call(n,e,d)),null===d)return"null";if("[object Boolean]"==(h=o.call(d)))return""+d;if("[object Number]"==h)return d>-1/0&&d<1/0?""+d:"null";if("[object String]"==h)return v(""+d);if("object"==typeof d){for(R=l.length;R--;)if(l[R]===d)throw TypeError();if(l.push(d),x=[],I=u,u+=c,"[object Array]"==h){for(A=0,R=d.length;A<R;A++)k=y(A,d,a,s,c,u,l),x.push(k===i?"null":k);M=x.length?c?"[\n"+u+x.join(",\n"+u)+"\n"+I+"]":"["+x.join(",")+"]":"[]"}else r(s||d,function(e){var t=y(e,d,a,s,c,u,l);t!==i&&x.push(v(e)+":"+(c?" ":"")+t)}),M=x.length?c?"{\n"+u+x.join(",\n"+u)+"\n"+I+"}":"{"+x.join(",")+"}":"{}";return l.pop(),M}};s.stringify=function(e,t,n){var r,i,a,s;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==(s=o.call(t)))i=t;else if("[object Array]"==s){a={};for(var c,u=0,l=t.length;u<l;c=t[u++],("[object String]"==(s=o.call(c))||"[object Number]"==s)&&(a[c]=1));}if(n)if("[object Number]"==(s=o.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==s&&(r=n.length<=10?n:n.slice(0,10));return y("",((c={})[""]=e,c),i,a,r,"",[])}}if(!u("json-parse")){var b,_,S=String.fromCharCode,C={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},w=function(){throw b=_=null,SyntaxError()},T=function(){for(var e,t,n,r,i,o=_,a=o.length;b<a;)switch(i=o.charCodeAt(b)){case 9:case 10:case 13:case 32:b++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=l?o.charAt(b):o[b],b++,e;case 34:for(e="@",b++;b<a;)if((i=o.charCodeAt(b))<32)w();else if(92==i)switch(i=o.charCodeAt(++b)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=C[i],b++;break;case 117:for(t=++b,n=b+4;b<n;b++)(i=o.charCodeAt(b))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||w();e+=S("0x"+o.slice(t,b));break;default:w()}else{if(34==i)break;for(i=o.charCodeAt(b),t=b;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++b);e+=o.slice(t,b)}if(34==o.charCodeAt(b))return b++,e;w();default:if(t=b,45==i&&(r=!0,i=o.charCodeAt(++b)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(b+1))>=48&&i<=57&&w(),r=!1;b<a&&(i=o.charCodeAt(b))>=48&&i<=57;b++);if(46==o.charCodeAt(b)){for(n=++b;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==b&&w(),b=n}if(101==(i=o.charCodeAt(b))||69==i){for(43!=(i=o.charCodeAt(++b))&&45!=i||b++,n=b;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==b&&w(),b=n}return+o.slice(t,b)}if(r&&w(),"true"==o.slice(b,b+4))return b+=4,!0;if("false"==o.slice(b,b+5))return b+=5,!1;if("null"==o.slice(b,b+4))return b+=4,null;w()}return"$"},E=function(e){var t,n;if("$"==e&&w(),"string"==typeof e){if("@"==(l?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];"]"!=(e=T());n||(n=!0))n&&(","==e?"]"==(e=T())&&w():w()),","==e&&w(),t.push(E(e));return t}if("{"==e){for(t={};"}"!=(e=T());n||(n=!0))n&&(","==e?"}"==(e=T())&&w():w()),","!=e&&"string"==typeof e&&"@"==(l?e.charAt(0):e[0])&&":"==T()||w(),t[e.slice(1)]=E(T());return t}w()}return e},x=function(e,t,n){var r=k(e,t,n);r===i?delete e[t]:e[t]=r},k=function(e,t,n){var i,a=e[t];if("object"==typeof a&&a)if("[object Array]"==o.call(a))for(i=a.length;i--;)x(a,i,n);else r(a,function(e){x(a,e,n)});return n.call(e,t,a)};s.parse=function(e,t){var n,r;return b=0,_=""+e,n=E(T()),"$"!=T()&&w(),b=_=null,t&&"[object Function]"==o.call(t)?k(((r={})[""]=n,r),"",t):n}}}}(this)},{}],50:[function(e,t,n){t.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},{}]},{},[1])(1)},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(4),r=n(2),i=n(1),o=n(0),a=n(3),s=n(5),c=n(7),u=(n(11),n(13)),l=n(65),f=n(53),d=n(12),p=n(10),h=n(6),g=n(40),m=n(22),v=n(8),y=n(39),b=o.Model.extend({defaults:{localVideoStream:null,localAudioStream:null,previewStream:null,remoteStream:null,localContentStream:null,remoteContentStream:null,connectionState:"",callState:"",disconnectCode:"",localAudioMuted:null,localVideoMuted:null,remoteAudioMuted:!1,remoteVideoMuted:!1,isSpeaking:!1,volumeLevel:0,devices:{available:{audioIn:[],videoIn:[]},selected:{audioIn:null,videoIn:null}},presentationToken:null,presentationState:null,isWSConnected:!1,isIceRestarted:!1,capabilities:{}}}),_=o.Model.extend({defaults:{wsConnectionState:"closed",wsSocketId:"",isIceRestarted:!1,dtlsCertificate:null}});return r.Class({config:{},resendMute:!1,constructor:function(e){i.bindAll(this),i.extend(this.config,e),i.extend(this,o.Events),"firefox"===s.browser&&(this.isFirefox=!0),this.model=new b,this.internalModel=new _,this.BJ_CALLSTATES=h.BJ_CALLSTATES,this.TOKEN_STATUS=c.TOKEN_STATUS,this.EXTENSION_STATES=h.EXTENSION_STATES,this.WS_STATES=h.WS_STATES,this.localMediaManager=new l(this.config.localMediaParams),this.peerConnectionManager=new f({peerConfig:this.config.peerConfig,meetingParams:e.meetingParams}),this.localMediaManager.model.on("change:localAudioStream",this.onLocalAudioStreamChange),this.localMediaManager.model.on("change:localVideoStream",this.onLocalVideoStreamChange),this.localMediaManager.model.on("change:previewStream",this.onPreviewStreamChange),this.localMediaManager.model.on("change:remoteAudioMuted",this.onRemoteAudioMuteChange),this.localMediaManager.model.on("change:remoteVideoMuted",this.onRemoteVideoMuteChange),this.localMediaManager.model.on("change:isSpeaking",this.isSpeaking),this.localMediaManager.model.on("change:volumeLevel",this.updateVolumeLevel),this.localMediaManager.on("localStreamsChanged",this.onLocalStreamsChanged),d.on("retransmitRequest",this.onRetransmitRequest),d.on("receivedConnectResponse",this.onReceiveConnectResponse),d.on("requestTimeout",this.onRequestTimeout),d.on("closeSocketConnection",this.closeSocket),p.model.on("change:disconnectCode",this.onDisconnectCodeChange),p.model.on("change:currentState",this.onCallStateChange),u.on("wsConnectionStateChange",this.wsConnectionStateChange),m.setParams({extensionId:this.config.extensionId,features:this.config.features}),m.model.on("change:presentationToken",this.onReceivePresentationToken),m.model.on("change:localContentStream",this.onLocalContentStreamChanged),m.model.on("change:tokenStatus",this.onPresentationTokenStatusChanged),m.model.on("change:extensionStatus",this.onExtensionStatusChanged),m.model.on("change:firefoxScreenShareCancelled",this.triggerFirefoxScreenShareCancelled)},getLocalMedia:function(e,n){var r=t.defer();return this.localMediaManager.startMedia(e,n).then(function(e){return r.resolve(e)},function(e){return a.warn("RTCController: Could not get access to user's media devices"),r.reject(e)}),r.promise},getLocalDevices:function(){var e=this,n=t.defer();return this.localMediaManager.getDevices().then(function(t){var r=e.model.get("devices");r.available=t.available,r.selected=t.selected,e.model.set("devices",r),n.resolve(r)},function(e){n.reject(e)}),n.promise},getCameraStatus:function(e){return this.localMediaManager.detectCameraStatus(e)},getCapabilities:function(){return y.detectCapabilities().then(i.bind(function(){this.model.set("capabilities",y.model.attributes)},this),function(){a.error("RTCController: failed to get RTC capabilities")})},setSpeaker:function(e){this.localMediaManager.setSpeaker(e)},renderSelfView:function(e){return this.localMediaManager.renderSelfView(e)},renderStream:function(e){return this.localMediaManager.renderStream(e)},stopLocalMedia:function(e){this.localMediaManager.stopMedia(e)},createPeerConnection:function(e){this.peerConnectionManager.createPeer(e),this.peerConnectionManager.peer.model.on("change:remoteStream",this.onRemoteStreamChanged),this.peerConnectionManager.peer.model.on("change:remoteContentStream",this.onRemoteContentStreamChanged),this.peerConnectionManager.peer.on("iceConnectionClosed",this.onIceConnectivityClosed),this.peerConnectionManager.peer.on("restartICE",this.restartMediaChannel),this.peerConnectionManager.peer.on("iceConnectivityTimeout",this.onIceConnectivityTimeout),this.peerConnectionManager.peer.callStatsModel.on("change",function(e){this.model.set(e.attributes)},this)},onCallStateChange:function(e){var t=e.get("currentState");this.model.set("callState",t),d.updateCallState(t),this.reactToCallStateChange()},reactToCallStateChange:function(){switch(this.model.get("callState")){case this.BJ_CALLSTATES.CONNECTED:this.model.set("isIceRestarted",!1);break;case this.BJ_CALLSTATES.DISCONNECTED:this.reset(),this.sendDisconnectMessage(p.getDisconnectReason())}},onDisconnectCodeChange:function(){this.model.set("disconnectCode",p.model.get("disconnectCode"))},initializePeerConnection:function(e,t){void 0!==t&&!0!==t||p.reset(),this.peerConnectionManager.initiateCall(e,!0)},startConnection:function(e){var t=g.v1();u.createSocket(e),this.peerConnectionManager.updateMeetingParams(e),c.setCallid(t)},generateDtlsRsaCertificate:function(){var e,n=t.defer(),r=this;return webkitRTCPeerConnection.generateCertificate?(e=r.internalModel.get("dtlsCertificate"))?n.resolve(e):webkitRTCPeerConnection.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).then(function(e){a.debug("RTCController :: Successfully created DTLS RSA certificate"),r.internalModel.set("dtlsCertificate",e),n.resolve(e)},function(e){n.reject(e)}):n.resolve(),n.promise},makeCall:function(e,t){var n=this;d.reset(),p.reset(),this.closeSocket(),this.isFirefox?(n.startConnection(t),n.createPeerConnection(e)):this.generateDtlsRsaCertificate().then(function(r){r&&(e.peerConfig.peerConnectionConfig.certificates=[r]),n.startConnection(t),n.createPeerConnection(e)},function(e){a.error("RTCController :: Failed to start call, Error :"+e)})},joinMeeting:function(){var e=this.model.get("callState");if(e!==this.BJ_CALLSTATES.CONNECTING&&e!==this.BJ_CALLSTATES.RECONNECTING)throw a.error("RTCController: callState is not in connecting/reconnecting state, cannot proceed with call yet"),"Connection state not ready to call";var t=this.config.peerConfig.receiveMedia;t.iceRestart=!1,this.peerConnectionManager.initiateCall(t,!1)},restartMediaChannel:function(){var e=this.internalModel.get("wsConnectionState");if(e!==this.WS_STATES.CONNECTED&&e!==this.WS_STATES.RECONNECTED||!1!==this.model.get("isIceRestarted"))a.debug("RTCController : Failed to restart media channel, Signalling channel is disconnected or media restart is already in progress.");else{a.debug("Re-starting the media channel - ICE Restart, get new local SDP");var t=this.config.peerConfig.receiveMedia;t.iceRestart=!0,this.initializePeerConnection(t,!1),this.model.set("isIceRestarted",!0)}},onRetransmitRequest:function(e){u.sendMsg(e)},onLocalAudioStreamChange:function(e){this.model.set("localAudioStream",e.get("localAudioStream"))},onLocalVideoStreamChange:function(e){this.model.set("localVideoStream",e.get("localVideoStream"))},onPreviewStreamChange:function(e){this.model.set("previewStream",e.get("previewStream"))},onRemoteStreamChanged:function(e){this.model.set("remoteStream",e.get("remoteStream")),this.localMediaManager.updateStream({remoteStream:e.get("remoteStream")})},onRemoteContentStreamChanged:function(e){this.model.set("remoteContentStream",e.get("remoteContentStream"))},onReceivePresentationToken:function(e){this.model.set("presentationToken",e.get("presentationToken"))},_applyCachedMuteStates:function(){a.info("RTCController: Applying cached mute states"),this.muteStreams({resendMuteMsg:!0,localAudio:this.localMediaManager.model.get("localAudioMuted"),localVideo:this.localMediaManager.model.get("localVideoMuted"),remoteAudio:this.localMediaManager.model.get("remoteAudioMuted"),remoteVideo:this.localMediaManager.model.get("remoteVideoMuted")})},muteStreams:function(e){var t=this,n=d.model.get("connectResponseReceived"),r=(i.isBoolean(e.localAudio)&&(e.localAudio,this.model.get("localAudioMuted")),i.isBoolean(e.localVideo)&&e.localVideo!==this.model.get("localVideoMuted"));this.peerConnectionManager&&this.peerConnectionManager.peer&&(i.isUndefined(e.remoteAudio)||i.isUndefined(e.remoteVideo)||(this.peerConnectionManager.peer.isRemoteMute=e.remoteAudio&&e.remoteVideo)),this.localMediaManager.muteStreams(e).then(function(){if(!e.localMuteOnly&&n){r&&!1===e.localVideo&&t.onLocalStreamsChanged();var i=e.localAudio,o=e.localVideo,a=e.remoteAudio,s=e.remoteVideo,l=c.getMuteMessage({audio:i?"muted":"unmuted",video:o?"muted":"unmuted",remoteAudio:a?"muted":"unmuted",remoteVideo:s?"muted":"unmuted"});u.sendMsg(l)?(d.onBlueJayRequest(l),t.resendMute=!1):t.resendMute=!0,t.model.set({localAudioMuted:i,localVideoMuted:o})}},function(){a.error("RTCController: Failed to Mute streams")})},onRemoteAudioMuteChange:function(e){this.model.set("remoteAudioMuted",e.get("remoteAudioMuted"))},onRemoteVideoMuteChange:function(e){this.model.set("remoteVideoMuted",e.get("remoteVideoMuted"))},updateLocalStream:function(e){return this.peerConnectionManager.updatePeerStream(e)},startVolumeMonitoring:function(e,t){null==this.localMediaManager.volumeMoniter?this.localMediaManager.startVolumeMonitor(e,t):a.debug("Already monitering volume")},stopVolumeMonitoring:function(){this.localMediaManager.stopVolumeMonitor()},isSpeaking:function(e){this.model.set("isSpeaking",e.get("isSpeaking"))},setIsSpeaking:function(e){this.localMediaManager.model.set("isSpeaking",e),e||(this.localMediaManager.vadCount=0)},updateVolumeLevel:function(e){this.model.set("volumeLevel",e.get("volumeLevel"))},onLocalStreamsChanged:function(){var e=this.localMediaManager.model.get("localAudioStream"),t=this.localMediaManager.model.get("localVideoStream");this.model.get("callState"),this.peerConnectionManager.updatePeerStream({newVideoStream:t,newAudioStream:e})},onLocalStreamSuccessCB:function(e){var t=this,n=null,r=null,o=t.model.get("localVideoStream"),a=t.model.get("localAudioStream"),s=this.model.get("callState");i.each(e,function(e,i,o){e.getVideoTracks().length>0?(n=e,t.model.set("localVideoStream",n)):(r=e,t.model.set("localAudioStream",r))}),s===this.BJ_CALLSTATES.CONNECTED&&t.peerConnectionManager.updatePeerStream({currentVideoStream:o,newVideoStream:n,currentAudioStream:a,newAudioStream:r})},onReceiveConnectResponse:function(){this._applyCachedMuteStates(),this.peerConnectionManager.signallingChannelCreated(),this.localMediaManager.sendDeviceInfo()},onCallDisconnected:function(e){p.callDisconnected(e)},onRequestTimeout:function(){p.callDisconnected(v.DISCONNECT_REASONS.REQ_TIMED_OUT)},endCall:function(){this.sendDisconnectMessage(v.DISCONNECT_REASONS.USER_INITIATED),this.localMediaManager.close(),this.reset()},reset:function(){var e=t.defer();return this.peerConnectionManager.close(),m.close(),d.reset(),e.resolve(),e.promise},sendDisconnectMessage:function(e){var t=c.getDisconnectMessage(e);d.onBlueJayRequest(t),u.sendMsg(t)},closeSocket:function(){a.debug("RTCController closing socket"),u.close()},getVersion:function(){return"1.0"},startScreenSharing:function(e){m.startScreenSharing(e)},stopScreenSharing:function(){m.stopScreenSharing()},onLocalContentStreamChanged:function(e){var t=e.get("localContentStream");this.isFirefox?this.peerConnectionManager.updateContentStream(t):t?this.peerConnectionManager.addPeerStream(t):(t=this.model.get("localContentStream"))&&this.peerConnectionManager.removePeerStream(t),this.model.set("localContentStream",e.get("localContentStream"))},onPresentationTokenStatusChanged:function(e){this.model.set("presentationTokenStatus",e.get("tokenStatus"))},triggerFirefoxScreenShareCancelled:function(e){this.model.trigger("change:presentationTokenStatus",this.model)},onExtensionStatusChanged:function(e){this.model.set("extensionStatus",e.get("extensionStatus"))},wsConnectionStateChange:function(e,t){var n=this.internalModel.get("wsConnectionState");switch(this.internalModel.set("wsConnectionState",e),e){case this.WS_STATES.CONNECTED:p.getCurrentCallState()!==this.BJ_CALLSTATES.IDLE&&n===this.WS_STATES.RECONNECTED||this.initializePeerConnection();break;case this.WS_STATES.RECONNECTED:this.internalModel.get("wsSocketId")!==t&&p.getCurrentCallState()===this.BJ_CALLSTATES.RESTART_MEDIA&&this.restartMediaChannel(),this.peerConnectionManager.sendKeepAliveMessage(!0),this.resendMute&&this._applyCachedMuteStates();break;case this.WS_STATES.FAILED:p.callDisconnected(v.DISCONNECT_REASONS.TRANSPORT_FAIL);break;case this.WS_STATES.DISCONNECTED:case this.WS_STATES.CLOSED:}this.internalModel.set("wsSocketId",t)},onIceConnectivityTimeout:function(){p.callDisconnected(v.DISCONNECT_REASONS.TRANSPORT_FAIL)},setPresentationRatio:function(e){m.sendPresentaionRatio(e)},onIceConnectivityClosed:function(){a.debug("RTCController :: Ice connection is closed, ending the call"),p.callDisconnected(v.DISCONNECT_REASONS.USER_INITIATED),this.localMediaManager.close()}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){h(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},d.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(9),n(16))},function(e,t,n){(function(r){var i;void 0===(i=function(e){var t=n(2),r=n(1),i=n(0),o=(n(4),n(68)),a=n(3),s=n(38),c=n(37),u=(n(30),n(5));return t.Class({constructor:function(e){"chrome"===u.browser||"firefox"===u.browser?(r.bindAll(this),r.extend(this,i.Events),this.initialize(e),this.aggregateAPIResponse=null,this.meeting=null,this.reconnectInterval=1e3,this.bjnCloudTimeout=5e3,this.bjnSIPTimeout=3e3,this.bjnWebRTCReconnectTimeout=9e4,this.isVolumeMonitorStarted=!1,this.maxBandwidth=1200,this.config={environment:{hostname:"https://bluejeansdev.com"},meeting:{meetingNumericId:"",attendeePasscode:""},user:{name:"Testclient",leaderId:14659,userToken:"186731bd52f8478090444d7c5862f7bd"},events:["meeting","endpoint"]}):a.error("Browser not supported !!")},initialize:function(e){this.rtcController=new o(e.webrtcParams),this.webrtcParams=e.webrtcParams,this.setupRTCControllerCB(),this.setupRTCControllerListeners(),e.bjnSIPTimeout&&(this.bjnSIPTimeout=e.bjnSIPTimeout),e.bjnWebRTCReconnectTimeout&&(this.bjnWebRTCReconnectTimeout=e.bjnWebRTCReconnectTimeout),e.bjnCloudTimeout&&(this.bjnCloudTimeout=e.bjnCloudTimeout),this.meetingInfo=null,this.localEndPointStateChange=null,this.remoteEndPointStateChange=null,this.remoteStreamChange=null,this.remoteMuteChange=null,this.localVideoStreamChange=null,this.localAudioStreamChange=null,this.error=null,this.fakeStream=null,this.contentStreamChange=null,"firefox"===u.browser&&this.createFakeStream()},setBandwidth:function(e){e>=100&&e<=4096&&(this.maxBandwidth=e)},setupRTCControllerCB:function(){this.getLocalMedia=this.rtcController.getLocalMedia,this.getLocalDevices=this.rtcController.getLocalDevices,this.setSpeaker=this.rtcController.setSpeaker,this.renderSelfView=this.rtcController.renderSelfView,this.renderStream=this.rtcController.renderStream,this.muteStreams=this.rtcController.muteStreams,this.makeCall=this.rtcController.makeCall},setupRTCControllerListeners:function(){this.rtcController.model.on("change:callState",this.onCallStateChange),this.rtcController.model.on("change:localAudioStream",this.onLocalAudioStreamChange),this.rtcController.model.on("change:localVideoStream",this.onLocalVideoStreamChange),this.rtcController.model.on("change:previewStream",this.onPreviewStreamChange),this.rtcController.model.on("change:remoteStream",this.onRemoteStreamChange),this.rtcController.model.on("change:isIceRestarted",this.onIceRestart),this.rtcController.model.on("change:presentationToken",this.onPresentationTokenUpdated.bind(this))},startMeeting:function(e){if(!e.numericMeetingId||!e.displayName)return this.error&&this.error("invalidMeetingParams"),void a.error("Meeting id or display name cannot be empty");this.getPairingCodeAndInitCall(e),this.initBJNCloudConnectionTimer()},WebRTCPairing:function(){var e=this;this.meeting.oauthInfo=this.aggregateAPIResponse.oauthInfo,s.webRTCPairing(e.meeting,function(t,n){t?a.error(t):(e.clearReconnectTimer(),e.clearBJNCloudConnectionTimer(),e.initWebRTCCall(JSON.parse(n)),e.connectEventService(e.aggregateAPIResponse))})},getPairingCodeAndInitCall:function(e){var t=this;this.meetingInfo=e,t.meeting={},t.meeting.meetingNumericId=e.numericMeetingId,e.attendeePasscode&&(t.meeting.meetingPasscode=e.attendeePasscode),s.aggregatePairing(t.meeting,function(e,n){e?a.debug("could not get response of aggregate Pairing ",e):(t.aggregateAPIResponse=JSON.parse(n),a.debug("main: aggregatePairing response = ",t.aggregateAPIResponse),t.WebRTCPairing())})},connectEventService:function(e){var t=this;c.roster.collection.bind("add",function(e,n,r){t.clearSipConnectionTimer(),t.remoteEndPointStateChange&&t.remoteEndPointStateChange("connected")}),c.roster.collection.bind("change:isSendingAudio",function(e,t,n){a.debug("bind change:isSendingAudio ",e.id+e.attributes.name,e)}),c.roster.collection.bind("change:isSendingVideo",function(e,t,n){a.debug("bind change:isSendingVideo ",e.id+e.attributes.name,e)}),c.roster.collection.bind("remove",function(e,n,r){a.debug("bind onRemove: ",e.id+e.attributes.name,e),t.remoteEndPointStateChange&&t.remoteEndPointStateChange("disconnected")}),c.connect(e,this.config,function(e,n){e&&(a.debug("End the meeting"),t.error&&(a.error(e),t.error("bjnCloudUnreachable"),t.clearBJNCloudConnectionTimer(),t.endMeeting()))})},disconntEventService:function(){c.close()},initWebRTCCall:function(e){a.debug("RTCManager :: WebRTC Pairing response ",JSON.stringify(e));var t={sockUrl:e.uri,sessionId:e.pairingCode,endpointDetails:{displayName:this.meetingInfo.displayName,endpointType:"Browser",browserUserAgent:window.navigator.userAgent},maxBandwidth:this.maxBandwidth},n=this.webrtcParams.peerConfig;n.peerConnectionConfig.iceServers=e.turnservers;var r={peerConfig:n,localVideoStream:this.getMediaStream("localVideoStream"),localAudioStream:this.getMediaStream("localAudioStream")};"firefox"===u.browser&&(r.fakeStream=this.fakeStream),this.makeCall(r,t)},stopLocalStreams:function(){var e=this.getMediaStream("localVideoStream"),t=this.getMediaStream("localAudioStream");r.isNull(t)||r.isUndefined(t)||this.rtcController.stopLocalMedia(t),r.isNull(e)||r.isUndefined(e)||this.rtcController.stopLocalMedia(e)},getMediaStream:function(e){var t=this.rtcController.model.get(e);return t||null},getCurrentState:function(e){return"local"===e?this.rtcController.model.get("callState"):this.getRemoteCallState()},getCurrentMuteStates:function(e){if("local"===e)return{audio:this.rtcController.model.get("audioMuted"),video:this.rtcController.model.get("videoMuted")}},onCallStateChange:function(e){var t=e.get("callState");switch(t){case"connected":this.clearWebrtcReconnectTimer();break;case"disconnected":this.rtcController.model.get("disconnectCode")/100!=2&&(this.initReconnectTimer(),this.initWebrtcReconnectTimer())}this.localEndPointStateChange&&this.localEndPointStateChange(t)},onRemoteStreamChange:function(e){var t=e.get("remoteStream");this.remoteStreamChange&&t&&this.remoteStreamChange(t)},onLocalVideoStreamChange:function(e){this.localVideoStreamChange&&this.localVideoStreamChange(e.get("localVideoStream"))},onLocalAudioStreamChange:function(e){this.localAudioStreamChange&&this.localAudioStreamChange(e.get("localAudioStream"))},onPresentationTokenUpdated:function(e){var t=e.get("presentationToken");if(t&&"contentindication"===t.type)if(this.isScreenShareOn&&"null"===t.callGuid)this.isScreenShareOn=!1,this.onContentStreamUpdated(null);else if(!this.isScreenShareOn&&t.callGuid&&"null"!==t.callGuid){this.isScreenShareOn=!0;var n=e.get("remoteContentStream");n&&this.onContentStreamUpdated(n)}else this.isScreenShareOn||t.callGuid||this.contentStreamChange&&this.contentStreamChange(null)},onContentStreamUpdated:function(e){e&&this.renderStream({stream:e,el:$("#contentVideo")[0]}),this.contentStreamChange&&this.contentStreamChange(this.isScreenShareOn)},initWebrtcReconnectTimer:function(){var e=this;e.webrtcReconnectTimer||(e.webrtcReconnectTimer=window.setTimeout(function(){"connected"!==e.getCurrentState("local")&&(e.error&&e.error("webrtcReconnectTimeout"),e.clearReconnectTimer(),e.endMeeting())},e.bjnWebRTCReconnectTimeout))},clearWebrtcReconnectTimer:function(){this.webrtcReconnectTimer&&window.clearTimeout(this.webrtcReconnectTimer),this.webrtcReconnectTimer=null},initSipConnectionTimer:function(){var e=this;e.sipConnectionTimer||(e.sipConnectionTimer=window.setTimeout(function(){e.error&&e.error("sipConnectionTimeout"),e.endMeeting()},e.bjnSIPTimeout))},clearSipConnectionTimer:function(){this.sipConnectionTimer&&window.clearTimeout(this.sipConnectionTimer),this.sipConnectionTimer=null},initBJNCloudConnectionTimer:function(){var e=this;this.bjnCloudConnectiontimer||(this.bjnCloudConnectiontimer=window.setTimeout(function(){e.onError&&e.onError("bjnCloudUnreachable"),e.endMeeting()},this.bjnCloudTimeout))},clearBJNCloudConnectionTimer:function(){this.bjnCloudConnectiontimer&&window.clearTimeout(this.bjnCloudConnectiontimer),this.bjnCloudConnectiontimer=null},initReconnectTimer:function(){this.reconnectInterval<32e3&&(this.reconnectInterval*=2),a.debug("reconnect interval"+this.reconnectInterval),this.WebRTCPairing(),this.reconnectTimer=window.setTimeout(this.initReconnectTimer,this.reconnectInterval)},getMicrophoneVolume:function(){return this.isVolumeMonitorStarted||(this.rtcController.startVolumeMonitoring(this.rtcController.model.get("localAudioStream"),params={}),this.isVolumeMonitorStarted=!0),this.rtcController.model.get("volumeLevel")},createFakeStream:function(e){var t=this;r.isNull(this.fakeStream)&&navigator.mediaDevices.getUserMedia({video:!0,audio:!1,fake:!0}).then(function(e){e.getVideoTracks().forEach(function(e){e&&e.stop()}),a.debug("RTCManager: Adding fake stream for firefox"),e.bjn_label="fake_stream",t.fakeStream=e})},clearReconnectTimer:function(){this.reconnectTimer&&window.clearTimeout(this.reconnectTimer),this.reconnectTimer=null,this.reconnectInterval=1e3},endMeeting:function(){a.debug("End the meeting"),self.fakeStream=null,this.rtcController.stopVolumeMonitoring(),this.isVolumeMonitorStarted=!1,this.rtcController.endCall(),this.disconntEventService()}})}.call(t,n,t,e))||(e.exports=i)}).call(this,n(0))}])}()},function(e,t,n){var r;void 0===(r=function(e){console.log("Starting SDK Interface");var t={peerConfig:{receiveMedia:{offerToReceiveAudio:!0,offerToReceiveVideo:!0},peerConnectionConfig:{iceServers:[],forceTurn:!1},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0}]}}},r=n(0);const i={major:1,minor:1,build:0};return class{constructor(e){this.options=e||{},this.defaultRTCParams=t,this.mediaStarted=!1,this.mediaConstraints={audio:{},video:{}},this.config={muteParams:{localAudio:!1,localVideo:!1}},this.setupManager()}static get version(){return i}init(){this.manager.getLocalDevices().then(e=>{console.log("Found devices  = ",e),this.localDevices=e.available,this.initialize()}).catch(e=>{console.log("Local device error "+e)})}setupManager(){this.manager=new r({webrtcParams:t,bjnCloudTimeout:5e3,bjnSIPTimeout:3e3,bjnWebRTCReconnectTimeout:9e4})}initialize(){this.manager.setBandwidth(this.options.bandWidth),this.mediaStarted=!1,this.startLocalStream(),this.manager.localVideoStreamChange=this.updateSelfView.bind(this),this.manager.localAudioStreamChange=this.updateAudioPath.bind(this),this.manager.remoteEndPointStateChange=this.onRemoteConnectionStateChange.bind(this),this.manager.localEndPointStateChange=this.onLocalConnectionStateChange.bind(this),this.manager.remoteStreamChange=this.onRemoteStreamUpdated.bind(this),this.manager.error=this.onRTCError.bind(this),this.manager.contentStreamChange=this.onContentShareStateChange.bind(this)}startLocalStream(){console.log("[starting local stream]");var e="local_stream";this.mediaStarted&&(e="preview_stream"),this.manager.getLocalMedia(this.mediaConstraints,e).then(e=>{console.log("Found Local mediastreams = ",e);for(var t=0;t<e.length;t++)"local_audio_stream"===e[t].bjn_label?this.localAudioStream=e[t]:"local_video_stream"===e[t].bjn_label&&(this.localVideoStream=e[t]);this.updateSelfView(this.localVideoStream),this.mediaStarted=!0,this.options.evtVideoUnmute&&this.options.evtVideoUnmute()},e=>{console.log("getLocalMedia error:\n"+JSON.stringify(e,null,2))})}updateSelfView(e){console.log("self view update"),e?(this.manager.renderSelfView({stream:e,el:this.options.localVideoEl}),this.options.evtVideoUnmute&&this.options.evtVideoUnmute(!1)):console.log("updateSelfView no stream!!!")}updateAudioPath(e){e&&console.log("Audio Path Change")}changeAudioInput(e){var t=this.localDevices.audioIn[e].id;console.log("Audio Input is changed: "+t),this.mediaConstraints.audio.deviceId=t,this.manager.stopLocalStreams(),this.startLocalStream()}changeVideoInput(e){var t=this.localDevices.videoIn[e].id;console.log("Video Input is changed: "+t),this.mediaConstraints.video.deviceId=t,this.manager.stopLocalStreams(),this.startLocalStream()}changeAudioOutput(e){var t=this.localDevices.audioOut[e].id;console.log("Audio Output is changed: "+t),this.manager.setSpeaker({speakerId:t,mediaElements:[this.options.remoteVideoEl]})}setVideoBandwidth(e){console.log("Video BW is changed: "+e),this.manager.setBandwidth(e)}toggleAudioMute(e){var t=!!this.config.muteParams.localAudio;return this.config.muteParams.localAudio=!t,this.manager.muteStreams(this.config.muteParams),!t}toggleVideoMute(e){var t=!!this.config.muteParams.localVideo;return this.config.muteParams.localVideo=!t,this.manager.muteStreams(this.config.muteParams),!t}joinMeeting(e){""!=e.numericMeetingId&&""!=e.displayName&&(console.log("*** Joining meeting id: "+e.numericMeetingId),this.manager.startMeeting(e))}leaveMeeting(e){this.manager.endMeeting(),console.log("Leaving meeting")}onRemoteConnectionStateChange(e){console.log("Remote Connection state :: "+e),this.options.evtRemoteConnectionStateChange&&this.options.evtRemoteConnectionStateChange(e)}onLocalConnectionStateChange(e){console.log("Local Connection state :: "+e),this.options.evtLocalConnectionStateChange&&this.options.evtLocalConnectionStateChange(e)}onRemoteStreamUpdated(e){console.info("========Remote stream==========="),this.remoteStream=e,this.remoteStream&&(console.log("Remote stream updated"),this.manager.renderStream({stream:this.remoteStream,el:this.options.remoteVideoEl}))}onContentShareStateChange(e){this.options.evtContentShareStateChange&&this.options.evtContentShareStateChange(e)}onRTCError(e){console.log("Error has occured :: "+e),leaveMeeting(),this.options.evtOnError&&this.options.evtOnError(e)}reportSdkVersion(){return i}}}.call(t,n,t,e))||(e.exports=r)}])});